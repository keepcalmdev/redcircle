var lfb_lastStepID=0,lfb_lastSteps=new Array,lfb_plannedSteps,lfb_gmapService=!1,tld_selectionMode=!1,lfb_calendars=new Array,lfb_stripe;function wpe_getForm(e){for(var t=!1,a=0;a<wpe_forms.length;a++)if(wpe_forms[a].formID==e){t=wpe_forms[a];break}return t}function lfb_onResize(){if(jQuery("#estimation_popup.wpe_fullscreen").css({minHeight:jQuery(window).height()}),jQuery(window).width()<=768){jQuery("#estimation_popup .lfb_stepDescription").each(function(){jQuery(this).css({top:jQuery(this).closest(".genSlide").find(".stepTitle").height()+60})}),jQuery("#estimation_popup .genContent ").each(function(){var e=0;0<jQuery(this).closest(".genSlide").find(".lfb_stepDescription").length&&(e=jQuery(this).closest(".genSlide").find(".lfb_stepDescription").height()),jQuery(this).css({paddingTop:jQuery(this).closest(".genSlide").find(".stepTitle").height()+e+70})})}else jQuery("#estimation_popup .lfb_stepDescription").each(function(){jQuery(this).css({top:jQuery(this).closest(".genSlide").find(".stepTitle").height()+60})}),jQuery("#estimation_popup .genContent ").each(function(){var e=0;0<jQuery(this).closest(".genSlide").find(".lfb_stepDescription").length&&(e=jQuery(this).closest(".genSlide").find(".lfb_stepDescription").height()),jQuery(this).css({paddingTop:jQuery(this).closest(".genSlide").find(".stepTitle").height()+e+70})})}function wpe_updatePlannedSteps(e){var t=parseInt(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"]  #mainPanel .genSlide[data-start="1"]').attr("data-stepid"));(lfb_plannedSteps=new Array).push(t),lfb_plannedSteps=wpe_scanPlannedSteps(t,e)}function wpe_scanPlannedSteps(e,t){new Array;var a=wpe_findPotentialsSteps(e,t);return 0<a.length&&"final"!=a[0]&&(lfb_plannedSteps.push(a[0]),wpe_scanPlannedSteps(a[0],t)),lfb_plannedSteps}function wpe_getStepQuantities(e,t,a){var r=wpe_getForm(e),i=0;if(-1<jQuery.inArray(parseInt(t),lfb_lastSteps)||t==r.step){var o=wpe_getFormContent(e,!0,t)[2];jQuery.each(o,function(){if(this.itemid!=a){isNaN(this.quantity)?i++:i+=parseInt(this.quantity)}})}return i}function wpe_getTotalQuantities(e,t,a){wpe_getForm(e);var r=wpe_getFormContent(e,!0)[2],i=0,o=!0;!isNaN(t)&&0!=t||(o=!1);var p=!1;return jQuery.each(r,function(){if(this.itemid!=a){o&&!p&&this.stepid==t&&(p=!0),p&&this.stepid!=t||(isNaN(this.quantity)?i++:i+=parseInt(this.quantity))}}),i}function wpe_itemClick(e,t,a){var r=wpe_getForm(a),i=e;t&&(jQuery('#estimation_popup[data-form="'+r.formID+'"] .quantityBtns').removeClass("open"),jQuery('#estimation_popup[data-form="'+r.formID+'"] .quantityBtns').fadeOut(250),navigator.userAgent.toLowerCase().match(/(iPad|iPhone|iPod)/i)&&(jQuery("body :not(.ui-slider-handle) > .tooltip").remove(),jQuery("body > .tooltip").remove(),jQuery('#estimation_popup[data-form="'+r.formID+'"] > .tooltip').remove()));if(t&&i.addClass("action"),t||!i.is(".action")){if("zoom"!=r.imgIconStyle&&i.find("span.icon_select").animate({bottom:160,opacity:0},200),i.is(".checked")){if(!t||!i.data("required")){"zoom"==r.imgIconStyle?(i.delay(200).css("transition-delay","0.2s"),i.find("span.icon_select").css("transition-delay","0s")):i.css("transition-delay","0s");var o=220;"zoom"==r.imgIconStyle&&(o=0),i.delay(o).removeClass("checked"),"zoom"!=r.imgIconStyle?i.delay(220).find("span.icon_select").removeClass("fui-check").addClass("fui-cross"):i.find("span.icon_select").css("transition-delay","0s"),i.delay(400).css("transition-delay","0s"),i.find(".icon_quantity").delay(300).fadeOut(200)}}else if(i.css("transition-delay","0s"),0!=r.disableTipMobile&&wpe_is_touch_device()||e.is('[data-type="slider"]')||e.is(".lfb_button")||""!=r.imgTitlesStyle||e.b_tooltip("show"),"zoom"==r.imgIconStyle&&i.find("span.icon_select").css("transition-delay",".5s"),i.is('[type="checkbox"][data-checkboxstyle="checkbox"]')||i.delay(220).addClass("checked"),"zoom"!=r.imgIconStyle&&i.delay(220).find("span.icon_select").removeClass("fui-cross").addClass("fui-check"),0<i.find(".quantityBtns").length&&!i.is("[data-distanceqt]")&&(i.find(".icon_quantity").delay(300).fadeIn(200),i.find(".quantityBtns").delay(500).addClass("open"),i.find(".quantityBtns").delay(500).fadeIn("200")),i.data("urltarget")&&""!=i.data("urltarget")){var p=i.data("urltargetmode");"_self"!=p&&"_blank"!=p&&(p="_blank");var s=window.open(i.data("urltarget"),p);"null"!=typeof s&&null!=s&&s.focus()}"zoom"!=r.imgIconStyle&&i.find("span.icon_select").delay(300).animate({bottom:0,opacity:1},200),t&&i.data("group")&&(i.closest(".genSlide").find('div.selectable.checked[data-group="'+i.data("group")+'"]:not([data-itemid="'+i.attr("data-itemid")+'"])').each(function(){wpe_itemClick(jQuery(this),!1,a),jQuery(this).removeClass("checked")}),i.closest(".genSlide").find('input[type=checkbox][data-group="'+i.data("group")+'"]:checked:not([data-itemid="'+i.attr("data-itemid")+'"])').trigger("click.auto"),i.closest(".genSlide").find('a.lfb_button.checked[data-group="'+i.data("group")+'"]:not([data-itemid="'+i.attr("data-itemid")+'"])').each(function(){wpe_itemClick(jQuery(this),!1,a),jQuery(this).removeClass("checked")}),"1"==r.groupAutoClick&&i.is(".checked")&&i.closest(".genSlide").is("[data-required=true]")&&setTimeout(function(){0==i.closest(".genSlide").find("[data-itemid]").not('[data-itemtype="separator"]').not(".lfb_richtext").not('[data-group="'+i.data("group")+'"]').not(".lfb_disabled").length&&0==i.closest(".genSlide").find('[data-group="'+i.data("group")+'"] .quantityBtns').length&&0==i.closest(".genSlide").find('[data-group="'+i.data("group")+'"] .wpe_qtfield').length&&wpe_nextStep(r.formID)},500)),setTimeout(function(){wpe_updatePrice(a),i.removeClass("action")},420)}setTimeout(function(){i.is('[data-usedistance="true"]')&&lfb_removeDistanceError(i.attr("data-itemid"),a)},200)}function wpe_nl2br(e,t){return((e=e.replace(/\n\n/g,"\n"))+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1"+(t||void 0===t?"<br />":"<br>")+"$2")}function wpe_initForms(){jQuery.each(wpe_forms,function(){var p=this;p.price=0,p.priceSingle=0,p.priceMax=0,p.step=0,p.gFormDesignCheck=0,p.timer_gFormSubmit=null,p.timer_gFormDesign=null,p.animationsSpeed*=1e3,p.reductionResult=0,p.reduction=0,p.discountCode="",p.discountCodeDisplayed=!1,p.initialPrice=parseFloat(p.initialPrice),p.contactSent=0,p.gravitySent=!1,p.shineFxIndex=0,p.subscriptionText=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #finalPrice span:eq(1)').html(),p.richtextsContent=new Array,p.emailSent=!1,p.autoStart=!1,p.urlVariables="",p.useRazorpay=!1,p.razorpayReady=!1,p.stripeToken="",p.itemsData=new Array,p.signature=!1,jQuery('#estimation_popup[data-form="'+p.formID+'"]').is(".wpe_fullscreen")&&jQuery('#estimation_popup[data-form="'+p.formID+'"]').closest("#lfb_bootstraped").parents().css({position:"static",display:"block"}),1==p.useSignature&&(p.signature=jQuery("#lfb_signature").signature({thickness:4,guideline:!0,guidelineOffset:26}),jQuery("#lfb_resetSignature").on("click",function(){p.signature.signature("clear")}),setTimeout(function(){jQuery('#estimation_popup[data-form="'+p.formID+'"] #lfb_signature canvas').attr("width",jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #lfb_signature').width()),jQuery('#estimation_popup[data-form="'+p.formID+'"] #lfb_signature canvas').css("width",jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #lfb_signature').width())},500));for(var e=0;e<p.variables.length;e++)p.variables[e].value=p.variables.defaultValue;jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #lfb_btnPayStripe').on("click",function(){lfb_showWinStripePayment(p)}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] .lfb_richtext[data-itemid]').each(function(){p.richtextsContent[jQuery(this).attr("data-itemid").toString()]=jQuery(this).html()}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] [data-tooltiptext][data-tooltipimg!=""]').each(function(){jQuery(this).attr("data-tooltiptext",jQuery(this).attr("data-tooltiptext")+"<br/><img src='"+jQuery(this).attr("data-tooltipimg")+"' alt='"+jQuery(this).attr("data-tooltiptext")+"'/>")}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] [data-type="numberfield"]:not([value])').each(function(){var e=0;jQuery(this).is("[min]")&&(e=parseInt(jQuery(this).attr("min"))),jQuery(this).val(e)});var o=p.formID;1==p.save_to_cart?p.save_to_cart=!0:p.save_to_cart=!1,1==p.save_to_cart_edd?p.save_to_cart_edd=!0:p.save_to_cart_edd=!1,0<p.gravityFormID&&jQuery.ajax({url:p.ajaxurl,type:"post",data:{action:"get_currentRef",formID:o},success:function(e){p.current_ref=e}}),navigator.userAgent.toLowerCase().match(/(iPad|iPhone|iPod)/i)&&jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] [data-flipfx="1"]').removeAttr("data-flipfx"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"]').is('[data-emaillaststep="1"]')&&(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #finalSlide .linkPrevious').addClass("lfb-hidden"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #wpe_btnOrder').addClass("lfb-hidden")),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] .form-control').on("focus",function(){0==p.disableTipMobile&&wpe_is_touch_device()&&jQuery(this).b_tooltip("show")}).on("focusout",function(){0==p.disableTipMobile&&wpe_is_touch_device()&&(jQuery("#estimation_popup :not(.ui-slider-handle) > .tooltip").remove(),jQuery("body > .tooltip").remove(),jQuery('#estimation_popup[data-form="'+p.formID+'"] > .tooltip').remove())}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #mainPanel .genSlide .genContent div.selectable span.icon_select.lfb_fxZoom').css({textShadow:"-2px 0px "+jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #mainPanel').css("background-color")}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"]').is(".wpe_popup")&&!jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"]').closest("#lfb_bootstraped").parent().is("body")&&jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"]').closest("#lfb_bootstraped").detach().appendTo("body"),jQuery('#estimation_popup[data-form="'+p.formID+'"]').is(".wpe_fullscreen")&&jQuery("html,body").css("overflow-y","hidden"),0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #wtmt_paypalForm').length&&jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #wtmt_paypalForm').attr("target","_self"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] [data-lazy-src]').each(function(){jQuery(this).parent().on("click",function(e){wpe_itemClick(jQuery(this),!0,p.formID)})}),0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #lfb_paymentMethodBtns').length&&(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #lfb_paymentMethodBtns [data-payment="paypal"]').click(function(e){e.preventDefault(),p.useRazorpay=!1,jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #lfb_razorPayCt').slideUp(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #btnOrderPaypal').trigger("click")}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #lfb_paymentMethodBtns [data-payment="razorpay"]').click(function(){lfb_checkStepItemsValid("final",p.formID)&&lfb_checkCaptcha(p,function(){setTimeout(function(){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"]').is(".wpe_fullscreen")?jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"]').animate({scrollTop:jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o+'"] #lfb_razorPayCt').offset().top-(80+parseInt(p.scrollTopMargin))},2*p.animationsSpeed):jQuery("body,html").animate({scrollTop:jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o+'"] #lfb_razorPayCt').offset().top-(80+parseInt(p.scrollTopMargin))},2*p.animationsSpeed)},350),0<lfb_lastSteps.length&&jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #mainPanel #lfb_razorPayCt .linkPrevious').fadeIn(),0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #btnOrderRazorpay').length&&jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #btnOrderRazorpay').trigger("click")})}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #lfb_paymentMethodBtns [data-payment="stripe"]').click(function(){p.useRazorpay=!1,jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #lfb_razorPayCt').slideUp(),lfb_checkStepItemsValid("final",p.formID)&&(0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #lfb_captcha').length?jQuery.ajax({url:p.ajaxurl,type:"post",data:{action:"lfb_checkCaptcha",formID:o,captcha:jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #lfb_captchaField').val()},success:function(e){"1"==e?(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #lfb_captchaPanel').slideUp(100),lfb_showWinStripePayment(p)):jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #lfb_captchaField').closest(".form-group").addClass("has-error")}}):(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #lfb_captchaPanel').slideUp(100),lfb_showWinStripePayment(p)))})),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #btnOrderRazorpay').click(function(){p.useRazorpay=!0,wpe_order(o)}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] input:not([type=checkbox])').change(function(){wpe_updatePrice(o,jQuery(this).attr("data-itemid"))}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] textarea').change(function(){wpe_updatePrice(o,jQuery(this).attr("data-itemid"))}),1==p.enableShineFxBtn&&(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"]').find("a.btn-primary").append('<canvas class="lfb_shineCanvas"></canvas>'),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"]').find("a.btn-primary").mouseover(function(){0==p.shineFxIndex&&lfb_shineBtn(o,jQuery(this).find(".lfb_shineCanvas"))})),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] .lfb_dropzone').each(function(){var e=null;0<jQuery(this).attr("data-maxfiles")&&(e=jQuery(this).attr("data-maxfiles"));var i=jQuery(this);jQuery(this).dropzone({url:p.ajaxurl+"?form="+o,paramName:"file",maxFilesize:jQuery(this).attr("data-filesize"),maxFiles:e,addRemoveLinks:!0,dictRemoveFile:"",dictCancelUpload:"",acceptedFiles:jQuery(this).attr("data-allowedfiles"),dictDefaultMessage:p.filesUpload_text,dictFileTooBig:p.filesUploadSize_text,dictInvalidFileType:p.filesUploadType_text,dictMaxFilesExceeded:p.filesUploadLimit_text,init:function(){this.on("thumbnail",function(e,t){var a=jQuery(e.previewElement),r=e.name.replace(/\//g,"");r=(r=(r=(r=r.replace(/ /g,"_")).replace(/'/g,"_")).replace(/"/g,"_")).replace(/[^a-zA-Z0-9._-]/g,""),a.attr("data-file",r+"_"+i.data("currentFileIndex"))}),this.on("sending",function(e,t,a){i.closest(".genSlide").find(".btn-next").fadeOut(),i.closest(".genSlide").find(".btn-primary").fadeOut(),a.append("action","lfb_upload_form"),a.append("formSession",jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"]').attr("data-formsession")),a.append("itemID",i.attr("data-itemid"))}),this.on("complete",function(e,t){0!=i.find(".dz-preview:not(.dz-complete)").length&&0!=i.find(".dz-preview").length||(i.closest(".genSlide").find(".btn-next").fadeIn(),i.closest(".genSlide").find(".btn-primary").fadeIn()),wpe_updatePrice(p.formID)}),this.on("success",function(e,t){var a=jQuery(e.previewElement),r=e.name.replace(/\//g,"");if(r=(r=(r=(r=r.replace(/ /g,"_")).replace(/'/g,"_")).replace(/"/g,"_")).replace(/[^a-zA-Z0-9._-]/g,""),1==p.emailCustomerLinks){var i=t.split("||"),o=i[0];a.attr("data-url",o),t=i[1]}a.attr("data-file",t+"_"+r)}),this.on("removedfile",function(e,t){wpe_updatePrice(p.formID)})}})}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"]').find('.form-control[data-validation="mask"][data-mask]').each(function(){0<jQuery(this).attr("data-mask").trim().length&&jQuery(this).mask(jQuery(this).attr("data-mask"),{clearIfNotMatch:!0})}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"]').find('input[type="text"][data-itemid],textarea[data-itemid]').each(function(){jQuery(this).attr("data-initialvalue",jQuery(this).val())}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] [data-itemid][data-type="slider"]').each(function(){var e=parseInt(jQuery(this).attr("data-min"));isNaN(e)&&(e=0);var t=parseInt(jQuery(this).attr("data-max"));0==t&&(t=30);var r=jQuery('<div class="tooltip top" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner">'+e+"</div></div>").css({position:"absolute",top:-55,left:-20,opacity:1}).hide(),a=1;jQuery(this).is("[data-stepslider]")&&0<parseInt(jQuery(this).attr("data-stepslider"))&&(a=parseInt(jQuery(this).attr("data-stepslider")));jQuery(this).is("[data-usecalculationqt]"),jQuery(this).slider({min:e,max:t,value:e,step:a,disabled:!1,orientation:"horizontal",range:"min",change:function(e,t){tld_selectionMode||(r.find(".tooltip-inner").html(wpe_formatPrice(t.value,p.formID)),e.originalEvent&&wpe_updatePrice(o,jQuery(this).attr("data-itemid")))},start:function(e,t){if(tld_selectionMode)return!1},slide:function(e,t){if(tld_selectionMode)return!1;r.find(".tooltip-inner").html(wpe_formatPrice(t.value,p.formID));var a=this;e.originalEvent&&(setTimeout(function(){wpe_updatePrice(o,jQuery(a).attr("data-itemid")),jQuery(a).addClass("lfb_changed")},30),r.show()),wpe_updatePrice(o,jQuery(a).attr("data-itemid"))},stop:function(e,t){r.find(".tooltip-inner").html(wpe_formatPrice(t.value,p.formID)),wpe_updatePrice(o,jQuery(this).attr("data-itemid")),r.hide()}}).find(".ui-slider-handle").append(r).hover(function(){tld_selectionMode||r.show()},function(){r.hide()})}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] .lfb_colorpicker').each(function(){jQuery(this);jQuery(this).prev(".lfb_colorPreview").click(function(){tld_selectionMode||jQuery(this).next(".lfb_colorpicker").trigger("click")}),jQuery(this).prev(".lfb_colorPreview").css({backgroundColor:p.colorA}),jQuery(this).colpick({color:p.colorA,layout:"hex",onSubmit:function(){jQuery("body > .colpick").fadeOut()},onChange:function(e,t,a,r,i){jQuery(r).val("#"+t),jQuery(r).prev(".lfb_colorPreview").css({backgroundColor:"#"+t})}})}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"]').find('.lfb_colorPreview[data-urltarget],input[type="text"][data-itemid]:not(.lfb_colorpicker)[data-urltarget],textarea[data-itemid][data-urltarget],select[data-itemid][data-urltarget],input[type="number"][data-urltarget]').each(function(){jQuery(this).click(function(){if(!tld_selectionMode){var e=window.open(jQuery(this).attr("data-urltarget"),"_blank");"null"!=typeof e&&null!=e&&e.focus()}})}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"]').find('[data-autocomplete="1"]').each(function(){var e={};"city"==jQuery(this).attr("data-fieldtype")?e.types=["(cities)"]:"address"==jQuery(this).attr("data-fieldtype")?0<jQuery(this).closest(".genContent").find('[data-fieldtype="city"]').length&&(e.types=["address"]):"country"==jQuery(this).attr("data-fieldtype")?e.types=["(regions)"]:"zip"==jQuery(this).attr("data-fieldtype")&&(e.types=["(regions)"]);var r=new google.maps.places.Autocomplete(jQuery(this).get(0),e);r.field=jQuery(this),"zip"==jQuery(this).attr("data-fieldtype")?google.maps.event.addListener(r,"place_changed",function(){for(var e=r.getPlace(),t=0;t<e.address_components.length;t++)for(var a=0;a<e.address_components[t].types.length;a++)"postal_code"==e.address_components[t].types[a]&&r.field.val(e.address_components[t].long_name)}):"country"==jQuery(this).attr("data-fieldtype")&&google.maps.event.addListener(r,"place_changed",function(){for(var e=r.getPlace(),t=0;t<e.address_components.length;t++)for(var a=0;a<e.address_components[t].types.length;a++)"country"==e.address_components[t].types[a]&&r.field.val(e.address_components[t].long_name)})}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"]  #mainPanel .genSlide [data-group]').each(function(){var e=jQuery(this);"1"==p.groupAutoClick&&""!=e.prop("data-group")&&e.closest(".genSlide").is("[data-required=true]")&&0==e.closest(".genSlide").find("[data-itemid]:not(.lfb_disabled)").not(".lfb_richtext").not('[data-group="'+e.data("group")+'"]').not(".lfb_disabled").length&&0==e.closest(".genSlide").find('[data-group="'+e.data("group")+'"] .quantityBtns').length&&0==e.closest(".genSlide").find('[data-group="'+e.data("group")+'"] .wpe_qtfield').length&&e.closest(".genSlide").find(".btn-next").addClass("lfb-hidden")}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"]  #mainPanel .genSlide div.selectable.prechecked,#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"]  #mainPanel .genSlide a.lfb_button.prechecked,#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #mainPanel .genSlide input[type=checkbox][data-price].prechecked').each(function(){wpe_itemClick(jQuery(this),!1,o)}),wpe_initPrice(o),wpe_updatePrice(o),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #btnStart').click(function(){tld_selectionMode||wpe_openGenerator(o)}),wpe_initGform(o),0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #wtmt_paypalForm').length&&jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #wtmt_paypalForm').attr("target","_self"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] .quantityBtns > a').click(function(){tld_selectionMode||("less"==jQuery(this).attr("data-btn")?wpe_quantity_less:wpe_quantity_more)(this,o)}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] .linkPrevious').click(function(){tld_selectionMode||wpe_previousStep(o)}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] .btn-next').click(function(){tld_selectionMode||wpe_nextStep(o)}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #btnOrderPaypal').click(function(){tld_selectionMode||wpe_order(o)}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #finalSlide [data-toggle="switch"]').change(function(){wpe_toggleField(jQuery(this).attr("data-fieldid"),o)});var t=!1;jQuery(".gform_wrapper").each(function(){jQuery(this).attr("id").substr(jQuery(this).attr("id").lastIndexOf("_")+1,jQuery(this).attr("id").length)==p.gravityFormID&&(t?jQuery(this).remove():(t=!0,jQuery(this).detach().insertAfter('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #finalPrice')))}),setTimeout(function(){if(1<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #finalSlide .gform_wrapper').length){var e=!1;jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #finalSlide .gform_wrapper').each(function(){e?jQuery(this).remove():e=!0})}},500),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] .wpe_qtfield').attr("type","number"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] .wpe_qtfield').focusout(function(){-1<jQuery(this).val().indexOf("-")&&(!jQuery(this).is("[min]")||jQuery(this).attr("min").indexOf("-")<0)&&jQuery(this).val(parseInt(jQuery(this).attr("min"))),parseFloat(jQuery(this).val())<parseInt(jQuery(this).attr("min"))&&jQuery(this).val(jQuery(this).attr("min")),parseFloat(jQuery(this).val())>parseInt(jQuery(this).attr("max"))&&jQuery(this).val(jQuery(this).attr("max")),wpe_updatePrice(p.formID),wpe_updateSummary(p.formID)}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] input[type="number"][data-itemid]').keydown(function(e){return 69!=e.keyCode}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] input[type="number"][data-itemid]').on("focusin",function(){0==jQuery(this).val()&&jQuery(this).val("")}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] input[type="number"][data-itemid]').focusout(function(){""==jQuery(this).val()&&jQuery(this).val(0),0==jQuery(this).val()&&!jQuery(this).is('[data-required="true"]')||(-1<jQuery(this).val().indexOf("-")&&(!jQuery(this).is("[min]")||jQuery(this).attr("min").indexOf("-")<0)&&jQuery(this).val(parseInt(jQuery(this).attr("min"))),parseFloat(jQuery(this).val())<parseFloat(jQuery(this).attr("min"))&&jQuery(this).val(jQuery(this).attr("min")),parseFloat(jQuery(this).val())>parseFloat(jQuery(this).attr("max"))&&jQuery(this).val(jQuery(this).attr("max")),""!=jQuery(this).val()&&!isNaN(parseInt(jQuery(this).val()))||jQuery(this).val(0),""!=jQuery(this).val()&&(jQuery(this).is('[data-valueasqt="0"]')||0<jQuery(this).val())?jQuery(this).addClass("checked"):jQuery(this).removeClass("checked")),wpe_updatePrice(p.formID),wpe_updateSummary(p.formID)}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] .wpe_sliderQt').each(function(){var e=parseInt(jQuery(this).closest(".quantityBtns").attr("data-min"));0==e&&(e=1);var a=jQuery('<div class="tooltip top" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner">'+e+"</div></div>").css({position:"absolute",top:-55,left:-20,opacity:1}).hide(),t=1;jQuery(this).closest(".quantityBtns").is("[data-stepslider]")&&0<parseInt(jQuery(this).closest(".quantityBtns").attr("data-stepslider"))&&(t=parseInt(jQuery(this).closest(".quantityBtns").attr("data-stepslider")));jQuery(this).slider({min:e,max:parseInt(jQuery(this).closest(".quantityBtns").attr("data-max")),value:parseInt(jQuery(this).closest(".quantityBtns").next(".icon_quantity").html()),orientation:"horizontal",range:"min",disabled:!1,step:t,change:function(e,t){a.find(".tooltip-inner").html(t.value),jQuery(this).closest(".quantityBtns").next(".icon_quantity").html(t.value),e.originalEvent&&wpe_updatePrice(o,jQuery(this).attr("data-itemid"))},slide:function(e,t){jQuery(this).closest(".quantityBtns").next(".icon_quantity").html(t.value),a.find(".tooltip-inner").html(t.value),e.originalEvent&&wpe_updatePrice(o,jQuery(this).attr("data-itemid"))}}).find(".ui-slider-handle").append(a).hover(function(){a.show()},function(){a.hide()})}),lfb_loadStoredForm(p.formID),lfb_initRichTextValues(p.formID),"0"==p.intro_enabled&&(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] .lfb_btnFloatingSummary').css({display:"inline-block"}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] .lfb_btnSaveForm').css({display:"inline-block"}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #btnStart,#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #startInfos').hide(),"2"!=p.showSteps?jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] .genPrice').fadeIn(500):jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] .genPrice').hide(),3==p.showSteps&&jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #lfb_stepper').fadeIn(500),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"] #mainPanel').fadeIn(p.animationsSpeed,function(){p.autoStart||wpe_nextStep(p.formID)})),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+p.formID+'"]  #lfb_loader').fadeOut()})}function lfb_replaceAllBackSlash(e){for(var t=e.indexOf("\\");0<=t;)t=(e=e.replace("\\","")).indexOf("\\");return e}function lfb_shineBtn(e,t){var a=wpe_getForm(e);t.attr({width:t.width(),height:t.height()}),t.css({borderRadius:t.parent().css("border-radius")});var r=t.get(0).getContext("2d");r.clearRect(0,0,t.width(),t.height());var i=r.createLinearGradient(0,0,t.width(),t.height());if(a.shineFxIndex+=.08,1<a.shineFxIndex)r.clearRect(0,0,t.width(),t.height()),a.shineFxIndex=0;else{var o=a.shineFxIndex,p=o-.1;p<0&&(p=0);var s=o+.1;1<s&&(s=1),i.addColorStop(0,"transparent"),i.addColorStop(p,"rgba(255,255,255,0)"),i.addColorStop(o,"rgba(255,255,255,0.3)"),i.addColorStop(s,"rgba(255,255,255,0)"),i.addColorStop(1,"rgba(255,255,255,0)"),r.fillStyle=i,r.fillRect(0,0,t.width(),t.height()),setTimeout(function(){lfb_shineBtn(e,t)},30)}}function lfb_updateLayerImages(i){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] .genSlide[data-stepid="'+form.step+'"] .lfb_layeredImage').each(function(){var r=parseInt(jQuery(this).closest(".genSlide").attr("data-stepid"));jQuery(this).find("img:not(.lfb_baseLayer)").each(function(){var e=lfb_replaceAllBackSlash(jQuery(this).attr("data-showconditions"));if(0<(e=e.replace(/'/g,'"')).length)try{var t=lfb_checkConditions(e=JSON.parse(e),i,r),a=jQuery(this).attr("data-showconditionsoperator");"OR"==a&&!t.errorOR||"OR"!=a&&!t.error?jQuery(this).fadeIn():jQuery(this).fadeOut()}catch(e){jQuery(this).fadeIn()}else jQuery(this).fadeIn()})})}function lfb_updateShowSteps(e){for(var t=0;t<lfb_plannedSteps.length;t++){var a=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] .genSlide[data-stepid="'+lfb_plannedSteps[t]+'"]');if(a.is("[data-useshowconditions]")){var r=lfb_replaceAllBackSlash(a.attr("data-showconditions"));if(""!=(r=r.replace(/'/g,'"')))try{var i=lfb_checkConditions(r=JSON.parse(r),e,parseInt(jQuery(this).attr("data-stepid"))),o=a.attr("data-showconditionsoperator");"OR"==o&&!i.errorOR||"OR"!=o&&!i.error?a.is(".lfb_disabled")&&(a.css({opacity:0}),a.removeClass("lfb_disabled")):a.is(".lfb_disabled")||a.addClass("lfb_disabled")}catch(e){}}}jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] .genSlide[data-useshowconditions]').each(function(){})}function lfb_updateShowItems(r){var e=wpe_getForm(r),t=lfb_lastSteps.slice();"final"!=e.step&&-1==jQuery.inArray(parseInt(e.step),t)?t.push(parseInt(e.step)):"final"==e.step&&t.push("final");for(var a=0;a<t.length;a++){var i=t[a];jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r+'"] .genSlide[data-stepid="'+i+'"] [data-useshowconditions]').each(function(){var e=lfb_replaceAllBackSlash(jQuery(this).attr("data-showconditions"));if(""!=(e=e.replace(/'/g,'"')))try{var t=lfb_checkConditions(e=JSON.parse(e),r,i),a=jQuery(this).attr("data-showconditionsoperator");"OR"==a&&!t.errorOR||"OR"!=a&&!t.error?(0<jQuery(this).closest(".itemBloc").length&&jQuery(this).closest(".itemBloc").is(".lfb_disabled")||0==jQuery(this).closest(".itemBloc").length&&jQuery(this).is(".lfb_disabled"))&&(jQuery(this).removeClass("lfb_disabled"),jQuery(this).closest(".itemBloc").removeClass("lfb_disabled"),jQuery(this).stop().animate({opacity:1},300),jQuery(this).is("input.prechecked")&&!jQuery(this).is(":checked")&&wpe_itemClick(jQuery(this),!1,r),jQuery(this).is(".selectable.prechecked")&&!jQuery(this).is(".checked")&&wpe_itemClick(jQuery(this),!1,r),jQuery(this).is(".lfb_button.prechecked")&&!jQuery(this).is(".checked")&&wpe_itemClick(jQuery(this),!1,r),(jQuery(this).is('input[type="text"]')||jQuery(this).is("textarea"))&&jQuery(this).is("[data-initialvalue]")&&jQuery(this).val(jQuery(this).attr("data-initialvalue")),jQuery(this).closest(".itemBloc").stop().fadeIn(100)):jQuery(this).is(".lfb_disabled")||(jQuery(this).css({opacity:1}),jQuery(this).is(":checked")&&wpe_itemClick(jQuery(this),!1,r),jQuery(this).is(".checked")&&wpe_itemClick(jQuery(this),!1,r),jQuery(this).is(".lfb_dropzone")&&jQuery(this).find(".dz-preview").remove(),jQuery(this).addClass("lfb_disabled"),jQuery(this).closest(".itemBloc").addClass("lfb_disabled"),jQuery(this).stop().animate({opacity:0},300),jQuery(this).closest(".itemBloc").stop().fadeOut(300))}catch(e){}})}}function lfb_removeFile(e,t){var a=wpe_getForm(e);jQuery.ajax({url:a.ajaxurl,type:"post",data:{action:"lfb_removeFile",formSession:jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"]').attr("data-formsession"),file:t}})}function wpe_disablesThemeScripts(){var e=!1;jQuery("script").each(function(){e&&(jQuery(this).attr("src")&&0<jQuery(this).attr("src").indexOf("WP_Helper_Creator")||jQuery(this).attr("src")&&0<jQuery(this).attr("src").indexOf("VisitorsTracker")||jQuery(this).attr("src")&&0<jQuery(this).attr("src").indexOf("WP_Visual_Chat")||jQuery(this).attr("src")&&0<jQuery(this).attr("src").indexOf("gravityforms")||(this.innerText||this.textContent).indexOf("analytics")<0&&0==jQuery(this).parents(".gform_wrapper").length&&jQuery(this).attr("disabled","disabled"));jQuery(this).attr("src")&&0<jQuery(this).attr("src").indexOf("estimation_popup")&&(e=!0)})}function wpe_initGform(t){var a=wpe_getForm(t);0<a.gravityFormID&&(a.gravitySent=!1,a.gFormDesignCheck++,a.timer_gFormDesign&&jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"] #finalSlide').delay(100).animate({opacity:1},1e3),jQuery("#gform_wrapper_"+a.gravityFormID+" input[type=radio]").not('[data-toggle="radio"]').attr("data-toggle","radio"),jQuery("#gform_wrapper_"+a.gravityFormID+"  .ginput_container input,#gform_wrapper_"+a.gravityFormID+"  .ginput_container select,#gform_wrapper_"+a.gravityFormID+" .ginput_container textarea").attr("title","control"),jQuery("#gform_wrapper_"+a.gravityFormID+"  .ginput_container input,#gform_wrapper_"+a.gravityFormID+"  .ginput_container textarea, #gform_wrapper_"+a.gravityFormID+" .ginput_container select").not("[type=checkbox]").not("[type=radio]").not("[type=submit]").addClass("form-control"),jQuery("#gform_wrapper_"+a.gravityFormID+"  .ginput_container").addClass("form-group"),jQuery("#gform_wrapper_"+a.gravityFormID+"  .gform_button").attr("class","btn btn-wide btn-primary"),jQuery("#gform_wrapper_"+a.gravityFormID+'  .gform_wrapper input[type="radio"]:not(.ready)').each(function(){jQuery(this).addClass("ready");jQuery("#gform_wrapper_"+a.gravityFormID+' .gform_wrapper label[for="'+jQuery(this).attr("id")+'"]').html();jQuery("#gform_wrapper_"+a.gravityFormID+'  .gform_wrapper label[for="'+jQuery(this).attr("id")+'"]').parent("li").css("display","inline-block"),jQuery("#gform_wrapper_"+a.gravityFormID+'  .gform_wrapper label[for="'+jQuery(this).attr("id")+'"]').append(jQuery(this)),jQuery("#gform_wrapper_"+a.gravityFormID+'  .gform_wrapper label[for="'+jQuery(this).attr("id")+'"]').addClass("radio"),jQuery("#gform_wrapper_"+a.gravityFormID+'  .gform_wrapper label[for="'+jQuery(this).attr("id")+'"]').prepend('<span class="icons"><span class="first-icon fui-radio-unchecked"></span><span class="second-icon fui-radio-checked"></span></span>'),jQuery("#gform_wrapper_"+a.gravityFormID+'  .gform_wrapper label[for="'+jQuery(this).attr("id")+'"]').parent("li").next().is("br")||jQuery("#gform_wrapper_"+a.gravityFormID+'  .gform_wrapper label[for="'+jQuery(this).attr("id")+'"]').parent("li").after("<br/>"),jQuery(this).is(":checked")&&jQuery(this).trigger("click")}),jQuery("#gform_wrapper_"+a.gravityFormID+'  .gform_wrapper input[type="checkbox"]:not(.ready)').each(function(){jQuery(this).addClass("ready");jQuery("#gform_wrapper_"+a.gravityFormID+'  .gform_wrapper label[for="'+jQuery(this).attr("id")+'"]').html();jQuery("#gform_wrapper_"+a.gravityFormID+'  .gform_wrapper label[for="'+jQuery(this).attr("id")+'"]').parent("li").css("display","inline-block"),jQuery("#gform_wrapper_"+a.gravityFormID+'  .gform_wrapper label[for="'+jQuery(this).attr("id")+'"]').append(jQuery(this)),jQuery("#gform_wrapper_"+a.gravityFormID+'  .gform_wrapper label[for="'+jQuery(this).attr("id")+'"]').addClass("checkbox"),jQuery(this).before('<span class="icons"><span class="first-icon fui-checkbox-unchecked"></span><span class="second-icon fui-checkbox-checked"></span></span>'),jQuery("#gform_wrapper_"+a.gravityFormID+'  .gform_wrapper label[for="'+jQuery(this).attr("id")+'"]').parent("li").next().is("br")||jQuery("#gform_wrapper_"+a.gravityFormID+'  .gform_wrapper label[for="'+jQuery(this).attr("id")+'"]').parent("li").after("<br/>")}),jQuery("#gform_wrapper_"+a.gravityFormID+"  .gform_wrapper label.checkbox").each(function(){0<jQuery(this).find("[type=checkbox]").length&&jQuery(this).find("[type=checkbox]").eq(1).remove(),jQuery(this).find("[type=checkbox]").is(":checked")&&jQuery(this).find("[type=checkbox]").trigger("click")}),0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"] #wtmt_paypalForm').length&&jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"] #wtmt_paypalForm  #btnOrderPaypal').hide(),jQuery(" #gform_submit_button_"+a.gravityFormID).click(function(e){if(e.preventDefault(),!tld_selectionMode&&!a.gravitySent){a.gravitySent=!0,jQuery(this).addClass("anim"),a.gFormDesignCheck=0,jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"] #finalSlide').delay(1e3).animate({opacity:0},1e3);jQuery(this);setTimeout(function(){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"] #finalSlide .gform_wrapper form').trigger("submit",[!0]),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"] #finalSlide .gform_wrapper form').submit(),a.timer_gFormDesign=setTimeout(function(){wpe_initGform(t)},2e3)},1e3)}}))}function wpe_initPrice(e){var t=wpe_getForm(e);0<t.max_price?t.priceMax=t.max_price:(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t.formID+'"] #mainPanel .genSlide [data-price]').each(function(){if(jQuery(this).data("price")&&0<jQuery(this).data("price"))if(0<jQuery(this).find(".icon_quantity").length)e=10<(e=parseFloat(jQuery(this).find(".icon_quantity").html()))&&100<parseFloat(jQuery(this).data("price"))?10:30<e?30:parseFloat(jQuery(this).find(".quantityBtns").data("max")),"-"==jQuery(this).data("operation")||"/"==jQuery(this).data("operation")||(t.priceMax+=parseFloat(jQuery(this).data("price"))*e);else if(0<jQuery(this).find(".wpe_qtfield").length){var e;e=10<(e=parseFloat(jQuery(this).find(".wpe_qtfield").val()))&&100<parseFloat(jQuery(this).data("price"))?10:30<e?30:parseFloat(0<jQuery(this).find(".wpe_qtfield").attr("max").length)?parseFloat(jQuery(this).find(".wpe_qtfield").attr("max")):30,"-"==jQuery(this).data("operation")||"/"==jQuery(this).data("operation")||(t.priceMax+=parseFloat(jQuery(this).data("price"))*e)}else"+"==jQuery(this).data("operation")&&(t.priceMax+=parseFloat(jQuery(this).data("price")))}),t.priceMax+=t.initialPrice,jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+t.formID+'"] #mainPanel .genSlide [data-price][data-operation="x"]').each(function(){if(0<jQuery(this).find(".icon_quantity").length)for(var e=0;e<parseFloat(jQuery(this).find(".icon_quantity").html());e++)t.priceMax=t.priceMax+t.priceMax*parseFloat(jQuery(this).data("price"))/100;else t.priceMax=t.priceMax+t.priceMax*parseFloat(jQuery(this).data("price"))/100}))}function initFlatUI(){jQuery("#estimation_popup.wpe_bootstraped .input-group").on("focus",".form-control",function(){jQuery(this).closest(".input-group, .form-group").addClass("focus")}).on("blur",".form-control",function(){jQuery(this).closest(".input-group, .form-group").removeClass("focus")}),jQuery("#estimation_popup.wpe_bootstraped .pagination").on("click","a",function(){jQuery(this).parent().siblings("li").removeClass("active").end().addClass("active")}),jQuery("#estimation_popup.wpe_bootstraped .btn-group").on("click","a",function(){jQuery(this).siblings().removeClass("active").end().addClass("active")}),jQuery('#estimation_popup.wpe_bootstraped [data-toggle="switch"][data-checkboxstyle="switch"]').wrap('<div class="switch"  data-on-label="<i class=\'fui-check\'></i>" data-off-label="<i class=\'fui-cross\'></i>" />').parent().bootstrapSwitch(),jQuery('#estimation_popup.wpe_bootstraped [data-toggle="switch"][data-checkboxstyle="switch"]').on("change",function(){jQuery(this).is(":checked")||jQuery(this).removeClass("checked")}),jQuery("#estimation_popup.wpe_bootstraped input[type=checkbox][data-urltarget]").each(function(){jQuery(this).closest(".switch.has-switch").click(function(){if(!tld_selectionMode&&0<jQuery(this).find(".switch-on").length){var e=window.open(jQuery(this).find("input[type=checkbox][data-urltarget]").attr("data-urltarget"),"_blank");"null"!=typeof e&&null!=e&&e.focus()}})}),0<jQuery("#estimation_popup.wpe_bootstraped .lfb_selectpicker").length&&(jQuery("#estimation_popup.wpe_bootstraped .lfb_selectpicker").selectpicker(),jQuery("#estimation_popup.wpe_bootstraped .lfb_selectpicker").each(function(){jQuery(this).closest(".itemBloc").find(".btn-group.lfb_bootstrap-select").attr("data-originaltitle",jQuery(this).attr("data-originaltitle")),jQuery(this).closest(".itemBloc").find(".btn-group.lfb_bootstrap-select").attr("data-original-title",jQuery(this).attr("data-original-title")),jQuery(this).closest(".itemBloc").find(".btn-group.lfb_bootstrap-select").attr("data-tooltiptext",jQuery(this).attr("data-tooltiptext")),jQuery(this).closest(".itemBloc").find(".btn-group.lfb_bootstrap-select").attr("data-tooltipimg",jQuery(this).attr("data-tooltipimg")),jQuery(this).closest(".itemBloc").find(".btn-group.lfb_bootstrap-select").attr("data-toggle",jQuery(this).attr("data-toggle")),jQuery(this).closest(".itemBloc").find(".btn-group.lfb_bootstrap-select").attr("data-placement",jQuery(this).attr("data-placement"))})),jQuery("#estimation_popup .input-group-addon").click(function(){jQuery(this).next("input").trigger("focus")})}function lfb_updateItemData(e,t){for(var a=!1,r=-1,i=0;i<e.itemsData.length;i++)if(e.itemsData[i].itemid==t){a=e.itemsData[i],r=i;break}var o=new Array,p=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e.formID+'"] .lfb_itemContainer_'+t);if(p.is(".lfb_disabled"))a&&(e.itemsData=jQuery.grep(e.itemsData,function(e){return e.itemid!=t}));else{var s=p.closest(".genSlide").attr("data-stepid"),n={},d=!0;if(0<p.find("div.selectable.checked").length){var l=p.find("div.selectable.checked").get(0);jQuery(l).is("[data-resqt]")&&jQuery(l).data("resqt",jQuery(l).attr("data-resqt")),jQuery(l).is("[data-resprice]")&&jQuery(l).data("resprice",jQuery(l).attr("data-resprice")),!$panel.is('[data-showstepsum="0"]')&&jQuery(l).is('[data-showinsummary="true"]')||(d=!1);var u=parseFloat(jQuery(l).data("resqt")),m=parseFloat(jQuery(l).data("resprice"));0==u&&(u=1),1<u&&0,jQuery(l).data("price")&&("+"==jQuery(l).data("operation")?"left"==e.currencyPosition?m=e.currency+m:m+=e.currency:"-"==jQuery(l).data("operation")?"left"==e.currencyPosition?m="-"+e.currency+m:m+="-"+e.currency:m="/"==jQuery(l).data("operation")?"-"+jQuery(l).data("price")+"%":"+"+jQuery(l).data("price")+"%");var f=parseFloat(jQuery(l).data("resprice"));isNaN(f)&&(f=parseFloat(jQuery(l).data("price")));var c=!1;if(jQuery(l).is('[data-singleprice="true"]')&&(c=!0),-1==jQuery.inArray(jQuery(l).attr("data-itemid"),o)){o.push(jQuery(l).attr("data-itemid"));var _=jQuery(l).attr("data-title");jQuery(l).is("[data-original-title]")&&jQuery(l).is("[data-reducqt]")&&(_=jQuery(l).attr("data-original-title")),jQuery(l).is("[data-originaltitle]")&&jQuery(l).is('[data-showprice="1"]')&&(_=jQuery(l).attr("data-originaltitle")),jQuery(l).is("[data-originallabel]")&&(_=jQuery(l).attr("data-originallabel")),n={label:_,itemid:jQuery(l).attr("data-itemid"),price:f,quantity:u,step:$panel.attr("data-title"),stepid:s,showInSummary:d,isSinglePrice:c,image:jQuery(l).find(".img").attr("src")}}}if(0<p.find("a.lfb_button.checked").length){l=p.find("a.lfb_button.checked").get(0),m=parseFloat(jQuery(l).data("price"));if(!$panel.is('[data-showstepsum="0"]')&&jQuery(l).is('[data-showinsummary="true"]')||(d=!1),jQuery(l).data("price")){"+"==jQuery(l).data("operation")?"left"==e.currencyPosition?m=e.currency+m:m+=e.currency:"-"==jQuery(l).data("operation")?"left"==e.currencyPosition?m="-"+e.currency+m:m+="-"+e.currency:m="/"==jQuery(l).data("operation")?"-"+m+"%":"+"+m+"%";jQuery(l).attr("data-originaltitle");jQuery(l).is("select")&&jQuery(l).val()}else{jQuery(l).attr("data-originaltitle");jQuery(l).is("select")&&jQuery(l).val()}_=jQuery(l).attr("data-title");jQuery(l).is("[data-originaltitle]")&&jQuery(l).is('[data-showprice="1"]')&&(_=jQuery(l).attr("data-originaltitle")),jQuery(l).is("[data-originallabel]")&&(_=jQuery(l).attr("data-originallabel")),jQuery(l).is("select")&&(_+=" : "+jQuery(l).val());c=!1;jQuery(l).is('[data-singleprice="true"]')&&(c=!0),-1==jQuery.inArray(jQuery(l).attr("data-itemid"),o)&&(o.push(jQuery(l).attr("data-itemid")),n={label:_,itemid:jQuery(l).attr("data-itemid"),type:p.attr("data-itemtype"),price:parseFloat(jQuery(l).data("resprice")),quantity:1,step:$panel.attr("data-title"),stepid:s,showInSummary:d,isSinglePrice:c})}if(0<p.find("input[type=checkbox]:checked").length){l=p.find("input[type=checkbox]:checked").get(0),m=parseFloat(jQuery(l).data("price"));if(!$panel.is('[data-showstepsum="0"]')&&jQuery(l).is('[data-showinsummary="true"]')||(d=!1),jQuery(l).data("price")){"+"==jQuery(l).data("operation")?"left"==e.currencyPosition?m=e.currency+m:m+=e.currency:"-"==jQuery(l).data("operation")?"left"==e.currencyPosition?m="-"+e.currency+m:m+="-"+e.currency:m="/"==jQuery(l).data("operation")?"-"+m+"%":"+"+m+"%";jQuery(l).attr("data-originaltitle");jQuery(l).is("select")&&jQuery(l).val()}else{jQuery(l).attr("data-originaltitle");jQuery(l).is("select")&&jQuery(l).val()}_=jQuery(l).attr("data-title");jQuery(l).is("[data-originaltitle]")&&jQuery(l).is('[data-showprice="1"]')&&(_=jQuery(l).attr("data-originaltitle")),jQuery(l).is("[data-originallabel]")&&(_=jQuery(l).attr("data-originallabel")),jQuery(l).is("select")&&(_+=" : "+jQuery(l).val());c=!1;jQuery(l).is('[data-singleprice="true"]')&&(c=!0),-1==jQuery.inArray(jQuery(l).attr("data-itemid"),o)&&(o.push(jQuery(l).attr("data-itemid")),n={label:_,itemid:jQuery(l).attr("data-itemid"),type:p.attr("data-itemtype"),price:parseFloat(jQuery(l).data("resprice")),quantity:1,step:$panel.attr("data-title"),stepid:s,showInSummary:d,isSinglePrice:c})}if(p.is(".lfb_richtext")&&!p.is(".lfb_shortcode")){l=p.get(0);!$panel.is('[data-showstepsum="0"]')&&jQuery(l).is('[data-showinsummary="true"]')||(d=!1),d&&(n={label:jQuery(l).attr("data-title"),itemid:jQuery(l).attr("data-itemid"),value:jQuery(l).html(),step:$panel.attr("data-title"),stepid:s,showInSummary:d})}if(0<p.find('div[data-type="slider"]').length){l=p.find('div[data-type="slider"]').get(0),m=parseFloat(jQuery(l).data("price"));if(!$panel.is('[data-showstepsum="0"]')&&jQuery(l).is('[data-showinsummary="true"]')||(d=!1),0==(u=parseFloat(jQuery(l).slider("value")))&&(u=1),1<u&&0,jQuery(l).data("price")){"+"==jQuery(l).data("operation")?"left"==e.currencyPosition?m=e.currency+m:m+=e.currency:"-"==jQuery(l).data("operation")?"left"==e.currencyPosition?m="-"+e.currency+m:m+="-"+e.currency:m="/"==jQuery(l).data("operation")?"-"+m+"%":"+"+m+"%";jQuery(l).attr("data-originaltitle");jQuery(l).is("select")&&jQuery(l).val()}else{jQuery(l).attr("data-originaltitle");jQuery(l).is("select")&&jQuery(l).val()}_=jQuery(l).attr("data-title");jQuery(l).is("[data-originaltitle]")&&jQuery(l).is('[data-showprice="1"]')&&(_=jQuery(l).attr("data-originaltitle")),jQuery(l).is("[data-originallabel]")&&(_=jQuery(l).attr("data-originallabel")),jQuery(l).is("select")&&(_+=" : "+jQuery(l).val());c=!1;jQuery(l).is('[data-singleprice="true"]')&&(c=!0),-1==jQuery.inArray(jQuery(l).attr("data-itemid"),o)&&(o.push(jQuery(l).attr("data-itemid")),n={label:_,itemid:jQuery(l).attr("data-itemid"),type:p.attr("data-itemtype"),price:parseFloat(jQuery(l).data("resprice")),quantity:parseFloat(jQuery(l).slider("value")),step:$panel.attr("data-title"),stepid:s,showInSummary:d,isSinglePrice:c})}if(0<p.find("select[data-itemid]").length){l=p.find("select[data-itemid]").get(0),m=parseFloat(jQuery(l).data("price"));if(!$panel.is('[data-showstepsum="0"]')&&jQuery(l).is('[data-showinsummary="true"]')||(d=!1),jQuery(l).data("price")&&0<jQuery(l).data("price")){"+"==jQuery(l).data("operation")?"left"==e.currencyPosition?m=e.currency+m:m+=e.currency:"-"==jQuery(l).data("operation")?"left"==e.currencyPosition?m="-"+e.currency+m:m+="-"+e.currency:m="/"==jQuery(l).data("operation")?"-"+m+"%":"+"+m+"%";jQuery(l).attr("data-originaltitle");jQuery(l).is("select")&&jQuery(l).val()}else{jQuery(l).attr("data-originaltitle");jQuery(l).is("select")&&jQuery(l).val()}_=jQuery(l).attr("data-title");jQuery(l).is("[data-originallabel]")&&(_=jQuery(l).attr("data-originallabel"));c=!1;jQuery(l).is('[data-singleprice="true"]')&&(c=!0),-1==jQuery.inArray(jQuery(l).attr("data-itemid"),o)&&(o.push(jQuery(l).attr("data-itemid")),n={label:_,itemid:jQuery(l).attr("data-itemid"),type:p.attr("data-itemtype"),price:parseFloat(jQuery(l).data("resprice")),value:jQuery(l).val(),quantity:1,step:$panel.attr("data-title"),stepid:s,showInSummary:d,isSinglePrice:c})}if(0<p.find("input[type=file]").length){l=p.find("input[type=file]").get(0);!$panel.is('[data-showstepsum="0"]')&&jQuery(l).is('[data-showinsummary="true"]')||(d=!1),!$panel.is('[data-showstepsum="0"]')&&jQuery(l).is('[data-showinsummary="true"]')||(d=!1);_=jQuery(l).data("title");jQuery(l).is("[data-originallabel]")&&(_=jQuery(l).attr("data-originallabel")),-1==jQuery.inArray(jQuery(l).attr("data-itemid"),o)&&(o.push(jQuery(l).attr("data-itemid")),n={label:_,itemid:jQuery(l).attr("data-itemid"),type:p.attr("data-itemtype"),value:jQuery(l).val(),step:$panel.attr("data-title"),stepid:s,showInSummary:d,isFile:!0})}if(0<p.find(".lfb_dropzone").length){l=p.find(".lfb_dropzone").get(0);!$panel.is('[data-showstepsum="0"]')&&jQuery(l).is('[data-showinsummary="true"]')||(d=!1);var y="",b=new Array;jQuery(l).find(".dz-preview[data-file]:not(.dz-error)").each(function(){b.push(jQuery(this).attr("data-file").replace(/ /g,"_")),y+=' - <span class="lfb_file">'+jQuery(this).attr("data-file").replace(/ /g,"_")+"</span><br/>",jQuery(this).attr("data-file").replace(/ /g,"_")});_=jQuery(l).data("title");jQuery(l).is("[data-originallabel]")&&(_=jQuery(l).attr("data-originallabel")),-1==jQuery.inArray(jQuery(l).attr("data-itemid"),o)&&(o.push(jQuery(l).attr("data-itemid")),n={label:_,itemid:jQuery(l).attr("data-itemid"),type:p.attr("data-itemtype"),value:y,step:$panel.attr("data-title"),stepid:s,showInSummary:d,isFile:!0,files:b})}if(0<p.find("input[type=text]:not(.lfb_colorpicker)").length){l=p.find("input[type=text]:not(.lfb_colorpicker)").get(0);!$panel.is('[data-showstepsum="0"]')&&jQuery(l).is('[data-showinsummary="true"]')||(d=!1);_=jQuery(l).data("title");jQuery(l).is("[data-originallabel]")&&(_=jQuery(l).attr("data-originallabel")),-1==jQuery.inArray(jQuery(l).attr("data-itemid"),o)&&(o.push(jQuery(l).attr("data-itemid")),n={label:_,itemid:jQuery(l).attr("data-itemid"),type:p.attr("data-itemtype"),value:jQuery(l).val(),step:$panel.attr("data-title"),stepid:s,showInSummary:d})}if(0<p.find("input[type=number]:not(.lfb_colorpicker)").length){l=p.find("input[type=number]:not(.lfb_colorpicker)").get(0);!$panel.is('[data-showstepsum="0"]')&&jQuery(l).is('[data-showinsummary="true"]')||(d=!1),u=parseFloat(jQuery(l).val());var h=jQuery(l).val(),j=void 0;f=void 0;jQuery(l).is('[data-valueasqt="1"]')&&(h=void 0,j=jQuery(l).val(),f=parseFloat(jQuery(l).data("resprice")),isNaN(f)&&(f=parseFloat(jQuery(l).data("price"))));c=!1;jQuery(l).is('[data-singleprice="true"]')&&(c=!0);_=jQuery(l).data("title");jQuery(l).is("[data-originallabel]")&&(_=jQuery(l).attr("data-originallabel")),-1==jQuery.inArray(jQuery(l).attr("data-itemid"),o)&&(o.push(jQuery(l).attr("data-itemid")),n={label:_,itemid:jQuery(l).attr("data-itemid"),type:p.attr("data-itemtype"),value:h,quantity:j,price:f,step:$panel.attr("data-title"),stepid:s,showInSummary:d,isSinglePrice:c})}if(0<p.find(".lfb_colorPreview").length){l=p.find(".lfb_colorPreview").get(0);!$panel.is('[data-showstepsum="0"]')&&jQuery(l).is('[data-showinsummary="true"]')||(d=!1);_=jQuery(l).data("title");jQuery(l).is("[data-originallabel]")&&(_=jQuery(l).attr("data-originallabel")),-1==jQuery.inArray(jQuery(l).attr("data-itemid"),o)&&(o.push(jQuery(l).attr("data-itemid")),n={label:_,itemid:jQuery(l).attr("data-itemid"),type:p.attr("data-itemtype"),value:jQuery(l).next(".lfb_colorpicker").val(),step:$panel.attr("data-title"),stepid:s,showInSummary:d})}if(0<p.find("textarea").length){l=p.find("textarea").get(0);!$panel.is('[data-showstepsum="0"]')&&jQuery(l).is('[data-showinsummary="true"]')||(d=!1);_=jQuery(l).data("title");jQuery(l).is("[data-originallabel]")&&(_=jQuery(l).attr("data-originallabel")),-1==jQuery.inArray(jQuery(l).attr("data-itemid"),o)&&(o.push(jQuery(l).attr("data-itemid")),n={label:_,itemid:jQuery(l).attr("data-itemid"),type:p.attr("data-itemtype"),value:wpe_nl2br(jQuery(l).val()),step:$panel.attr("data-title"),stepid:s,showInSummary:d})}a?e.itemsData[r]=n:e.itemsData.push(n)}}function lfb_getItemData(e,t){for(var a=!1,r=0;r<e.itemsData.length;r++)if(e.itemsData[r].itemid==t){a=e.itemsData[r];break}return a}function wpe_getFormContent(e,t,a){var r=wpe_getForm(e),i="",o="",p="",s=new Array;o+="Ref : "+r.current_ref+" \n";var n=lfb_lastSteps.slice();t&&"final"!=r.step&&n.push(r.step),"final"==r.step&&n.push("final"),void 0!==a&&0<a&&(n=new Array).push(a);new Array;for(var d=0;d<n.length;d++){var l=n[d];if($panel=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] #mainPanel .genSlide[data-stepid="'+l+'"]'),("final"==$panel.attr("data-stepid")||0<=jQuery.inArray(parseInt($panel.attr("data-stepid")),lfb_plannedSteps))&&!jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] #mainPanel .genSlide[data-title][data-stepid="'+l+'"]').is(".lfb_disabled")){var u=$panel.attr("data-stepid");"final"!=u&&(u=parseInt(u)),i+="<br/><p><u><b>"+$panel.data("title")+" :</b></u></p><br/>",o+="\n\n---------"+$panel.data("title")+" :---------\n";var m=new Array;$panel.find(".itemBloc:not(.lfb_disabled)").each(function(){var e=lfb_getItemData(r,jQuery(this).find("[data-itemid]").attr("data-itemid"));s.push(e),m.push(e)});for(var f=0;f<m.length;f++)void 0!==m[f].label&&(void 0!==m[f].price?void 0!==m[f].value?(i+="    - "+m[f].label+" : "+m[f].value+" ("+m[f].price+")<br/>",o+=" - "+m[f].label+" : "+m[f].value+" ("+m[f].price+")\n"):(i+="    - "+m[f].label+" : "+m[f].price+"<br/>",o+=" - "+m[f].label+" : "+m[f].price+"\n"):void 0!==m[f].value?(i+="    - "+m[f].label+" : "+m[f].value+"<br/>",o+=" - "+m[f].label+" : "+m[f].value+"\n"):(i+="    - "+m[f].label+"<br/>",o+=" - "+m[f].label+"\n"))}}(!r.price||r.price<0)&&(r.price=0);if(/^\d+(\.\d{2})?$/.test(r.price)||(r.price=parseFloat(r.price).toFixed(2)),""!=r.discountCode)if(0<r.reductionResult){var c=parseFloat(r.reductionResult).toFixed(2)+r.currency;"left"==r.currencyPosition&&(c=r.currency+parseFloat(r.reductionResult).toFixed(2)),i+="<br/> Coupon : "+r.discountCode+" ("+c+")"}else i+="<br/> Coupon : "+r.discountCode;return"left"==r.currencyPosition?(p+=r.currency+wpe_formatPrice(parseFloat(r.price).toFixed(2),e),o+="\n\nTotal : "+r.currency+wpe_formatPrice(parseFloat(r.price).toFixed(2),e)):(p+=wpe_formatPrice(parseFloat(r.price).toFixed(2),e)+r.currency,o+="\n\nTotal : "+wpe_formatPrice(parseFloat(r.price).toFixed(2),e)+r.currency),new Array(i,p,s,o)}function wpe_check_gform_response(e){var t=wpe_getForm(e);if(0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t.formID+'"] #gforms_confirmation_message').length)if(clearInterval(t.timer_gFormSubmit),0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t.formID+'"] #wtmt_paypalForm').length&&0<t.price){var a=t.price;if("percent"==t.payMode?a=parseFloat(a)*(parseFloat(t.percentToPay)/100):"fixed"==t.payMode&&(a=parseFloat(t.fixedToPay)),a=parseFloat(a).toFixed(2),0<t.priceSingle){var r=t.priceSingle;"percent"==t.payMode?r=parseFloat(r)*(parseFloat(t.percentToPay)/100):"fixed"==t.payMode&&(r=parseFloat(t.fixedToPay)),0==jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t.formID+'"] #wtmt_paypalForm [name=a1]').length&&(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t.formID+'"] #wtmt_paypalForm').append('<input type="hidden" name="a1" value="0">'),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t.formID+'"] #wtmt_paypalForm').append('<input type="hidden" name="p1" value="1">'),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t.formID+'"] #wtmt_paypalForm').append('<input type="hidden" name="t1" value="M">')),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t.formID+'"] #wtmt_paypalForm [name=a1]').val(r),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t.formID+'"] #wtmt_paypalForm [name=p1]').val(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t.formID+'"] #wtmt_paypalForm [name=p3]').val())}else jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t.formID+'"] #wtmt_paypalForm [name=a1]').remove(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t.formID+'"] #wtmt_paypalForm [name=t1]').remove(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t.formID+'"] #wtmt_paypalForm [name=p1]').remove();jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t.formID+'"] #wtmt_paypalForm [name=amount]').val(a),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t.formID+'"] #wtmt_paypalForm [name=a3]').val(a),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t.formID+'"] #wtmt_paypalForm [name=item_number]').val(t.current_ref),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t.formID+'"] #wtmt_paypalForm [name=item_name]').val(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t.formID+'"] #wtmt_paypalForm [name=item_name]').val()+" - "+t.current_ref),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t.formID+'"] #wtmt_paypalForm [type="submit"]').trigger("click")}else jQuery("#finalText").html(jQuery("#gform_wrapper_"+t.gravityFormID+" .gforms_confirmation_message").html()),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t.formID+'"] #finalSlide #gforms_confirmation_message').fadeIn(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t.formID+'"] #finalSlide #lfb_summary').fadeOut(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t.formID+'"] #finalSlide #lfb_couponContainer').fadeOut(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t.formID+'"] #finalSlide #lfb_legalNoticeContent').fadeOut(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t.formID+'"] #finalSlide .linkPrevious').fadeOut(),wpe_finalStep(e)}function wpe_quantity_less(e,t){var a=jQuery(e).parent().parent().find(".icon_quantity"),r=parseFloat(jQuery(e).parent().data("min")),i=parseInt(a.html());1<i&&r<i&&(i--,a.html(i),wpe_updatePrice(t))}function wpe_quantity_more(e,t){var a=jQuery(e).parent().parent().find(".icon_quantity"),r=parseFloat(jQuery(e).parent().data("max")),i=parseFloat(a.html());(i<r||0==r)&&(i++,a.html(i),wpe_updatePrice(t))}function wpe_checkEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function wpe_isIframe(){try{return window.self!==window.top}catch(e){return!0}}function wpe_cloneSummary(e,t){var a=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] #lfb_summary').clone();"table-row"!=a.find("#lfb_summaryDiscountTr").css("display")&&a.find("#lfb_summaryDiscountTr").remove(),jQuery("body").is(".rtl")&&(a.css({textAlign:"right",direction:"rtl"}),a.find("table").css({textAlign:"right",direction:"rtl"})),a.addClass("lfb-hidden"),a.uniqueId();var r=4;return"1"==form.summary_showAllPricesEmail&&a.find(".lfb_hidePrice").removeClass("lfb_hidePrice").removeClass("lfb-hidden"),a.find("thead th").each(function(){jQuery(this).is(".lfb-hidden")&&r--}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] #lfb_summary').after(a),a.children("h4").remove(),a.find("*:not(.lfb_value)").each(function(){jQuery(this).css({fontSize:jQuery(this).css("font-size"),padding:jQuery(this).css("padding"),textAlign:jQuery(this).css("text-align"),lineHeight:jQuery(this).css("line-height")})}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] #lfb_summary table thead > tr > th:eq(1)').is(".lfb-hidden")&&(a.find("table thead > tr > th:eq(1)").remove(),a.find("table tbody td.lfb_valueTd").remove()),a.find("th.sfb_summaryStep").attr("align","center"),a.find("table").attr("width","90%"),a.find("table").css("width","90%"),a.find("table").attr("border","1"),a.find("table").attr("bordercolor",lfb_rgb2hex(a.find("table").css("border-color"))),a.find("table").attr("style","width:90%;margin:0 auto;"),a.find("thead td, thead th").each(function(){jQuery(this).attr("bgcolor",lfb_rgb2hex(a.find("thead").css("background-color"))),jQuery(this).css("background",lfb_rgb2hex(a.find("thead").css("background-color")))}),a.find("th").each(function(){jQuery(this).attr("bgcolor",lfb_rgb2hex(jQuery(this).css("background-color")))}),a.find("td,th").each(function(){jQuery(this).attr("color",lfb_rgb2hex(jQuery(this).css("color"))),jQuery(this).html('<span style="color: '+lfb_rgb2hex(jQuery(this).css("color"))+"; font-size: "+jQuery(this).css("font-size")+'">'+jQuery(this).html()+"</span>")}),a.find("table .lfb-hidden").remove(),a.find("table").attr("cellspacing","0"),a.find("table").attr("cellpadding","8"),a.find("table").attr("bgcolor","#FFFFFF"),a.find("td,th").each(function(){jQuery(this).attr("align",jQuery(this).css("text-align")),jQuery(this).css("padding",jQuery(this).css("padding"))}),"1"==form.summary_showAllPricesEmail&&(a.find(".sfb_summaryStep").attr("colspan",r),a.find("#lfb_summaryDiscountTr>th:eq(0),#sfb_summaryTotalTr>th:eq(0)").attr("colspan",r-1)),3==r?(a.find("td:not(:first-child)").each(function(){jQuery(this).attr("width","164")}),a.find("th:not(:first-child)").each(function(){jQuery(this).attr("width","164")}),a.find("tr>td:first-child").each(function(){jQuery(this).attr("width","340")}),a.find("tr>th:first-child").each(function(){jQuery(this).attr("width","340")})):(a.find("td:not(:first-child)").each(function(){jQuery(this).attr("width","103")}),a.find("th:not(:first-child)").each(function(){jQuery(this).attr("width","103")}),a.find("tr>td:first-child").each(function(){jQuery(this).attr("width","332")}),a.find("tr>th:first-child").each(function(){jQuery(this).attr("width","332")})),a.find("*:not(.lfb_value)").each(function(){var e=lfb_rgb2hex(jQuery(this).css("color"));jQuery(this).css({color:""}),jQuery(this).attr("style",jQuery(this).attr("style")+";color:"+e),0<jQuery(this).attr("style").length?jQuery(this).attr("style",jQuery(this).attr("style")+";color:"+e):jQuery(this).attr("style","color:"+e)}),a.find("[data-tldinit]").removeAttr("data-tldinit"),a.find(".lfb_file").each(function(){jQuery(this).removeAttr("style"),jQuery(this).removeAttr("data-tldinit")}),a.html('<div id="lfb_summaryCt" style="padding-top: 24px;padding-bottom: 24px; text-align: center;">'+a.html()+"</div>"),a}function wpe_getContactInformations(e,t){if(t)var a={email:"",phone:"",firstName:"",lastName:"",address:"",city:"",state:"",zip:"",country:"",job:"",phoneJob:"",url:"",company:""};else(a=new Array).email="",a.phone="",a.firstName="",a.lastName="",a.address="",a.city="",a.state="",a.zip="",a.country="",a.job="",a.phoneJob="",a.url="",a.company="";jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] [data-fieldtype="email"]').each(function(){0<jQuery(this).val().length&&wpe_checkEmail(jQuery(this).val())&&(a.email=jQuery(this).val())});jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] [data-fieldtype="phone"]').each(function(){3<jQuery(this).val().length&&(a.phone=jQuery(this).val())});jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] [data-fieldtype="firstName"]').each(function(){0<jQuery(this).val().length&&(a.firstName=jQuery(this).val())});jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] [data-fieldtype="lastName"]').each(function(){0<jQuery(this).val().length&&(a.lastName=jQuery(this).val())});jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] [data-fieldtype="address"]').each(function(){0<jQuery(this).val().length&&(a.address=jQuery(this).val())});jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] [data-fieldtype="city"]').each(function(){0<jQuery(this).val().length&&(a.city=jQuery(this).val())});return jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] [data-fieldtype="state"]').each(function(){0<jQuery(this).val().length&&(a.state=jQuery(this).val())}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] [data-fieldtype="zip"]').each(function(){0<jQuery(this).val().length&&(a.zip=jQuery(this).val())}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] [data-fieldtype="country"]').each(function(){0<jQuery(this).val().length&&(a.country=jQuery(this).val())}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] [data-fieldtype="job"]').each(function(){0<jQuery(this).val().length&&(a.job=jQuery(this).val())}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] [data-fieldtype="phoneJob"]').each(function(){0<jQuery(this).val().length&&(a.phoneJob=jQuery(this).val())}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] [data-fieldtype="url"]').each(function(){0<jQuery(this).val().length&&(a.url=jQuery(this).val())}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] [data-fieldtype="company"]').each(function(){0<jQuery(this).val().length&&(a.company=jQuery(this).val())}),a}function lfb_getUrlVariables(r,e){var i=wpe_getForm(r),o="";if(jQuery.each(e,function(){if(0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r+'"] [data-itemid="'+this.itemid+'"]').length){var e=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r+'"] [data-itemid="'+this.itemid+'"]');if(e.is('[data-urlvariable="1"]')){var t="1";void 0!==this.price?t=this.price:void 0!==this.value&&(t=this.value.replace(/\+/g,"%2b")),void 0!==this.quantity&&0<this.quantity&&(void 0===this.price||0==this.price)&&void 0===this.value&&(t=this.quantity),void 0!==this.price&&void 0!==this.value&&0==this.price&&0<this.value.length&&(t=this.value.replace(/\+/g,"%2b")),e.is("select")&&0==this.price&&(t=this.value.replace(/\+/g,"%2b")),e.is(".lfb_dropzone")&&(t=(t=(t=t.replace(/<span class="lfb_file">/g,"")).replace(/<\/span>/g,"")).substr(3,t.length),1==i.emailCustomerLinks&&(t="",e.find(".dz-success.dz-complete").each(function(){t+=jQuery(this).attr("data-url")+","}),0<t.length&&(t=t.substr(0,t.length-1))));var a=e.attr("data-variablename");a=0<a.length&&0<a.replace(/ /g,"").length?lfb_formatForUrl(a):lfb_formatForUrl(this.label),"string"==typeof t&&(t=t.replace(/<br\s*[\/]?>/gi,"\n"),t=escape(t)),o+="&"+a+"="+t}}}),0<o.length){if(o="?"+o.substr(1,o.length),void 0!==i.orderRef){var t=i.refVarName;o+="&"+t+"="+i.orderRef}""!=i.discountCode&&(o+="&coupon="+i.discountCode)}else if(void 0!==i.orderRef){t=i.refVarName;o+="?"+t+"="+i.orderRef,""!=i.discountCode&&(o+="&coupon="+i.discountCode)}else""!=i.discountCode&&(o+="?coupon="+i.discountCode);return o}function lfb_formatForUrl(e){return e=(e=e.replace(/ /g,"_")).replace(/[^\w\s]/gi,"")}function wpe_orderSend(s,e,t,a){var n=wpe_getForm(s),d=wpe_getFormContent(s),r=d[0];r=r.replace(/<br\/>/g,"[n]");var i=d[1],o=d[2];n.urlVariables="",1==n.sendUrlVariables&&(n.urlVariables=lfb_getUrlVariables(s,d[2],!0)),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+s+'"]').is("[data-subs]")&&(i+=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+s+'"]').attr("data-subs"));var p=0,l=!0;jQuery('#estimation_popup.wpe_bootstraped[data-form="'+s+'"] [data-activatePaypal="true"]:not(:checked):not(.checked)').each(function(){var e=jQuery(this).closest(".genSlide").attr("data-stepid");"final"!=e&&(e=parseInt(e)),-1==jQuery.inArray(e,lfb_lastSteps)||(l=!1)}),0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+s+'"]').find('[data-dontactivatepaypal="true"].checked,[data-dontactivatepaypal="true"]:checked').length&&(l=!1),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+s+'"] #wtmt_paypalForm').is('[data-useipn="1"]')&&(p=1);var u=wpe_cloneSummary(!1,s),m=u.html();u.remove();var f=wpe_getContactInformations(s);t=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+s+'"] .emailField').val(),wpe_checkEmail(f.email)&&(t=f.email);var c=parseFloat(n.price),_=0,y="",b=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+n.formID+'"]').attr("data-formtitle");jQuery('#estimation_popup.wpe_bootstraped[data-form="'+n.formID+'"]').is('[data-isSubs="true"]')&&(c=parseFloat(n.priceSingle),_=parseFloat(n.price),y=n.subscriptionText);var h=new Array;jQuery('#estimation_popup.wpe_bootstraped[data-form="'+n.formID+'"] #finalSlide input[type=text],#estimation_popup.wpe_bootstraped[data-form="'+n.formID+'"] #finalSlide input[type=email], #estimation_popup.wpe_bootstraped[data-form="'+n.formID+'"] #finalSlide textarea').each(function(){0==jQuery(this).closest("#wtmt_paypalForm").length&&h.push({fieldID:jQuery(this).prop("id").substr(6,9),value:wpe_nl2br(jQuery(this).val())})});l=!0;jQuery('#estimation_popup.wpe_bootstraped[data-form="'+s+'"] [data-activatePaypal="true"]:not(:checked):not(.checked)').each(function(){var e=jQuery(this).closest(".genSlide").attr("data-stepid");"final"!=e&&(e=parseInt(e)),-1==jQuery.inArray(e,lfb_lastSteps)||(l=!1)}),0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+s+'"]').find('[data-dontactivatepaypal="true"].checked,[data-dontactivatepaypal="true"]:checked').length&&(l=!1);if("undefined"!=typeof ga)try{ga("set","page",location.pathname+"#Form+sent"),ga("send","pageview")}catch(e){}n.emailSent=!0,null!==localStorage.getItem("lfb_savedFormID")&&parseInt(localStorage.getItem("lfb_savedFormID"))==s&&null!==localStorage.getItem("lfb_savedForm")&&(localStorage.removeItem("lfb_savedFormID"),localStorage.removeItem("lfb_formsession"),localStorage.removeItem("lfb_savedForm"),localStorage.removeItem("lfb_savedFormPastSteps"),localStorage.removeItem("lfb_savedFormStep")),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+s+'"] .lfb_btnSaveForm').fadeOut();var j=new Array;jQuery('#estimation_popup.wpe_bootstraped[data-form="'+s+'"] .lfb_datepicker[data-calendarid!="0"][data-registerevent="1"]').each(function(){if(""!=jQuery(this).val()){var e={};if(e.calendarID=parseInt(jQuery(this).attr("data-calendarid")),e.duration=parseInt(jQuery(this).attr("data-eventduration")),e.durationType=jQuery(this).attr("data-eventdurationtype"),"mins"==e.durationType&&(e.durationType="minutes"),e.isBusy=parseInt(jQuery(this).attr("data-eventbusy")),e.categoryID=parseInt(jQuery(this).attr("data-eventcategory")),e.startDate=moment(jQuery(this).datetimepicker("getDate")).format("YYYY-MM-DD HH:mm"),e.endDate=moment(jQuery(this).datetimepicker("getDate")).add(e.duration,e.durationType).format("YYYY-MM-DD HH:mm"),e.title=jQuery(this).attr("data-eventtitle"),"date"==jQuery(this).attr("data-datetype")?(e.startDate=moment(jQuery(this).datetimepicker("getDate")).format("YYYY-MM-DD"),e.endDate=moment(jQuery(this).datetimepicker("getDate")).add(e.duration,e.durationType).format("YYYY-MM-DD"),e.startDate==e.endDate&&(e.fullDay=1)):e.fullDay=0,"1"==jQuery(this).attr("data-useasdaterange")){var t=jQuery(this).attr("data-enddaterangeid");0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+s+'"] [data-itemid="'+t+'"]').length&&(e.fullDay=0,"date"==jQuery(this).attr("data-datetype")?e.endDate=moment(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+s+'"] [data-itemid="'+t+'"]').datetimepicker("getDate")).format("YYYY-MM-DD"):e.endDate=moment(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+s+'"] [data-itemid="'+t+'"]').datetimepicker("getDate")).format("YYYY-MM-DD HH:mm"))}j.push(e)}}),void 0!==n.verifiedEmail&&n.verifiedEmail?t=n.verifiedEmail:n.verifiedEmail="";var Q="";1==n.useSignature&&(Q=n.signature.signature("toDataURL","image/png")),jQuery.ajax({url:n.ajaxurl,type:"post",data:{action:"send_email",formID:n.formID,informations:e,email:t,customerInfos:wpe_getContactInformations(n.formID,!0),summary:m,stripeCustomerID:n.stripeCustomerID,stripeToken:n.stripeToken,stripeSrc:n.stripeSrc,totalTxt:i,email_toUser:n.email_toUser,usePaypalIpn:p,discountCode:n.discountCode,formSession:jQuery('#estimation_popup.wpe_bootstraped[data-form="'+n.formID+'"] #lfb_formSession').val(),total:c,totalSub:_,subFrequency:y,formTitle:b,contactSent:n.contactSent,contentTxt:r,items:o,fieldsLast:h,activatePaypal:l,captcha:n.captcha,useRtl:jQuery("body").is(".rtl"),finalUrl:lfb_getRedirectionURL(n.formID),eventsData:JSON.stringify(j),razorpayReady:n.razorpayReady,variables:JSON.stringify(n.variables),verifiedEmail:n.verifiedEmail,signature:Q},success:function(e){var t=!1;if(n.orderRef=e,1==n.sendUrlVariables&&(n.urlVariables=lfb_getUrlVariables(s,d[2])),"1"==n.enableZapier&&0<n.zapierWebHook.length){var a=lfb_getUrlVariables(s,d[2]);1<a.length&&(t=!0,a=a.substr(1,a.length),jQuery.ajax({url:n.zapierWebHook,type:"get",data:a,success:function(){wpe_finalStep(s)}}))}if(u.remove(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+s+'"] #lfb_loader').delay(1e3).fadeOut(),l&&void 0===n.stripePaid&&0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+n.formID+'"] #wtmt_paypalForm').length&&(0<n.price||0<n.priceSingle)){var r=n.price;if("percent"==n.payMode?r=parseFloat(r)*(parseFloat(n.percentToPay)/100):"fixed"==n.payMode&&(r=parseFloat(n.fixedToPay)),r=parseFloat(r).toFixed(2),0<n.priceSingle){var i=n.priceSingle;"percent"==n.payMode?i=parseFloat(i)*(parseFloat(n.percentToPay)/100):"fixed"==n.payMode&&(i=parseFloat(n.fixedToPay)),i=parseFloat(i).toFixed(2),0==jQuery('#estimation_popup.wpe_bootstraped[data-form="'+n.formID+'"] #wtmt_paypalForm [name=a1]').length&&(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+n.formID+'"] #wtmt_paypalForm').append('<input type="hidden" name="a1" value="0"/>'),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+n.formID+'"] #wtmt_paypalForm').append('<input type="hidden" name="p1" value="1"/>'),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+n.formID+'"] #wtmt_paypalForm').append('<input type="hidden" name="t1" value="M"/>')),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+n.formID+'"] #wtmt_paypalForm [name=a1]').val(i),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+n.formID+'"] #wtmt_paypalForm [name=p1]').val(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+n.formID+'"] #wtmt_paypalForm [name=p3]').val()),r<=0&&(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+n.formID+'"] #wtmt_paypalForm [name=cmd]').val("_xclick"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+n.formID+'"] #wtmt_paypalForm [name=a3]').remove(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+n.formID+'"] #wtmt_paypalForm [name=t3]').remove(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+n.formID+'"] #wtmt_paypalForm [name=p3]').remove(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+n.formID+'"] #wtmt_paypalForm [name=bn]').remove(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+n.formID+'"] #wtmt_paypalForm [name=no_note]').remove(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+n.formID+'"] #wtmt_paypalForm [name=src]').remove(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+n.formID+'"] #wtmt_paypalForm [name=a1]').remove(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+n.formID+'"] #wtmt_paypalForm [name=t1]').remove(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+n.formID+'"] #wtmt_paypalForm [name=p1]').remove(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+n.formID+'"] #wtmt_paypalForm').append('<input type="hidden" name="amount" value="'+i+'"/>'))}else jQuery('#estimation_popup.wpe_bootstraped[data-form="'+n.formID+'"] #wtmt_paypalForm [name=a1]').remove(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+n.formID+'"] #wtmt_paypalForm [name=t1]').remove(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+n.formID+'"] #wtmt_paypalForm [name=p1]').remove(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+n.formID+'"] #wtmt_paypalForm [name=amount]').val(r);jQuery('#estimation_popup.wpe_bootstraped[data-form="'+n.formID+'"] #wtmt_paypalForm [name=return]').val(lfb_getRedirectionURL(s)),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+n.formID+'"] #wtmt_paypalForm [name=a3]').val(r),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+n.formID+'"] #wtmt_paypalForm [name=custom]').val(e),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+n.formID+'"] #wtmt_paypalForm [name=item_number]').val(e),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+n.formID+'"] #wtmt_paypalForm [name=item_name]').val(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+n.formID+'"] #wtmt_paypalForm [name=item_name]').val()+" - "+e),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+n.formID+'"] #wtmt_paypalForm [type="submit"]').trigger("click")}if(l&&0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+n.formID+'"] #wtmt_paypalForm').length&&(0<n.price||0<n.priceSingle)&&void 0===n.stripePaid||0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+n.formID+'"] #lfb_stripeForm').length&&0<n.price||n.save_to_cart||n.save_to_cart_edd||t||wpe_finalStep(s),n.save_to_cart_edd){var o=new Array,p=lfb_lastSteps.slice();"final"!=n.step&&-1==jQuery.inArray(parseInt(n.step),p)?p.push(parseInt(n.step)):"final"==n.step&&-1==jQuery.inArray("final",p)&&p.push("final"),jQuery.each(p,function(){$panel=jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+s+'"] #mainPanel .genSlide[data-stepid="'+this+'"]'),$panel.find('div.selectable.checked:not(.lfb_disabled),a.lfb_button.checked:not(.lfb_disabled),input[type=checkbox]:checked:not(.lfb_disabled),[data-type="slider"]:not(.lfb_disabled)').each(function(){var e=1;0<parseInt(jQuery(this).data("resqt"))&&(e=parseInt(jQuery(this).data("resqt"))),jQuery(this).is('[data-type="slider"]')&&(e=parseInt(jQuery(this).slider("value")),isNaN(parseInt(jQuery(this).find(".tooltip-inner").html()))||(e=parseInt(jQuery(this).find(".tooltip-inner").html()))),0<parseInt(jQuery(this).data("prodid"))&&o.push({quantity:e,product_id:parseInt(jQuery(this).data("prodid")),variation:parseInt(jQuery(this).data("eddvar"))})})}),jQuery.ajax({url:n.ajaxurl,type:"post",data:{action:"lfb_cartdd_save",products:o},success:function(){wpe_finalStep(s)}})}if(n.save_to_cart){o=new Array,p=lfb_lastSteps.slice();"final"!=n.step&&-1==jQuery.inArray(parseInt(n.step),p)?p.push(parseInt(n.step)):"final"==n.step&&-1==jQuery.inArray("final",p)&&p.push("final"),jQuery.each(p,function(){$panel=jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+s+'"] #mainPanel .genSlide[data-stepid="'+this+'"]'),$panel.find('div.selectable.checked:not(.lfb_disabled),a.lfb_button.checked:not(.lfb_disabled),input[type=checkbox]:checked:not(.lfb_disabled),[data-type="slider"]:not(.lfb_disabled),select[data-itemid]:not(.lfb_disabled)').each(function(){var e=1;0<parseInt(jQuery(this).data("resqt"))&&(e=parseInt(jQuery(this).data("resqt"))),jQuery(this).is('[data-type="slider"]')&&(e=parseInt(jQuery(this).slider("value"))),0<parseInt(jQuery(this).data("prodid"))&&o.push({quantity:e,title:jQuery(this).attr("data-originaltitle"),product_id:parseInt(jQuery(this).data("prodid")),variation:parseInt(jQuery(this).attr("data-woovar")),price:parseFloat(jQuery(this).data("resprice")/e)})})}),jQuery.ajax({url:n.ajaxurl,type:"post",data:{action:"lfb_cart_save",formID:s,ref:e,emptyWooCart:n.emptyWooCart,products:o},success:function(){wpe_finalStep(s)}})}}})}function lfb_checkLastStepFields(e){var t=wpe_getForm(e),a=!0;return jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t.formID+'"] #finalSlide input[type=text],#estimation_popup.wpe_bootstraped[data-form="'+t.formID+'"] #finalSlide input[type=email], #estimation_popup.wpe_bootstraped[data-form="'+t.formID+'"] #finalSlide textarea').each(function(){0==jQuery(this).closest("#wtmt_paypalForm").length&&(jQuery(this).is(".lfb_disabled")||(jQuery(this).attr("data-required")&&"true"==jQuery(this).attr("data-required")&&jQuery(this).val().length<1&&(a=!1,jQuery(this).closest(".form-group").addClass("has-error"),jQuery(this).is("#lfb_captchaField")||(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t.formID+'"]').is(".wpe_fullscreen")||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t.formID+'"]').is(".wpe_popup")?jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t.formID+'"]').animate({scrollTop:jQuery(this).parent().offset().top-(80+parseInt(t.scrollTopMargin))},2*t.animationsSpeed):"1"==t.scrollTopPage?jQuery("body,html").animate({scrollTop:0},2*t.animationsSpeed):jQuery("body,html").animate({scrollTop:jQuery(this).parent().offset().top-(80+parseInt(t.scrollTopMargin))},2*t.animationsSpeed))),jQuery(this).is(".emailField")&&!wpe_checkEmail(jQuery(this).val())&&(a=!1,jQuery(this).closest(".form-group").addClass("has-error"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t.formID+'"]').is(".wpe_fullscreen")||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t.formID+'"]').is(".wpe_popup")?jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t.formID+'"]').animate({scrollTop:jQuery(this).parent().offset().top-(80+parseInt(t.scrollTopMargin))},2*t.animationsSpeed):"1"==t.scrollTopPage?jQuery("body,html").animate({scrollTop:0},2*t.animationsSpeed):jQuery("body,html").animate({scrollTop:jQuery(this).parent().offset().top-(80+parseInt(t.scrollTopMargin))},2*t.animationsSpeed))))}),a}function wpe_order(e){var t=wpe_getForm(e),a=!0,r="",i=new Array;jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t.formID+'"] #finalSlide .form-group').removeClass("has-error"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t.formID+'"] #finalSlide').find('.lfb_item input:not([type="checkbox"])[data-itemid],.lfb_item textarea[data-itemid],.lfb_item select[data-itemid]').each(function(){if(0==jQuery(this).closest("#wtmt_paypalForm").length&&!jQuery(this).is(".lfb_disabled")&&!jQuery(this).is("#lfb_couponField")&&!jQuery(this).is("#lfb_captchaField")){var e=":";jQuery(this).closest(".lfb_item").find("label").html().lastIndexOf(":")==jQuery(this).closest(".lfb_item").find("label").html().length-1&&(e=""),jQuery("body").is(".rtl")?r+='<p><b><span class="lfb_value">'+jQuery(this).val()+"</span></b>"+e+" "+jQuery(this).closest(".lfb_item").find("label").html()+"</p>":r+="<p>"+jQuery(this).closest(".lfb_item").find("label").html()+" "+e+' <b><span class="lfb_value">'+jQuery(this).val()+"</span></b></p>"}}),a=lfb_checkStepItemsValid("final",e),1==t.legalNoticeEnable&&(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t.formID+'"] #lfb_legalCheckbox').is(":checked")||(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t.formID+'"] #lfb_legalCheckbox').closest(".form-group").addClass("has-error"),a=!1)),1==a&&lfb_checkUserEmail(t)&&lfb_checkCaptcha(t,function(){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t.formID+'"] #finalSlide').find("#wpe_btnOrder,.linkPrevious").fadeOut(250),wpe_uploadFiles(e,r,"",i)})}function wpe_previousStep(a){var r=wpe_getForm(a);navigator.userAgent.toLowerCase().match(/(iPad|iPhone|iPod)/i)&&(jQuery("#estimation_popup :not(.ui-slider-handle) > .tooltip").remove(),jQuery("body > .tooltip").remove(),jQuery('#estimation_popup[data-form="'+r.formID+'"] > .tooltip').remove()),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] .errorMsg').hide(),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+r.step+'"]').find("a.lfb_button.checked:not(.prechecked)").each(function(){wpe_itemClick(jQuery(this),!1,a)}),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+r.step+'"]').find("div.selectable.checked:not(.prechecked)").each(function(){wpe_itemClick(jQuery(this),!1,a)}),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+r.step+'"]').find('input[data-toggle="switch"]:checked:not(.prechecked)').each(function(){jQuery(this).trigger("click.auto")});var i=!1,o=0,p=0;jQuery.each(lfb_lastSteps,function(e){var t=this;parseInt(t)==parseInt(r.step)&&(i=!0),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+t+'"] .lfb_executed').removeClass("lfb_executed"),i||(0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+t+'"] .lfb_item:not(.lfb-hidden)').length||0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+t+'"] .lfb_distanceError').length)&&!jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+t+'"]').is(".lfb_disabled")&&(o=t,p=e)}),lfb_lastSteps=jQuery.grep(lfb_lastSteps,function(e,t){if(t<=p)return e}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide.lfb_activeStep').hide(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+o+'"] .genContent').css("opacity",0),wpe_changeStep(o,a)}function lfb_returnToStep(e,t){var a=wpe_getForm(t);if(e!=a.step){navigator.userAgent.toLowerCase().match(/(iPad|iPhone|iPod)/i)&&(jQuery("#estimation_popup :not(.ui-slider-handle) > .tooltip").remove(),jQuery("body > .tooltip").remove(),jQuery('#estimation_popup[data-form="'+a.formID+'"] > .tooltip').remove()),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"] .errorMsg').hide(),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+t+'"] #mainPanel .genSlide[data-stepid="'+a.step+'"]').find("a.lfb_button.checked:not(.prechecked)").each(function(){wpe_itemClick(jQuery(this),!1,t)}),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+t+'"] #mainPanel .genSlide[data-stepid="'+a.step+'"]').find("div.selectable.checked:not(.prechecked)").each(function(){wpe_itemClick(jQuery(this),!1,t)}),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+t+'"] #mainPanel .genSlide[data-stepid="'+a.step+'"]').find('input[data-toggle="switch"]:checked:not(.prechecked)').each(function(){jQuery(this).trigger("click.auto")});var r=lfb_lastSteps.indexOf(e);lfb_lastSteps=jQuery.grep(lfb_lastSteps,function(e,t){if(t<=r)return e}),wpe_changeStep(e,t),setTimeout(function(){wpe_updateSummary(t,!0)},350),setTimeout(function(){wpe_updateStep(t)},2e3)}}function wpe_uploadFiles(s,n,e,d){var t=!0,l=wpe_getForm(s);if(l.useRazorpay&&!l.razorpayReady){t=!1;var a=l.price,r=0;jQuery('#estimation_popup.wpe_bootstraped[data-form="'+l.formID+'"]').is('[data-isSubs="true"]')&&(r=l.price,(a=0)<l.priceSingle&&(a=l.priceSingle)),jQuery.ajax({url:l.ajaxurl,type:"post",data:{action:"lfb_makeRazorPayment",formID:s,singleCost:a,subCost:r,ref:l.current_ref,email:e},success:function(e){if(-1==e.trim().indexOf("error")){var t,a=e.trim(),r="",i="",o=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+s+'"] .emailField').val();0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+s+'"] [data-fieldtype="firstName"]').length&&(r=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+s+'"] [data-fieldtype="firstName"]').val()),0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+s+'"] [data-fieldtype="lastName"]').length&&(i=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+s+'"] [data-fieldtype="lastName"]').val()),t=r+" "+i;var p={key:l.razorpay_publishKey,name:l.title,description:"",image:l.razorpay_logoImg,handler:function(e){l.razorpayReady=!0,wpe_uploadFiles(s,n,o,d)},prefill:{name:t,email:o},theme:{color:l.colorA}};0==a.indexOf("sub_")?p.subscription_id=a:p.order_id=a,new Razorpay(p).open()}else alert(e)}})}else jQuery('#estimation_popup.wpe_bootstraped[data-form="'+l.formID+'"]').is('[data-emaillaststep="1"]')||(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+s+'"]').is(".wpe_fullscreen")?(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+s+'"]').css("overflow-y","hidden"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+s+'"]').animate({scrollTop:0},2*l.animationsSpeed)):"1"==l.scrollTopPage?jQuery("body,html").animate({scrollTop:0},2*l.animationsSpeed):jQuery("body,html").animate({scrollTop:jQuery('#estimation_popup.wpe_bootstraped[data-form="'+s+'"]').offset().top-(80+parseInt(l.scrollTopMargin))},2*l.animationsSpeed),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+s+'"] .lfb_btnFloatingSummary').fadeOut(l.animationsSpeed),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+s+'"] #lfb_floatingSummary').fadeOut(l.animationsSpeed),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+s+'"] #lfb_loader').fadeIn(2*l.animationsSpeed),setTimeout(function(){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+s+'"] #mainPanel').fadeOut(2*l.animationsSpeed),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+s+'"] #startInfos').fadeOut(2*l.animationsSpeed),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+s+'"] #genPrice').fadeOut(2*l.animationsSpeed),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+s+'"] #lfb_stepper').fadeOut(2*l.animationsSpeed),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+s+'"] #mainPanel .genSlide').fadeOut(2*l.animationsSpeed),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+s+'"] #mainPanel .btn-next').fadeOut(l.animationsSpeed),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+s+'"] #mainPanel .lfb_btnNextContainer').fadeOut(l.animationsSpeed),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+s+'"] #finalText').css({opacity:0,display:"block"}),setTimeout(function(){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+s+'"]').is(".wpe_fullscreen")?jQuery('#estimation_popup.wpe_bootstraped[data-form="'+s+'"]').animate({scrollTop:0},2*l.animationsSpeed):"1"==l.scrollTopPage?jQuery("body,html").animate({scrollTop:0},2*l.animationsSpeed):jQuery("body,html").animate({scrollTop:jQuery('#estimation_popup.wpe_bootstraped[data-form="'+s+'"]').offset().top-(80+parseInt(l.scrollTopMargin))},2*l.animationsSpeed),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+s+'"] #finalText').animate({opacity:1},2*l.animationsSpeed)},4*l.animationsSpeed+50)},2*l.animationsSpeed+50));t&&wpe_orderSend(s,n,e,d)}function wpe_isAnyParentFixed(e,t){if(!t)t=!1;try{0<e.parent().length&&"fixed"==e.parent().css("position")&&(t=!0)}catch(e){}return!t&&0<e.parent().length&&(t=wpe_isAnyParentFixed(e.parent(),t)),t}function wpe_is_touch_device(){return"ontouchstart"in window||0<navigator.MaxTouchPoints||0<navigator.msMaxTouchPoints}function lfb_toggleFloatingSummary(e){(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] #lfb_floatingSummary').is(".lfb_open")?lfb_closeFloatingSummary:lfb_showFloatingSummary)(e)}function lfb_closeFloatingSummary(e){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] #lfb_floatingSummary').removeClass("lfb_open"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] #lfb_floatingSummary').stop().slideUp()}function lfb_showFloatingSummary(e){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] #lfb_floatingSummary').addClass("lfb_open"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] #lfb_floatingSummary').stop().slideDown()}function wpe_updateFloatingSummary(e){if(0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] #lfb_floatingSummary').length){var t=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] #lfb_summary').clone();0==t.find("tbody").children(":not(.lfb_static)").length&&jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] #lfb_floatingSummary').is('[data-numberstep="1"]')?(lfb_closeFloatingSummary(e),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] .lfb_btnFloatingSummary:not(.disabled)').addClass("disabled")):(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] .lfb_btnFloatingSummary').removeClass("disabled"),t.find("h4").remove(),t.attr("id","lfb_floatingSummaryContent"),t.removeClass("lfb-hidden"),t.find(".lfb_valueTd,.lfb_valueTh").addClass("lfb-hidden"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] #lfb_floatingSummary').is('[data-hideprices="1"]')&&(t.find(".lfb_priceTd,.lfb_priceTh").addClass("lfb-hidden"),t.find("#lfb_summaryDiscountTr,#sfb_summaryTotalTr").addClass("lfb-hidden")),t.find(".sfb_summaryStep").attr("colspan",t.find("thead th:not(.lfb-hidden)").length),t.find("tr.lfb_noPriceRow").remove(),t.find("#lfb_summaryDiscountTr>th:eq(0),#sfb_summaryTotalTr>th:eq(0)").attr("colspan",t.find("thead th:not(.lfb-hidden)").length-1),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] #lfb_floatingSummary #lfb_floatingSummaryInner').html(t),t.find(".sfb_summaryStep").click(function(){lfb_returnToStep(parseInt(jQuery(this).attr("data-step")),e)}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] #lfb_floatingSummary').is('[data-numberstep="1"]')&&t.find(".sfb_summaryStep").each(function(e){var t=e+1;jQuery(this).find("strong").html(t+". "+jQuery(this).find("strong").html())}))}}function wpe_updateSummary(l,e){var u=wpe_getForm(l);if(0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+l+'"] #lfb_summary').length||0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+l+'"] #lfb_floatingSummary').length){var t=!0;e&&(t=!1);var a=wpe_getFormContent(l,t)[2],m=-1,f=!1;jQuery('#estimation_popup.wpe_bootstraped[data-form="'+l+'"] #lfb_summary table tbody tr:not(.lfb_static)').remove();var c="";if(1==u.summary_hidePrices&&(c="lfb-hidden lfb_hidePrice"),jQuery.each(a,function(){var e=this;if(null!=e.label&&""!=e.label&&"undefined"!=e.label&&0==jQuery('#estimation_popup.wpe_bootstraped[data-form="'+l+'"] #lfb_summary table tbody tr[data-item="'+e.itemid+'"]').length&&(isNaN(e.stepid)&&(e.stepid="final"),"final"!=e.stepid||"1"!=u.summary_hideFinalStep)){e.stepid==m||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+l+'"]').is('[data-sumhidesteps="1"]')||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+l+'"] #lfb_summary table tbody #lfb_summaryDiscountTr').before('<tr><th colspan="4" class="sfb_summaryStep" data-step="'+e.stepid+'">'+e.step+"</th>"),m=e.stepid,isNaN(e.quantity)&&(e.quantity=1);var t="";isNaN(e.price)&&(t="lfb_noPriceRow",e.price=0);var a=e.value;void 0===e.value?a="":t+=" lfb_infoRow",""!=a&&e.showInSummary&&(f=!0);var r=e.price,i=wpe_formatPrice(e.quantity,l);if(""!=a&&0==r&&1==i)r=i="";else{var o=!1;parseFloat(r)<0&&(o=!0,r*=-1),r="left"==u.currencyPosition?u.currency+""+wpe_formatPrice(parseFloat(r).toFixed(2),l):wpe_formatPrice(parseFloat(r).toFixed(2),l)+""+u.currency,o&&(r="- "+r)}e.isFile;var p="";1==u.summary_hideQt&&(p="lfb-hidden"),1==u.summary_hideZero&&0==e.price&&(r=""),1==u.summary_hideZeroQt&&0==e.quantity&&(i="");var s="";e.showInSummary||(s="lfb-hidden"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+l+'"] [data-itemid="'+e.itemid+'"]').is('[data-hideqtsum="true"]')&&(i=""),0<u.priceSingle&&!e.isSinglePrice&&(""!=r||0<r)&&(r+=" "+u.subscriptionText),u.price<=0?jQuery('#estimation_popup.wpe_bootstraped[data-form="'+l+'"] #lfb_summary .lfb_subTxt').addClass("lfb-hidden"):jQuery('#estimation_popup.wpe_bootstraped[data-form="'+l+'"] #lfb_summary .lfb_subTxt').removeClass("lfb-hidden"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+l+'"] [data-itemid="'+e.itemid+'"]').is('[data-hidepricesum="true"]')&&(r="");var n="";1==u.summary_showDescriptions&&0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+l+'"] .lfb_itemContainer_'+e.itemid+" .itemDes").length&&""!=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+l+'"] .lfb_itemContainer_'+e.itemid+" .itemDes").html()&&(n='<br/><span style="font-size:12px;">'+jQuery('#estimation_popup.wpe_bootstraped[data-form="'+l+'"] .lfb_itemContainer_'+e.itemid+" .itemDes").html()+"</span>");var d=!0;jQuery('#estimation_popup.wpe_bootstraped[data-form="'+l+'"] [data-itemid="'+e.itemid+'"]').is('[data-hidezeropricesum="true"]')&&0==e.price&&(d=!1),d&&(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+l+'"] .lfb_itemContainer_'+e.itemid).is('[data-itemtype="filefield"]')?jQuery('#estimation_popup.wpe_bootstraped[data-form="'+l+'"] #lfb_summary table tbody #lfb_summaryDiscountTr').before('<tr data-item="'+e.itemid+'" data-itemstep="'+e.stepid+'" class="'+t+" "+s+'"><td>'+e.label+n+'</td><td class="lfb_valueTd ">'+a+'</td><td class="lfb_quantityTd '+p+'">'+i+'</td><td class="lfb_priceTd '+c+'">'+r+"</td></tr>"):jQuery('#estimation_popup.wpe_bootstraped[data-form="'+l+'"] #lfb_summary table tbody #lfb_summaryDiscountTr').before('<tr data-item="'+e.itemid+'" data-itemstep="'+e.stepid+'" class="'+t+" "+s+'"><td>'+e.label+n+'</td><td class="lfb_valueTd "><span class="lfb_value">'+a+'</span></td><td class="lfb_quantityTd '+p+'">'+i+'</td><td class="lfb_priceTd '+c+'">'+r+"</td></tr>"))}}),0<u.reductionResult){var r=parseFloat(u.reductionResult).toFixed(2)+u.currency;if("left"==u.currencyPosition&&(r=u.currency+parseFloat(u.reductionResult).toFixed(2)),r="-"+r,jQuery('#estimation_popup.wpe_bootstraped[data-form="'+l+'"] #lfb_summary #lfb_summaryDiscount>span').html(r),!u.discountCodeDisplayed){var i=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+l+'"] #lfb_summary #lfb_summaryDiscountTr th[colspan]').html();0==jQuery('#estimation_popup.wpe_bootstraped[data-form="'+l+'"] #lfb_summary #lfb_summaryDiscountTr th[colspan] i').length&&(":"==i.substr(i.length-1,1)?jQuery('#estimation_popup.wpe_bootstraped[data-form="'+l+'"] #lfb_summary #lfb_summaryDiscountTr th[colspan]').html(i.substr(0,i.length-1)+" <i>("+u.discountCode+")</i> :"):jQuery('#estimation_popup.wpe_bootstraped[data-form="'+l+'"] #lfb_summary #lfb_summaryDiscountTr th[colspan]').html(i+" <i>("+u.discountCode+")</i>"))}jQuery('#estimation_popup.wpe_bootstraped[data-form="'+l+'"] #lfb_summary #lfb_summaryDiscountTr').slideDown(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+l+'"] #lfb_floatingSummary #lfb_summaryDiscountTr').slideDown()}(!u.price||u.price<0)&&(u.price=0),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+l+'"] #lfb_summary table tr th.sfb_summaryStep').each(function(){0==jQuery('#estimation_popup.wpe_bootstraped[data-form="'+l+'"] #lfb_summary table tr[data-itemstep="'+jQuery(this).attr("data-step")+'"]:not(.lfb-hidden)').length&&jQuery(this).parent().addClass("lfb-hidden")});var o=u.currency+""+wpe_formatPrice(parseFloat(u.price).toFixed(2),l);u.currency,wpe_formatPrice(parseFloat(u.priceSingle).toFixed(2),l);if("left"!=u.currencyPosition&&(o=wpe_formatPrice(parseFloat(u.price).toFixed(2),l)+""+u.currency,wpe_formatPrice(parseFloat(u.priceSingle).toFixed(2),l),u.currency),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+l+'"] #lfb_summary table #lfb_summaryTotal>span:eq(0)').html(o),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+u.formID+'"]').is("[data-totalrange]")&&0<parseFloat(u.price)){var p=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+u.formID+'"]').attr("data-rangelabelbetween"),s=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+u.formID+'"]').attr("data-rangelabeland"),n=parseFloat(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+u.formID+'"]').attr("data-totalrange")),d=parseFloat(u.price)-n/2,_=parseFloat(u.price)+n/2;if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+u.formID+'"]').is('[data-rangemode="percent"]')&&(d=parseFloat(u.price)-parseFloat(u.price)*n/100,_=parseFloat(u.price)+parseFloat(u.price)*n/100),d<0&&(d=0),_<0&&(_=0),formatedPrice=p+" <strong>"+u.currency+wpe_formatPrice(d,l)+"</strong> "+s+" <strong>"+u.currency+wpe_formatPrice(_,l)+"</strong>","left"!=u.currencyPosition){n=parseInt(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+u.formID+'"]').attr("data-totalrange"));formatedPrice=p+" <strong>"+wpe_formatPrice(d,l)+u.currency+"</strong> "+s+" <strong>"+wpe_formatPrice(_,l)+u.currency+"</strong>"}jQuery('#estimation_popup.wpe_bootstraped[data-form="'+l+'"] #lfb_summary table #lfb_summaryTotal>span:eq(0)').html(formatedPrice)}var y=4;1==u.summary_hideQt&&--y,1==u.summary_hidePrices&&--y,f?(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+l+'"] #lfb_summary table thead th:eq(1)').show().removeClass("lfb-hidden"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+l+'"] #lfb_summary table tbody tr:eq(1)').show(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+l+'"] #lfb_summary table tbody td.lfb_valueTd').show()):(--y,jQuery('#estimation_popup.wpe_bootstraped[data-form="'+l+'"] #lfb_summary table td.lfb_valueTd').hide(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+l+'"] #lfb_summary table thead th:eq(1)').hide().addClass("lfb-hidden")),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+l+'"] #lfb_summary table tbody tr#sfb_summaryTotalTr th[colspan]').attr("colspan",y-1),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+l+'"] #lfb_summary table tbody tr#lfb_summaryDiscountTr th[colspan]').attr("colspan",y-1),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+l+'"] #lfb_summary table tbody tr th.sfb_summaryStep').attr("colspan",y)}jQuery('#estimation_popup.wpe_bootstraped[data-form="'+l+'"]').is('[data-sumstepsclick="1"]')&&jQuery('#estimation_popup.wpe_bootstraped[data-form="'+l+'"] #lfb_summary .sfb_summaryStep:not([data-step="final"])').each(function(){jQuery(this).css("cursor","pointer"),jQuery(this).click(function(){lfb_returnToStep(parseInt(jQuery(this).attr("data-step")),l)})}),wpe_updateFloatingSummary(l),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+l+'"]').trigger("summaryUpdated")}function wpe_changeStep(t,a){var r=wpe_getForm(a);if(jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel').css("max-height",jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel').height()),jQuery("#estimation_popup :not(.ui-slider-handle) > .tooltip").remove(),jQuery("body > .tooltip").remove(),jQuery('#estimation_popup[data-form="'+r.formID+'"] > .tooltip').remove(),jQuery('#estimation_popup[data-form="'+r.formID+'"] .datetimepicker ').hide(),0<r.intro_enabled||0<r.step){var e=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"]  #mainPanel').offset().top-100;jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"]').is(".wpe_fullscreen")||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"]').is(".wpe_popup")?((e=0)<r.intro_enabled&&(e=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #startInfos').height()+100),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"]').animate({scrollTop:e},250)):(0<jQuery("header").length&&wpe_isAnyParentFixed(jQuery("header"))&&(e-=jQuery("header").height()),e-=48+parseInt(r.scrollTopMargin),"1"==r.scrollTopPage?jQuery("body,html").animate({scrollTop:0},2*r.animationsSpeed):jQuery("body,html").animate({scrollTop:e},250))}jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] .quantityBtns').removeClass("open"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] .quantityBtns').fadeOut(r.animationsSpeed/4),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide').fadeOut(2*r.animationsSpeed),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .btn-next').fadeOut(r.animationsSpeed/2),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .lfb_btnNextContainer').fadeOut(r.animationsSpeed/2),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .lfb_linkPreviousCt').fadeOut(r.animationsSpeed/2),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .lfb_distanceError').fadeOut(r.animationsSpeed/2);var i=!0;0==jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #lfb_btnPayStripe').length&&0==jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #wtmt_paypalForm').length&&0==jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #lfb_razorPayCt').length&&(i=!1),"final"==t?(wpe_updateSummary(a),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] [data-activatePaypal="true"]:not(:checked):not(.checked)').each(function(){var e=jQuery(this).closest(".genSlide").attr("data-stepid");"final"!=e&&(e=parseInt(e)),-1==jQuery.inArray(e,lfb_lastSteps)||(i=!1)}),0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"]').find('[data-dontactivatepaypal="true"].checked,[data-dontactivatepaypal="true"]:checked').length&&(i=!1),i?(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #lfb_paymentMethodBtns').show(),0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #lfb_paymentMethodBtns').length?(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #lfb_razorPayCt').hide(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #lfb_btnPayStripe').hide(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #lfb_btnPayStripe').closest(".lfb_btnNextContainer").hide(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #wtmt_paypalForm').hide()):(0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #lfb_btnPayStripe').length&&"none"!=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #lfb_btnPayStripe').css("display")&&(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #lfb_btnPayStripe').closest(".lfb_btnNextContainer").show(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #wpe_btnOrder').closest(".lfb_btnNextContainer").hide()),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #lfb_razorPayCt').show(),0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #wtmt_paypalForm').length&&(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #wtmt_paypalForm').show(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #wpe_btnOrder').closest(".lfb_btnNextContainer").hide(),setTimeout(function(){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #wtmt_paypalForm .lfb_btnNextContainer').fadeIn()},2*r.animationsSpeed)))):(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #lfb_paymentMethodBtns').hide(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #lfb_razorPayCt').hide(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #lfb_btnPayStripe').hide(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #wtmt_paypalForm').hide(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #lfb_btnPayStripe').closest(".lfb_btnNextContainer").hide(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #wpe_btnOrder').closest(".lfb_btnNextContainer").show()),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"]').is('[data-emaillaststep="1"]')&&!r.emailSent&&setTimeout(function(){wpe_updatePrice(a),wpe_order(a)},1e3)):wpe_updateFloatingSummary();var o=jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+t+'"]').find(".stepTitle"),p=jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+t+'"]').find("p.lfb_stepDescription"),s=jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+t+'"]').find(".genContent"),n=jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+t+'"]').find(".lfb_totalBottomContainer");if(s.find(".genContentSlide").removeClass("active"),s.find(".genContentSlide").eq(0).addClass("active"),s.animate({opacity:0},r.animationsSpeed),p.animate({opacity:0},r.animationsSpeed),o.removeClass("positioned"),o.css({"-webkit-transition":"none",transition:"none"}),n.animate({opacity:0},r.animationsSpeed),"undefined"!=typeof ga)try{ga("set","page",location.pathname+"#"+encodeURIComponent(o.html()).replace(/%20/g,"+")),ga("send","pageview")}catch(e){}jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+t+'"]').css("opacity",0).show(),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+t+'"]').hide().css("opacity",1);var d=4.5*r.animationsSpeed;if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+t+'"]').is('[data-start="1"]')?(wpe_initPanelResize(a),d=2.5*r.animationsSpeed,jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+t+'"]').fadeIn(2*r.animationsSpeed)):jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+t+'"]').delay(2*r.animationsSpeed).fadeIn(2*r.animationsSpeed),0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #finalSlide .estimation_project').length){var l=wpe_getFormContent(a)[3];jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #finalSlide .estimation_project textarea').val(l),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #finalSlide .estimation_total:not(.gfield_price) input').val(r.price),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #finalSlide .estimation_total.gfield_price .ginput_product_price').html(r.price),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #finalSlide .estimation_total.gfield_price input[id^=#ginput_base_price]').val(r.price)}setTimeout(function(){o.css({"-webkit-transition":"all 0.3s ease-out",transition:"all 0.3s ease-out"}).addClass("positioned"),s.css({paddingTop:p.height()+o.height()+70}),s.delay(2*r.animationsSpeed).animate({opacity:1},r.animationsSpeed),p.delay(r.animationsSpeed).animate({opacity:1,top:o.height()+60},r.animationsSpeed),n.delay(2*r.animationsSpeed).animate({opacity:1},r.animationsSpeed),setTimeout(function(){var e=jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+t+'"] .stepTitle').height();heightP=jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+t+'"] .genContent').outerHeight()+parseInt(jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel').css("padding-bottom"))+102+e,"final"==t&&(heightP-=80),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel').animate({minHeight:heightP}),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel').css("max-height","none")},2*r.animationsSpeed),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+t+'"] .btn-next').is(".lfb_disabledBtn")?jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+t+'"] .btn-next').hide():(jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+t+'"] .btn-next').css("display","inline-block").hide(),setTimeout(function(){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+t+'"] .btn-next').is(".lfb_disabledBtn")||(jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+t+'"] .btn-next').fadeIn(500),setTimeout(function(){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+t+'"] .btn-next').is(".lfb_disabledBtn")&&jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+t+'"] .btn-next').hide()},550))},2*r.animationsSpeed)),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"]  #mainPanel .genSlide[data-stepid="'+t+'"] .datetimepicker').hide(),"final"==t?(i?0==jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #lfb_paymentMethodBtns').length&&0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #lfb_razorPayCt').length&&jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+t+'"] .genContentSlide > .lfb_btnNextContainer').hide():(jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+t+'"] .lfb_btnNextContainer').fadeIn(500),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+t+'"] .lfb_btnNextContainerStripe').hide(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #lfb_paymentMethodBtns').hide(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #lfb_stripeForm  .lfb_stripeContainer').hide(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #lfb_stripeForm .lfb_btnNextContainer').hide()),1==r.useSignature&&(jQuery('#estimation_popup[data-form="'+r.formID+'"] #lfb_signature canvas').attr("width",jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #lfb_signature').width()),jQuery('#estimation_popup[data-form="'+r.formID+'"] #lfb_signature canvas').css("width",jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #lfb_signature').width()),r.signature.signature("clear"))):jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+t+'"] .lfb_btnNextContainer').fadeIn(500),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"]').is('[data-previousstepbtn="true"]')&&"final"==t?setTimeout(function(){var e=!1;jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] .genSlide[data-stepid="'+t+'"] ').find(".btn-next,#btnOrderPaypal,#lfb_btnPayStripe,#wpe_btnOrder,#btnOrderRazorpay").each(function(){"none"!=jQuery(this).css("display")&&"none"!=jQuery(this).closest(".lfb_btnNextContainer").css("display")&&(e=!0)}),e?jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] .genSlide[data-stepid="'+t+'"] ').find(".linkPrevious").css({marginTop:-15}):jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] .genSlide[data-stepid="'+t+'"] ').find(".linkPrevious").css({marginTop:24}),0<lfb_lastSteps.length&&(jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"][data-previousstepbtn="true"] #mainPanel .genSlide[data-stepid="'+t+'"] .lfb_linkPreviousCt').delay(3*r.animationsSpeed).fadeIn(500),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"]:not([data-previousstepbtn="true"]) #mainPanel .genSlide[data-stepid="'+t+'"] .lfb_linkPreviousCt').delay(3*r.animationsSpeed).css({opacity:0,display:"inline-block"}).animate({opacity:1},600))},1e3):0<lfb_lastSteps.length&&(jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"][data-previousstepbtn="true"] #mainPanel .genSlide[data-stepid="'+t+'"] .lfb_linkPreviousCt').delay(3*r.animationsSpeed).fadeIn(500),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"]:not([data-previousstepbtn="true"]) #mainPanel .genSlide[data-stepid="'+t+'"] .lfb_linkPreviousCt').delay(3*r.animationsSpeed).css({opacity:0,display:"inline-block"}).animate({opacity:1},600)),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+t+'"] .lfb_distanceError').delay(3*r.animationsSpeed).fadeIn(500),0!=r.disableTipMobile&&wpe_is_touch_device()||(navigator.userAgent.toLowerCase().match(/(iPad|iPhone|iPod)/i)?s.delay(750).find('[data-toggle="tooltip"]').b_tooltip({html:!0,container:'#estimation_popup[data-form="'+a+'"]',trigger:"manual"}).on("show.bs.tooltip",function(){jQuery(this).find(".tooltip-inner").css({maxWidth:jQuery(window).width()})}):s.delay(750).find('[data-toggle="tooltip"]').b_tooltip({html:!0,container:'#estimation_popup[data-form="'+a+'"]'}).on("show.bs.b_tooltip",function(e,t){jQuery('#estimation_popup[data-form="'+a+'"] .tooltip-inner').css({maxWidth:jQuery(window).width()+"px"})}),s.on("enter",function(){"hover"==this.options.trigger&&document.documentElement}));setTimeout(function(){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide.lfb_activeStep').removeClass("lfb_activeStep"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+t+'"]').addClass("lfb_activeStep"),s.find(".wpe_itemQtField").each(function(){jQuery(this).parent().next().is(".itemDes")&&jQuery(this).css({marginTop:20+jQuery(this).parent().next().outerHeight()})}),r.step=t,setTimeout(function(){wpe_updateStep(a),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+t+'"]').find('[data-usedistance="true"]').each(function(){lfb_removeDistanceError(jQuery(this).attr("data-itemid"),a)},100),jQuery("#estimation_popup :not(.ui-slider-handle) > .tooltip").remove(),jQuery("body > .tooltip").remove(),jQuery('#estimation_popup[data-form="'+a+'"] > .tooltip').remove(),setTimeout(function(){},100),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"]').trigger("stepChanged"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"]').attr("data-currentstep",t)},2*r.animationsSpeed+550),wpe_updatePrice(a),r.backFomFinal&&(r.backFomFinal=!1)},300)},d),jQuery("#estimation_popup :not(.ui-slider-handle) > .tooltip").remove(),jQuery("body > .tooltip").remove(),jQuery('#estimation_popup[data-form="'+a+'"] > .tooltip').remove(),wpe_updatePrice(a)}function wpe_findPotentialsSteps(i,o){var e=wpe_getForm(o),p=new Array,s=new Array,n=new Array,d=0;return jQuery.each(e.links,function(){var e=this;if(e.originID==i){var t=!1,a=!0;if(e.conditions&&"[]"!=e.conditions){e.conditionsO=JSON.parse(e.conditions);var r=lfb_checkConditions(e.conditionsO,o,i);t=r.error,a=r.errorOR}else n.push(e.destinationID),a=!1;("OR"==e.operator&&!a||"OR"!=e.operator&&!t)&&(e.conditionsO=JSON.parse(e.conditions),s.push({stepID:parseInt(e.destinationID),nbConditions:e.conditionsO.length}),e.conditionsO.length>d&&(d=e.conditionsO.length),p.push(parseInt(e.destinationID)))}}),0==i&&p.push(parseInt(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o+'"]  #mainPanel .genSlide[data-start="1"]').attr("data-stepid"))),0==p.length?p.push("final"):0<n.length&&n.length<p.length&&(jQuery.each(n,function(){var t=this;p=jQuery.grep(p,function(e){return e!=t})}),0<d&&jQuery.each(p,function(t){jQuery.each(s,function(e){e.stepID==t&&e.nbConditions<d&&(p=jQuery.grep(p,function(e){return e!=t}))})})),p}function lfb_checkConditions(e,b,h){var j=!1,Q=!0;return jQuery.each(e,function(){var e=this;if("_"!=e.interaction.substr(0,1)&&"v_"!=e.interaction.substr(0,2)){0==(m=e.interaction.substr(0,e.interaction.indexOf("_")))&&(m="final");var t=e.interaction.substr(e.interaction.indexOf("_")+1,e.interaction.length);if(0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b+'"] #mainPanel .genSlide[data-stepid="'+m+'"] .genContent [data-itemid="'+t+'"]').length){var a=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b+'"] #mainPanel .genSlide[data-stepid="'+m+'"] .genContent [data-itemid="'+t+'"]');if(a.is(".lfb_disabled")||a.closest(".genSlide").is(".lfb_disabled"))"unclicked"!=e.action?j=!0:Q=!1;else{if(e.value&&-1<e.value.indexOf("_"))if("_"!=e.value.substr(0,1)){var r=e.value.substr(0,e.value.indexOf("_")),i=e.value.substr(e.value.indexOf("-")+1,e.value.length);0==r&&(r="final");var o=e.value.substr(e.value.indexOf("_")+1,e.value.indexOf("-")-(e.value.indexOf("_")+1));if("v"==r)e.value=lfb_getVariableByID(form,o).value;else if("stepqt"==i)e.value=wpe_getStepQuantities(m,b,t);else{var p=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b+'"] #mainPanel .genSlide[data-stepid="'+r+'"] .genContent [data-itemid="'+o+'"]');0<p.length&&(""==i?void 0!==p.data("resprice")?e.value=parseFloat(p.data("resprice")):p.is("[data-resqt]")&&(e.value=parseFloat(p.attr("data-resqt"))):"quantity"==i?p.is(".lfb_disabled")?e.value=0:p.is('input[type="number"]')?e.value=p.val():0<p.find(".wpe_qtfield").length?e.value=parseInt(p.find(".wpe_qtfield").val()):e.value=parseInt(p.find(".icon_quantity").html()):"value"==i&&(p.is(".lfb_disabled")?e.value="":(e.value=p.val(),p.is(".lfb_datepicker")&&(e.value=moment.utc(p.datetimepicker("getDate")).format("YYYY-MM-DD")),e.value=e.value.replace(/\`/g,"'"))))}}else"_total"==e.value||"_total-"==e.value?e.value=form.price:"_total_qt"==e.value&&(e.value=wpe_getTotalQuantities(b,h,t));else e.value&&(e.value=e.value.replace(/\`/g,"'"));switch(e.action){case"clicked":a.closest(".itemBloc").is(".lfb_disabled")?j=!0:a.is('[type="checkbox"]')?(a.is(":checked")||(j=!0),a.is(":checked")&&(Q=!1)):(a.is(".checked")||a.is(":checked")||(j=!0),(a.is(".checked")||a.is(":checked"))&&(Q=!1));break;case"unclicked":a.closest(".itemBloc").is(".lfb_disabled")?j=Q=!1:((a.is(':not([type="checkbox"]).checked')||a.is(":checked"))&&(j=!0),a.is(':not([type="checkbox"]).checked')||a.is(":checked")||(Q=!1));break;case"filled":a.is(".lfb_dropzone")?0==a.find(".dz-preview[data-file].dz-success.dz-complete").length?j=!0:Q=!1:0==a.val().length?j=!0:Q=!1;break;case"equal":a.is(".lfb_datepicker")?a.is('[data-datetype="date"]')?(moment.utc(a.datetimepicker("getDate")).format("YYYY-MM-DD")!=e.value&&(j=!0),moment.utc(a.datetimepicker("getDate")).format("YYYY-MM-DD")==e.value&&(Q=!1)):a.is('[data-datetype="time"]')?(moment(a.datetimepicker("getDate")).format("HH:mm")!=e.value&&(j=!0),moment(a.datetimepicker("getDate")).format("HH:mm")==e.value&&(Q=!1)):(moment.utc(a.datetimepicker("getDate")).isSame(moment.utc(e.value).format("YYYY-MM-DD HH:mm"))||(j=!0),moment.utc(a.datetimepicker("getDate")).isSame(moment.utc(e.value).format("YYYY-MM-DD HH:mm"))&&(Q=!1)):a.val()!=e.value?j=!0:Q=!1;break;case"different":a.val()==e.value?j=!0:Q=!1;break;case"PriceSuperior":var s=parseFloat(a.data("resprice"));(a.is(".lfb_button:not(.checked)")||a.is(".selectable:not(.checked)")||a.is("input[type=checkbox]:not(:checked)")||s<=e.value)&&(j=!0),(a.is(".checked")||a.is(":checked"))&&s>e.value&&(Q=!1);break;case"PriceInferior":s=parseFloat(a.data("resprice"));(a.is(".lfb_button:not(.checked)")||a.is(".selectable:not(.checked)")||a.is("input[type=checkbox]:not(:checked)")||s>=e.value)&&(j=!0),(a.is(".checked")||a.is(":checked"))&&s<e.value&&(Q=!1);break;case"PriceEqual":s=parseFloat(a.data("resprice"));(a.is(".lfb_button:not(.checked)")||a.is(".selectable:not(.checked)")||a.is("input[type=checkbox]:not(:checked)")||s!=e.value)&&(j=!0),(a.is(".checked")||a.is(":checked"))&&s==e.value&&(Q=!1);break;case"PriceDifferent":s=parseFloat(a.data("resprice"));(a.is(".lfb_button:not(.checked)")||a.is(".selectable:not(.checked)")||a.is("input[type=checkbox]:not(:checked)")||s==e.value)&&(j=!0),(a.is(".checked")||a.is(":checked"))&&s!=e.value&&(Q=!1);break;case"QtSuperior":(a.is(".selectable:not(.checked)")||0<a.find(".icon_quantity").length&&parseInt(a.find(".icon_quantity").html())<=e.value||0<a.find(".wpe_qtfield").length&&parseInt(a.find(".wpe_qtfield").val())<=e.value||a.is('[data-type="slider"]')&&a.is(".ui-slider")&&parseInt(a.slider("value"))<=e.value)&&(j=!0),a.is(".selectable")?(a.is(".selectable.checked")&&parseInt(a.find(".icon_quantity").html())>e.value||parseInt(a.find(".wpe_qtfield").val())>e.value)&&(Q=!1):a.is('[data-type="slider"]')&&a.is(".ui-slider")&&parseInt(a.slider("value"))>e.value&&(Q=!1),a.is("input")&&(parseInt(a.val())<=e.value&&(j=!0),parseInt(a.val())>e.value&&(Q=!1));break;case"QtInferior":(a.is(".selectable:not(.checked)")||0<a.find(".icon_quantity").length&&parseInt(a.find(".icon_quantity").html())>=e.value||0<a.find(".wpe_qtfield").length&&parseInt(a.find(".wpe_qtfield").val())>=e.value||a.is('[data-type="slider"]')&&a.is(".ui-slider")&&parseInt(a.slider("value"))>=e.value)&&(j=!0),a.is(".selectable")?(a.is(".selectable.checked")&&parseInt(a.find(".icon_quantity").html())<e.value||parseInt(a.find(".wpe_qtfield").val())<e.value)&&(Q=!1):a.is('[data-type="slider"]')&&a.is(".ui-slider")&&parseInt(a.slider("value"))<e.value&&(Q=!1),a.is("input")&&(parseInt(a.val())>=e.value&&(j=!0),parseInt(a.val())<e.value&&(Q=!1));break;case"QtEqual":(a.is(".selectable:not(.checked)")||0<a.find(".icon_quantity").length&&parseInt(a.find(".icon_quantity").html())!=e.value||0<a.find(".wpe_qtfield").length&&parseInt(a.find(".wpe_qtfield").val())!=e.value||a.is('[data-type="slider"]')&&a.is(".ui-slider")&&parseInt(a.slider("value"))!=e.value)&&(j=!0),a.is(".selectable")?(a.is(".selectable.checked")&&parseInt(a.find(".icon_quantity").html())==e.value||parseInt(a.find(".wpe_qtfield").val())==e.value)&&(Q=!1):a.is('[data-type="slider"]')&&a.is(".ui-slider")&&parseInt(a.slider("value"))==e.value&&(Q=!1),a.is("input")&&(parseInt(a.val())!=e.value&&(j=!0),parseInt(a.val())==e.value&&(Q=!1));break;case"QtDifferent":(a.is(".selectable:not(.checked)")||0<a.find(".icon_quantity").length&&parseInt(a.find(".icon_quantity").html())==e.value||0<a.find(".wpe_qtfield").length&&parseInt(a.find(".wpe_qtfield").val())==e.value||a.is('[data-type="slider"]')&&a.is(".ui-slider")&&parseInt(a.slider("value"))==e.value)&&(j=!0),a.is(".selectable")?(a.is(".selectable.checked")&&parseInt(a.find(".icon_quantity").html())!=e.value||parseInt(a.find(".wpe_qtfield").val())!=e.value)&&(Q=!1):a.is('[data-type="slider"]')&&a.is(".ui-slider")&&parseInt(a.slider("value"))!=e.value&&(Q=!1),a.is("input")&&(parseInt(a.val())==e.value&&(j=!0),parseInt(a.val())!=e.value&&(Q=!1));break;case"superior":if(a.is(".lfb_datepicker"))a.is('[data-datetype="date"]')?(moment.utc(a.datetimepicker("getDate")).format("YYYY-MM-DD")<=e.value&&(j=!0),moment.utc(a.datetimepicker("getDate")).format("YYYY-MM-DD")>e.value&&(Q=!1)):a.is('[data-datetype="time"]')?(moment.utc(a.datetimepicker("getDate")).format("HH:mm")<=e.value&&(j=!0),moment.utc(a.datetimepicker("getDate")).format("HH:mm")>e.value&&(Q=!1)):(moment.utc(a.datetimepicker("getDate")).isSameOrBefore(moment.utc(e.value).format("YYYY-MM-DD HH:mm"))&&(j=!0),moment.utc(a.datetimepicker("getDate")).isAfter(moment.utc(e.value).format("YYYY-MM-DD HH:mm"))&&(Q=!1));else if(a.is(".lfb_timepicker")){var n=parseInt(e.value.substr(0,e.value.indexOf(":"))),d=parseInt(e.value.substr(e.value.indexOf(":")+1,2));0<e.value.indexOf("PM")&&12!=n&&(n+=12);var l=parseInt(a.val().substr(0,a.val().indexOf(":"))),u=parseInt(a.val().substr(a.val().indexOf(":")+1,2));0<a.val().indexOf("PM")&&12!=l&&(l+=12),(l<n||l==n&&u<=d)&&(j=!0),(n<l||l==n&&d<u)&&(Q=!1)}else a.is('input[type="number"]')&&(parseFloat(a.val())<=parseFloat(e.value)&&(j=!0),parseFloat(a.val())>parseFloat(e.value)&&(Q=!1));break;case"inferior":if(a.is(".lfb_datepicker"))a.is('[data-datetype="date"]')?(moment.utc(a.datetimepicker("getDate")).format("YYYY-MM-DD")>=e.value&&(j=!0),moment.utc(a.datetimepicker("getDate")).format("YYYY-MM-DD")<e.value&&(Q=!1)):a.is('[data-datetype="time"]')?(moment.utc(a.datetimepicker("getDate")).format("HH:mm")>=e.value&&(j=!0),moment.utc(a.datetimepicker("getDate")).format("HH:mm")<e.value&&(Q=!1)):(moment.utc(a.datetimepicker("getDate")).isSameOrAfter(moment.utc(e.value).getTime())&&(j=!0),moment.utc(a.datetimepicker("getDate")).isBefore(moment.utc(e.value).getTime())&&(Q=!1));else if(a.is(".lfb_timepicker")){n=parseInt(e.value.substr(0,e.value.indexOf(":"))),d=parseInt(e.value.substr(e.value.indexOf(":")+1,2));0<e.value.indexOf("PM")&&12!=n&&(n+=12);l=parseInt(a.val().substr(0,a.val().indexOf(":"))),u=parseInt(a.val().substr(a.val().indexOf(":")+1,2));0<a.val().indexOf("PM")&&12!=l&&(l+=12),(n<l||l==n&&d<=u)&&(j=!0),(l<n||l==n&&u<d)&&(Q=!1)}else a.is('input[type="number"]')&&(parseFloat(a.val())>=parseFloat(e.value)&&(j=!0),parseFloat(a.val())<parseFloat(e.value)&&(Q=!1));break;case"equal":if(a.is(".lfb_datepicker"))a.is('[data-datetype="date"]')?(moment.utc(a.datetimepicker("getDate")).format("YYYY-MM-DD")!=e.value&&(j=!0),moment.utc(a.datetimepicker("getDate")).format("YYYY-MM-DD")==e.value&&(Q=!1)):a.is('[data-datetype="time"]')?(moment.utc(a.datetimepicker("getDate")).format("HH:mm")!=e.value&&(j=!0),moment.utc(a.datetimepicker("getDate")).format("HH:mm")==e.value&&(Q=!1)):(moment.utc(a.datetimepicker("getDate")).isSame(moment.utc(e.value).format("YYYY-MM-DD HH:mm"))||(j=!0),moment.utc(a.datetimepicker("getDate")).isSame(moment.utc(e.value).format("YYYY-MM-DD HH:mm"))&&(Q=!1));else if(a.is(".lfb_timepicker")){n=parseInt(e.value.substr(0,e.value.indexOf(":"))),d=parseInt(e.value.substr(e.value.indexOf(":")+1,2));0<e.value.indexOf("PM")&&12!=n&&(n+=12);l=parseInt(a.val().substr(0,a.val().indexOf(":"))),u=parseInt(a.val().substr(a.val().indexOf(":")+1,2));0<a.val().indexOf("PM")&&12!=l&&(l+=12),l!=n&&(j=!0),l==n&&(Q=!1)}else a.is('input[type="number"]')&&(parseFloat(a.val())!=parseFloat(e.value)&&(j=!0),parseFloat(a.val())==parseFloat(e.value)&&(Q=!1));break;case"different":if(a.is(".lfb_datepicker"))a.is('[data-datetype="date"]')?(moment.utc(a.datetimepicker("getDate")).format("YYYY-MM-DD")==e.value&&(j=!0),moment.utc(a.datetimepicker("getDate")).format("YYYY-MM-DD")!=e.value&&(Q=!1)):a.is('[data-datetype="time"]')?(moment.utc(a.datetimepicker("getDate")).format("HH:mm")==e.value&&(j=!0),moment.utc(a.datetimepicker("getDate")).format("HH:mm")!=e.value&&(Q=!1)):(moment.utc(a.datetimepicker("getDate")).isSame(moment.utc(e.value).format("YYYY-MM-DD HH:mm"))&&(j=!0),moment.utc(a.datetimepicker("getDate")).isSame(moment.utc(e.value).format("YYYY-MM-DD HH:mm"))||(Q=!1));else if(a.is(".lfb_timepicker")){n=parseInt(e.value.substr(0,e.value.indexOf(":"))),d=parseInt(e.value.substr(e.value.indexOf(":")+1,2));0<e.value.indexOf("PM")&&12!=n&&(n+=12);l=parseInt(a.val().substr(0,a.val().indexOf(":"))),u=parseInt(a.val().substr(a.val().indexOf(":")+1,2));0<a.val().indexOf("PM")&&12!=l&&(l+=12),l==n&&(j=!0),l!=n&&(Q=!1)}else a.is('input[type="number"]')&&(parseFloat(a.val())==parseFloat(e.value)&&(j=!0),parseFloat(a.val())!=parseFloat(e.value)&&(Q=!1))}}}}else{if(e.interaction&&6<e.interaction.length&&"_step-"==e.interaction.substr(0,6)){var m;0==(m=e.interaction.substr(6,e.interaction.length))&&(m="final");var f=wpe_getStepQuantities(b,m,t);switch(e.action){case"superior":f<=e.value&&(j=!0),f>e.value&&(Q=!1);break;case"inferior":f>=e.value&&(j=!0),form.price<e.value&&(Q=!1);break;case"equal":f!=e.value&&(j=!0),f==e.value&&(Q=!1);break;case"different":f==e.value&&(j=!0),f!=e.value&&(Q=!1)}}if("_total"==e.interaction)switch(e.action){case"superior":parseFloat(form.price)<=parseFloat(e.value)&&(j=!0),parseFloat(form.price)>parseFloat(e.value)&&(Q=!1);break;case"inferior":parseFloat(form.price)>=parseFloat(e.value)&&(j=!0),parseFloat(form.price)<parseFloat(e.value)&&(Q=!1);break;case"equal":parseFloat(form.price)!=parseFloat(e.value)&&(j=!0),parseFloat(form.price)==parseFloat(e.value)&&(Q=!1);break;case"different":parseFloat(form.price)==e.value&&(j=!0),parseFloat(form.price)!=e.value&&(Q=!1)}else if("_total_qt"==e.interaction){f=wpe_getTotalQuantities(b,h);switch(e.action){case"superior":f<=e.value&&(j=!0),f>e.value&&(Q=!1);break;case"inferior":f>=e.value&&(j=!0),f<e.value&&(Q=!1);break;case"equal":f!=e.value&&(j=!0),f==e.value&&(Q=!1);break;case"different":f==e.value&&(j=!0),f!=e.value&&(Q=!1)}}else if(2<e.interaction.length&&"v_"==e.interaction.substr(0,2)){var c=0,_=e.interaction.substr(2,e.interaction.length),y=lfb_getVariableByID(form,_);switch(y&&(c=y.value),e.action){case"superior":c<=e.value&&(j=!0),c>e.value&&(Q=!1);break;case"inferior":c>=e.value&&(j=!0),c<e.value&&(Q=!1);break;case"equal":c!=e.value&&(j=!0),c==e.value&&(Q=!1);break;case"different":c==e.value&&(j=!0),c!=e.value&&(Q=!1)}}}}),0==e.length&&(Q=!1),{error:j,errorOR:Q}}function lfb_scrollToItem(e,t,a){if("final"==t){var r=wpe_getForm(a);jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"]').is(".wpe_fullscreen")||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"]').is(".wpe_popup")?jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"]').animate({scrollTop:e.parent().offset().top-(80+parseInt(r.scrollTopMargin))},2*r.animationsSpeed):"1"==r.scrollTopPage?jQuery("body,html").animate({scrollTop:0},2*r.animationsSpeed):jQuery("body,html").animate({scrollTop:e.parent().offset().top-(80+parseInt(r.scrollTopMargin))},2*r.animationsSpeed)}}function lfb_checkStepItemsValid(r,i){var o=!0,p=!1,e=wpe_getForm(i);jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide[data-stepid="'+r+'"]').find(".has-error").removeClass("has-error"),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide[data-stepid="'+r+'"]').find(".icon_select.lfb_error").removeClass("lfb_error"),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide[data-stepid="'+r+'"]').find("input[type=text]:not(.lfb_disabled),input[type=password]:not(.lfb_disabled)").each(function(){if(0==jQuery(this).closest(".itemBloc.lfb_disabled").length&&0==jQuery(this).closest("#lfb_stripeForm").length&&0==jQuery(this).closest("#wtmt_paypalForm").length)if(jQuery(this).is('[data-required="true"]')&&jQuery(this).val().length<1&&(o=!1,jQuery(this).closest(".form-group").addClass("has-error"),p||lfb_scrollToItem(jQuery(this),r,i),p=!0),jQuery(this).is('[data-validation="phone"]')&&0<jQuery(this).val().length&&(jQuery(this).val().length<5||0==/^(?:(?:\(?(?:00|\+)([1-4]\d\d|[1-9]\d?)\)?)?[\-\.\ \\\/]?)?((?:\(?\d{1,}\)?[\-\.\ \\\/]?){0,})(?:[\-\.\ \\\/]?(?:#|ext\.?|extension|x)[\-\.\ \\\/]?(\d+))?$/i.test(jQuery(this).val())))o=!1,jQuery(this).closest(".form-group").addClass("has-error"),p||lfb_scrollToItem(jQuery(this),r,i),p=!0;else if(jQuery(this).is('[data-validation="email"]')&&0<jQuery(this).val().length&&!wpe_checkEmail(jQuery(this).val()))o=!1,jQuery(this).closest(".form-group").addClass("has-error"),p||lfb_scrollToItem(jQuery(this),r,i),p=!0;else if(jQuery(this).is('[data-validation="fill"]')&&0==jQuery(this).val().length)o=!1,jQuery(this).closest(".form-group").addClass("has-error"),p||lfb_scrollToItem(jQuery(this),r,i),p=!0;else if(jQuery(this).is('[data-validation="custom"]')&&0<jQuery(this).val().length){var e=!1;if(0<parseInt(jQuery(this).attr("data-validmin"))&&jQuery(this).val().length<parseInt(jQuery(this).attr("data-validmin"))&&(e=!0),0<parseInt(jQuery(this).attr("data-validmax"))&&jQuery(this).val().length>parseInt(jQuery(this).attr("data-validmax"))&&(e=!0),jQuery(this).is("[data-validcar]")&&""!=jQuery(this).attr("data-validcar")){var t=jQuery(this);if(-1<jQuery(this).attr("data-validcar").indexOf(",")){var a=jQuery(this).attr("data-validcar").split(",");jQuery.each(a,function(){-1==t.val().indexOf(this)&&(e=!0)})}else-1==t.val().indexOf(jQuery(this).attr("data-validcar"))&&(e=!0)}e&&(o=!1,jQuery(this).closest(".form-group").addClass("has-error"),p||lfb_scrollToItem(jQuery(this),r,i),p=!0)}}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide[data-stepid="'+r+'"]').find("input[type=text][minlength]:not(.lfb_disabled)").each(function(){jQuery(this).val().length<jQuery(this).attr("minlength")&&(o=!1,jQuery(this).closest(".form-group").addClass("has-error"),p||lfb_scrollToItem(jQuery(this),r,i))}),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide[data-stepid="'+r+'"]').find('select[data-required="true"]:not(.lfb_disabled)').each(function(){jQuery(this).is('[data-firstvaluedisabled="true"]')&&(!jQuery(this).is(".lfb_selectpicker")&&0==jQuery(this).find("option:selected").index()||jQuery(this).is(".lfb_selectpicker")&&jQuery(this).val()==jQuery(this).find("option").first().attr("value"))&&(o=!1,jQuery(this).closest(".form-group").addClass("has-error"),p||lfb_scrollToItem(jQuery(this),r,i))}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide[data-stepid="'+r+'"]').find("input[type=text][minlength]:not(.lfb_disabled)").each(function(){jQuery(this).val().length<jQuery(this).attr("minlength")&&(o=!1,jQuery(this).closest(".form-group").addClass("has-error"),p||lfb_scrollToItem(jQuery(this),r,i))}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide[data-stepid="'+r+'"]').find('input[type=number][data-required="true"]:not(.lfb_disabled)').each(function(){""!=jQuery(this).val()&&0!=jQuery(this).val()||(o=!1,jQuery(this).closest(".form-group").addClass("has-error"),p||lfb_scrollToItem(jQuery(this),r,i))}),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide[data-stepid="'+r+'"]').find(".lfb_dropzone:not(.lfb_disabled)").each(function(){jQuery(this).is('[data-required="true"]')&&0==jQuery(this).find(".dz-preview[data-file].dz-success.dz-complete").length?(o=!1,jQuery(this).parent().addClass("has-error"),p||lfb_scrollToItem(jQuery(this),r,i)):jQuery(this).find(".dz-preview[data-file].dz-complete").length>parseInt(jQuery(this).attr("data-maxfiles"))&&(o=!1,jQuery(this).parent().addClass("has-error"),p||lfb_scrollToItem(jQuery(this),r,i))}),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide[data-stepid="'+r+'"]').find('textarea[data-required="true"]:not(.lfb_disabled)').each(function(){0==jQuery(this).closest("#lfb_stripeForm").length&&0==jQuery(this).closest("#wtmt_paypalForm").length&&jQuery(this).val().length<1&&(o=!1,jQuery(this).closest(".form-group").addClass("has-error"),p||lfb_scrollToItem(jQuery(this),r,i))}),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide[data-stepid="'+r+'"]').find('input[type=checkbox][data-required="true"]:not(.lfb_disabled)').each(function(){jQuery(this).is(":checked")||jQuery(this).is("[data-group]")&&(""==jQuery(this).attr("data-group")||0!=jQuery(' #estimation_popup[data-form="'+i+'"] #mainPanel .genSlide[data-stepid="'+r+'"] [data-group="'+jQuery(this).attr("data-group")+'"]:checked').length)||(o=!1,jQuery(this).closest(".form-group,p,.itemBloc").addClass("has-error"),p||lfb_scrollToItem(jQuery(this),r,i))}),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide[data-stepid="'+r+'"]').find('.selectable[data-required="true"]:not(.lfb_disabled)').each(function(){jQuery(this).is(".checked")||jQuery(this).is("[data-group]")&&(""==jQuery(this).attr("data-group")||0!=jQuery(' #estimation_popup[data-form="'+i+'"] #mainPanel .genSlide[data-stepid="'+r+'"] [data-group="'+jQuery(this).attr("data-group")+'"].checked').length)||(o=!1,jQuery(this).find(".icon_select").addClass("lfb_error"),p||lfb_scrollToItem(jQuery(this),r,i))}),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide[data-stepid="'+r+'"]').find('.lfb_button[data-required="true"]:not(.lfb_disabled)').each(function(){jQuery(this).is(".checked")||jQuery(this).is("[data-group]")&&(""==jQuery(this).attr("data-group")||0!=jQuery(' #estimation_popup[data-form="'+i+'"] #mainPanel .genSlide[data-stepid="'+r+'"] [data-group="'+jQuery(this).attr("data-group")+'"].checked').length)||(o=!1,jQuery(this).find(".icon_select").addClass("lfb_error"),p||lfb_scrollToItem(jQuery(this),r,i))}),"final"!=r||1!=e.useSignature||0==JSON.parse(e.signature.signature("toJSON")).lines.length&&(o=!1,jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #lfb_signature').addClass("has-error"),p||lfb_scrollToItem(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #lfb_signature'),r,i),p=!0);return o}function wpe_nextStep(e){var t=wpe_getForm(e);jQuery("#lfb_bootstraped :not(.ui-slider-handle) > .tooltip").remove(),jQuery('#estimation_popup[data-form="'+t.formID+'"] > .tooltip').remove(),navigator.userAgent.toLowerCase().match(/(iPad|iPhone|iPod)/i)&&setTimeout(function(){jQuery("#lfb_bootstraped :not(.ui-slider-handle) > .tooltip").remove()},500),lfb_updateShowSteps(e),jQuery(".errorMsg").hide();var a=!0,r=!0,i=wpe_findPotentialsSteps(t.step,e);if(0<t.step&&(1==jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+e+'"] #mainPanel .genSlide[data-stepid="'+t.step+'"]').data("required")&&(a=!1,(0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] #mainPanel .genSlide[data-stepid="'+t.step+'"]').find('select:not(.lfb_disabled):not([data-firstvaluedisabled="true"])').length||0<jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+e+'"] #mainPanel .genSlide[data-stepid="'+t.step+'"]').find("div.selectable.checked:not(.lfb_disabled)").length||0<jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+e+'"] #mainPanel .genSlide[data-stepid="'+t.step+'"]').find("a.lfb_button.checked:not(.lfb_disabled)").length||0<jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+e+'"] #mainPanel .genSlide[data-stepid="'+t.step+'"]').find('input[data-toggle="switch"]:checked:not(.lfb_disabled)').length||0<jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+e+'"] #mainPanel .genSlide[data-stepid="'+t.step+'"]').find("input[type=text][data-title].checked:not(.lfb_disabled)").length||0<jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+e+'"] #mainPanel .genSlide[data-stepid="'+t.step+'"]').find("input[type=number][data-itemid].checked:not(.lfb_disabled)").length||0<jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+e+'"] #mainPanel .genSlide[data-stepid="'+t.step+'"]').find("input[type=file].checked:not(.lfb_disabled)").length||0<jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+e+'"] #mainPanel .genSlide[data-stepid="'+t.step+'"]').find(".lfb_colorPreview:not(.lfb_disabled)").length||0<jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+e+'"] #mainPanel .genSlide[data-stepid="'+t.step+'"]').find(".dz-preview[data-file].dz-success.dz-complete").length)&&(a=!0),a||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] #mainPanel .genSlide[data-stepid="'+t.step+'"]').find('select:not(.lfb_disabled)[data-firstvaluedisabled="true"]').each(function(){(!jQuery(this).is(".lfb_selectpicker")&&0<jQuery(this).find("option:selected").index()||jQuery(this).is(".lfb_selectpicker")&&1<jQuery(this).find("option:selected").index())&&(a=!0)})),r=lfb_checkStepItemsValid(t.step,e)),a&&r&&lfb_checkUserEmail(t)){lfb_lastStepID=t.step,parseFloat(lfb_lastStepID)!=parseInt(lfb_lastStepID)||isNaN(lfb_lastStepID)||-1==jQuery.inArray(parseInt(t.step),lfb_lastSteps)&&lfb_lastSteps.push(parseInt(t.step));jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] #mainPanel .genSlide[data-stepid="'+lfb_lastStepID+'"] .stepTitle').html();jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"]').is(".wpe_fullscreen")&&!jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"]').is(".wpe_popup")&&history.pushState({id:lfb_lastStepID},"","");var o=i[0];if("final"!=o&&-1==(o=wpe_getNextEnabledStep(e,i))&&(o="final"),1==t.sendContactASAP&&0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] #mainPanel .genSlide[data-stepid="'+t.step+'"] [data-fieldtype="email"]').length&&wpe_checkEmail(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] #mainPanel .genSlide[data-stepid="'+t.step+'"] [data-fieldtype="email"]').val())){t.contactSent=1;var p=wpe_getContactInformations(e);jQuery.ajax({url:t.ajaxurl,type:"post",data:{action:"lfb_sendCt",formID:e,email:p.email,lastName:p.lastName,firstName:p.firstName,phone:p.phone,country:p.country,zip:p.zip,state:p.state,city:p.city,address:p.address},success:function(e){}})}wpe_changeStep(o,e)}else a||(jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+e+'"] .errorMsg').slideDown(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"]').trigger("stepError"))}function wpe_getNextEnabledStep(e,t){var a=-1,r=t[0];return"final"!=r&&(a=!jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"]  #mainPanel .genSlide[data-stepid="'+r+'"]').is(".lfb_disabled")&&(0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] #mainPanel .genSlide[data-stepid="'+r+'"] .lfb_item:not(.lfb-hidden)').length||0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] #mainPanel .genSlide[data-stepid="'+r+'"] .lfb_distanceError').length)?r:(lfb_lastSteps.push(parseInt(r)),wpe_updatePrice(e),wpe_getNextEnabledStep(e,wpe_findPotentialsSteps(parseInt(r),e)))),a}function wpe_openGenerator(e){var t=wpe_getForm(e);jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"]  #startInfos > p').slideDown(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] .lfb_btnFloatingSummary').css({display:"inline-block"}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] .lfb_btnSaveForm').css({display:"inline-block"}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t.formID+'"] #btnStart').parent().fadeOut(t.animationsSpeed,function(){"2"!=t.showSteps&&jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"]').find(".genPrice,#lfb_stepper").fadeIn(t.animationsSpeed),t.autoStart||jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+t.formID+'"] #mainPanel').fadeIn(t.animationsSpeed+t.animationsSpeed/2,function(){wpe_nextStep(e)})})}function wpe_initListeners(i){var o=wpe_getForm(i);jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide div.selectable .img,  #estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide div.selectable .icon_select').click(function(){tld_selectionMode||wpe_itemClick(jQuery(this).parent(),!0,i)}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide a.lfb_button').click(function(){tld_selectionMode||wpe_itemClick(jQuery(this),!0,i)}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide [data-callnextstep="1"]').click(function(){!tld_selectionMode&&jQuery(this).is(".checked")&&wpe_nextStep(i)}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel input[type=checkbox][data-price]').change(function(){jQuery(this).is('[data-usedistance="true"]')&&lfb_removeDistanceError(jQuery(this).attr("data-itemid"),i),wpe_updatePrice(i,jQuery(this).attr("data-itemid"))}),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel input[type=checkbox][data-group]').change(function(e){var t=jQuery(this);t.is(":checked")&&(jQuery(this).closest(".genSlide").find('div.selectable.checked[data-group="'+t.data("group")+'"]').each(function(){wpe_itemClick(jQuery(this),!1,i)}),jQuery(this).closest(".genSlide").find('input[type=checkbox][data-group="'+t.data("group")+'"]:checked').each(function(){jQuery(this).is(t)||jQuery(this).trigger("click.auto")}),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+i+'"]').is('[data-autoclick="1"]')&&0==t.closest(".genSlide").find("[data-itemid]").not('[data-group="'+t.data("group")+'"]').length&&wpe_nextStep(wpe_getForm(i).formID))}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide select[data-itemid]').change(function(){var e=jQuery(this).val(),t=0;jQuery(this).find("option").each(function(){jQuery(this).attr("value")==e&&(t=jQuery(this).attr("data-price"))}),jQuery(this).attr("data-price",t),jQuery(this).data("price",t),wpe_updatePrice(i)}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide select[data-itemid]').trigger("change"),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"] #mainPanel input[type=checkbox][data-price]').change(function(){}),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"] #mainPanel .genSlide input.wpe_qtfield').change(function(){wpe_updatePrice(i,jQuery(this).attr("data-itemid"))}),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"] #mainPanel .genSlide').find("input[type=text][data-title],textarea[data-title],input[type=file][data-title],input[type=number][data-title]").change(function(){0<jQuery(this).val().length?(jQuery(this).addClass("checked"),jQuery(this).addClass("lfb_changed")):jQuery(this).removeClass("checked")}),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"] #mainPanel .genSlide div.selectable .icon_quantity').click(function(){tld_selectionMode||(jQuery(".quantityBtns").not(jQuery(this).parent().find(".quantityBtns")).removeClass("open"),jQuery(".quantityBtns").not(jQuery(this).parent().find(".quantityBtns")).fadeOut(250),!jQuery(this).parent().find(".quantityBtns").is(".open")&&jQuery(this).parent().is(".checked")?(0<jQuery(this).parent().find(".quantityBtns .tooltip-inner").length&&jQuery(this).parent().find(".quantityBtns .tooltip-inner").html(parseInt(jQuery(this).parent().find(".icon_quantity").html())),jQuery(this).parent().find(".quantityBtns").addClass("open"),jQuery(this).parent().find(".quantityBtns").fadeIn(250)):(jQuery(this).parent().find(".quantityBtns").removeClass("open"),jQuery(this).parent().find(".quantityBtns").fadeOut(250)))}),jQuery("#wpe_orderMessageCheck").change(function(){jQuery(this).is(":checked")?jQuery("#wpe_orderMessage").slideDown(250):jQuery("#wpe_orderMessage").slideUp(250)}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"] #wpe_btnOrder').click(function(){tld_selectionMode||wpe_order(i)}),jQuery("#gform_wrapper_"+o.gravityFormID+" form").submit(function(e){var t=jQuery(this);if(jQuery(this).is(".submit"))jQuery(this).removeClass("submit");else if(e.preventDefault(),jQuery(this).addClass("submit"),o.save_to_cart){var a=new Array,r=lfb_lastSteps.slice();"final"!=o.step&&-1==jQuery.inArray(parseInt(o.step),r)?r.push(parseInt(o.step)):"final"==o.step&&-1==jQuery.inArray("final",r)&&r.push("final"),jQuery.each(r,function(){$panel=jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide[data-stepid="'+this+'"]'),$panel.find('div.selectable.checked:not(.lfb_disabled),a.lfb_button.checked:not(.lfb_disabled),input[type=checkbox]:checked:not(.lfb_disabled),[data-type="slider"]:not(.lfb_disabled)').each(function(){var e=1;0<parseInt(jQuery(this).data("resqt"))&&(e=parseInt(jQuery(this).data("resqt"))),jQuery(this).is('[data-type="slider"]')&&(e=parseInt(jQuery(this).slider("value")),isNaN(parseInt(jQuery(this).find(".tooltip-inner").html()))||(e=parseInt(jQuery(this).find(".tooltip-inner").html()))),0<parseInt(jQuery(this).data("prodid"))&&a.push({quantity:e,product_id:parseInt(jQuery(this).data("prodid")),variation:parseInt(jQuery(this).attr("data-woovar"))})})}),jQuery.ajax({url:o.ajaxurl,type:"post",data:{action:"lfb_cart_save",ref:o.current_ref,emptyWooCart:o.emptyWooCart,products:a},success:function(){o.timer_gFormSubmit=setInterval(function(){wpe_check_gform_response(o.formID)},300),setTimeout(function(){t.submit()},700)}})}else o.timer_gFormSubmit=setInterval(function(){wpe_check_gform_response(o.formID)},300),setTimeout(function(){t.submit()},700)})}function wpe_checkItems(e){var r=wpe_getForm(e);jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #mainPanel .genSlide div.selectable img[data-tint="true"]').each(function(){jQuery(this).css("opacity",0),jQuery(this).show();var e=jQuery('<canvas class="img"></canvas>');e.css({width:jQuery(this).get(0).width,height:jQuery(this).get(0).height}),jQuery(this).hide(),jQuery(this).after(e);var t=e.get(0).getContext("2d"),a=new Image;a.onload=function(){t.fillStyle=r.colorA,t.fillRect(0,0,e.get(0).width,e.get(0).height),t.fill(),t.globalCompositeOperation="destination-in",t.drawImage(a,0,0,e.get(0).width,e.get(0).height)},jQuery(this).is("[data-lazy-src]")?a.src=jQuery(this).attr("data-lazy-src"):a.src=jQuery(this).attr("src")}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #mainPanel .genSlide div.selectable img[data-tint="false"]').each(function(){jQuery(this).is("[data-src]")&&jQuery(this).attr("src",jQuery(this).attr("data-src"))}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #mainPanel .genSlide div.selectable.checked , #estimation_popup.wpe_bootstraped[data-form="'+r.formID+'"] #mainPanel .genSlide  input[type=checkbox]:checked').hover(function(){jQuery(this).addClass("lfb_hover")},function(){jQuery(this).removeClass("lfb_hover")})}function lfb_getDistanceCalc(e,o,p,t,a,s){google.maps.UnitSystem.METRIC;if("route"==wpe_getForm(o).distancesMode)(lfb_gmapService=new google.maps.DistanceMatrixService).getDistanceMatrix({origins:[t],destinations:[a],travelMode:google.maps.TravelMode.DRIVING,unitSystem:google.maps.UnitSystem.METRIC,avoidHighways:!1,avoidTolls:!1},function(e,t){var a=!1;if(t==google.maps.DistanceMatrixStatus.OK){var r=0;e.rows[0].elements[0].distance?(r=e.rows[0].elements[0].distance.value,r/=1e3,"miles"==s?r*=.62:"mins"==s?r=Math.round(parseInt(e.rows[0].elements[0].duration.value)/60):"hours"==s&&(r=Math.round(parseInt(e.rows[0].elements[0].duration.value)/60/60))):a=!0;jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o+'"] [data-itemid="'+p+'"]');jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o+'"] [data-itemid="'+p+'"]').attr("data-distance",r),wpe_updateSummary(o),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o+'"] #lfb_summary table tr[data-itemstep="'+p+'"] td:eq(2)').html(r),wpe_updatePrice(o),lfb_removeDistanceError(p,o)}else a=!0;a&&lfb_showDistanceError(p,o)});else{var r=new google.maps.Geocoder;r.geocode({address:t},function(e,t){if(void 0!==e[0]){var i=e[0].geometry.location;r.geocode({address:a},function(e,t){if(void 0!==e[0]){var a=e[0].geometry.location,r=google.maps.geometry.spherical.computeDistanceBetween(i,a);r/=1e3,"miles"==s&&(r*=.62);jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o+'"] [data-itemid="'+p+'"]');jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o+'"] [data-itemid="'+p+'"]').attr("data-distance",r),wpe_updateSummary(o),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o+'"] #lfb_summary table tr[data-itemstep="'+p+'"] td:eq(2)').html(r),wpe_updatePrice(o),lfb_removeDistanceError(p,o)}else lfb_showDistanceError(p,o)})}else lfb_showDistanceError(p,o)})}return 0}function lfb_executeCalculation(calculation,formID,targetID){calculation=calculation.replace(/\\/g,"");var form=wpe_getForm(formID),price=0,i=0,elementsToReplace=new Array,itemData=lfb_getItemData(form,targetID),_stepID=itemData.stepid;for(calculation=calculation.replace(/\[variable\]/g,"[price]"),calculation=calculation.replace(/\[quantity\]/g,"[price]"),calculation=calculation.replace(/\[value\]/g,"[price]");-1!=(i=calculation.indexOf("variable-",i+1));){var variableID=calculation.substr(i+9,calculation.indexOf("]",i)-(i+9)),value=0,variable=lfb_getVariableByID(form,variableID);variable&&(value=variable.value),elementsToReplace.push({oldValue:calculation.substr(i-1,calculation.indexOf("]",i)+1-(i-1)),newValue:value})}for(;-1!=(i=calculation.indexOf("item-",i+1));){var itemID=calculation.substr(i+5,calculation.indexOf("_",i)-(i+5)),action=calculation.substr(calculation.indexOf("_",i)+1,calculation.indexOf("]",i)-1-calculation.indexOf("_",i)),value=0,calItemData=lfb_getItemData(form,itemID);if("isChecked"==action&&(value=calItemData?"1==1":"1==0"),"isUnchecked"==action&&(value=calItemData?"1==0":"1==1"),"isFilled"==action&&(value="filefield"==calItemData.type?0<calItemData.files.length?"1==1":"1==0":0<calItemData.value.length?"1==1":"1==0"),"price"==action&&(value=0,"total"==itemID?value=form.price:(value=0,void 0!==calItemData.price&&(value=calItemData.price))),"quantity"==action&&(value=0,void 0!==calItemData.quantity&&(value=calItemData.quantity)),"value"==action&&void 0!==calItemData.value&&(value="numberfield"==calItemData.type?calItemData.value:"'"+calItemData.value+"'"),"date"==action){var $item=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+itemID+'"]');value=$item.is(".lfb_datepicker")&&null!=$item.datetimepicker("getDate")?"'"+moment($item.datetimepicker("getDate")).format("YYYY-MM-DD")+"'":"null"}elementsToReplace.push({oldValue:calculation.substr(i-1,calculation.indexOf("]",i)+1-(i-1)),newValue:value})}for(;-1!=(i=calculation.indexOf("step-",i+1));){var stepID=calculation.substr(i+5,calculation.indexOf("_",i)-(i+5)),action=calculation.substr(calculation.indexOf("_",i)+1,calculation.indexOf("]",i)-1-calculation.indexOf("_",i));"quantity"==action&&(value=wpe_getStepQuantities(formID,stepID,targetID)),elementsToReplace.push({oldValue:calculation.substr(i-1,calculation.indexOf("]",i)+1-(i-1)),newValue:value})}var todayDate=new Date,month=todayDate.getMonth()+1;month<10&&(month="0"+month);var today=todayDate.getFullYear().toString()+month.toString()+todayDate.getDate().toString();if(calculation=calculation.replace(/\[currentDate\]/g,today),-1<calculation.indexOf("dateDifference-"))for(;-1!=(i=calculation.indexOf("dateDifference-",i+1));){var startDateAdPosEnd=calculation.indexOf("_",i+15)+1,startDate=calculation.substr(i+15,calculation.indexOf("_",i)-(i+15)),endDate=calculation.substr(startDateAdPosEnd,calculation.indexOf("]",startDateAdPosEnd)-startDateAdPosEnd);if("currentDate"==startDate)startDate=todayDate;else if(0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+startDate+'"]').length&&0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+startDate+'"]').val().length){var $item=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+startDate+'"]');startDate=$item.datetimepicker("getDate")}else startDate=todayDate;if("currentDate"==endDate)endDate=todayDate;else if(0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+endDate+'"]').length&&0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+endDate+'"]').val().length){var $item=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+endDate+'"]');endDate=$item.datetimepicker("getDate")}else endDate=todayDate;startDate.setMinutes(0),startDate.setHours(0),endDate.setMinutes(0),endDate.setHours(0);var timeDiff=Math.abs(endDate.getTime()-startDate.getTime()),result=Math.round(timeDiff/864e5);result<0&&(result=0),elementsToReplace.push({oldValue:calculation.substr(i-1,calculation.indexOf("]",i)+1-(i-1)),newValue:result})}if(-1<calculation.indexOf("distance_")){var $target=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+targetID+'"]');for($target.attr("data-usedistance","true");-1!=(i=calculation.indexOf("distance_",i+1));){var distanceType="km",departAdPosEnd=calculation.indexOf("-",i+9)+1,departAdress=calculation.substr(i+9,calculation.indexOf("-",i)-(i+9)),departCityPosEnd=calculation.indexOf("-",departAdPosEnd)+1,departCity=calculation.substr(departAdPosEnd,calculation.indexOf("-",departAdPosEnd)-departAdPosEnd),departZipPosEnd=calculation.indexOf("-",departCityPosEnd)+1,departZip=calculation.substr(departCityPosEnd,calculation.indexOf("-",departCityPosEnd)-departCityPosEnd),departCountryPosEnd=calculation.indexOf("_",departZipPosEnd)+1,departCountry=calculation.substr(departZipPosEnd,calculation.indexOf("_",departZipPosEnd)-departZipPosEnd),arrivalAdPosEnd=calculation.indexOf("-",departCountryPosEnd)+1,arrivalAdress=calculation.substr(departCountryPosEnd,calculation.indexOf("-",departCountryPosEnd)-departCountryPosEnd),arrivalCityPosEnd=calculation.indexOf("-",arrivalAdPosEnd)+1,arrivalCity=calculation.substr(arrivalAdPosEnd,calculation.indexOf("-",arrivalAdPosEnd)-arrivalAdPosEnd),arrivalZipPosEnd=calculation.indexOf("-",arrivalCityPosEnd)+1,arrivalZip=calculation.substr(arrivalCityPosEnd,calculation.indexOf("-",arrivalCityPosEnd)-arrivalCityPosEnd),arrivalCountryPosEnd=calculation.indexOf("_",arrivalZipPosEnd)+1,arrivalCountry=calculation.substr(arrivalZipPosEnd,calculation.indexOf("_",arrivalZipPosEnd)-arrivalZipPosEnd);if(distanceType=calculation.substr(arrivalCountryPosEnd,calculation.indexOf("]",arrivalCountryPosEnd)-arrivalCountryPosEnd),""!=departAdress)if(0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+departAdress+'"]').length){var $item=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+departAdress+'"]');departAdress=$item.val()}else departAdress=0;if(""!=departCity)if(0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+departCity+'"]').length){var $item=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+departCity+'"]');departCity=$item.val()}else departCity=0;if(""!=departZip)if(0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+departZip+'"]').length){var $item=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+departZip+'"]');departZip=$item.val()}else departZip=0;if(""!=departCountry)if(0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+departCountry+'"]').length){var $item=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+departCountry+'"]');departCountry=$item.val()}else departCountry=0;if(""!=arrivalAdress)if(0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+arrivalAdress+'"]').length){var $item=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+arrivalAdress+'"]');arrivalAdress=$item.val()}else arrivalAdress=0;if(""!=arrivalCity)if(0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+arrivalCity+'"]').length){var $item=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+arrivalCity+'"]');arrivalCity=$item.val()}else arrivalCity=0;if(""!=arrivalZip)if(0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+arrivalZip+'"]').length){var $item=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+arrivalZip+'"]');arrivalZip=$item.val()}else arrivalZip=0;if(""!=arrivalCountry)if(0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+arrivalCountry+'"]').length){var $item=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+arrivalCountry+'"]');arrivalCountry=$item.val()}else arrivalCountry=0;0<$target.closest(".genSlide").find(".lfb_distanceError").length&&lfb_removeDistanceError(targetID,formID);var distanceCode=calculation.substr(i-1,calculation.indexOf("]",i)+1-(i-1)),distance=0;if(""!=$target.attr("data-distance")&&(distance=parseFloat($target.attr("data-distance"))),""==departAdress&&""==departCity&&""==departCountry&&""==arrivalAdress&&""==arrivalCity&&""==arrivalCountry&&""==departZip&&""==arrivalZip)lfb_showDistanceError(targetID,formID);else if(""==form.gmap_key)lfb_showDistanceError(targetID,formID),console.log("invalid gmap api key");else{var depart=departAdress+" "+departZip+" "+departCity+" "+departCountry,arrival=arrivalAdress+" "+arrivalZip+" "+arrivalCity+" "+arrivalCountry;$target.attr("data-departure")==depart&&arrival==$target.attr("data-arrival")||($target.attr("data-departure",depart),$target.attr("data-arrival",arrival),lfb_getDistanceCalc(distanceCode,formID,targetID,depart,arrival,distanceType))}elementsToReplace.push({oldValue:calculation.substr(i-1,calculation.indexOf("]",i)+1-(i-1)),newValue:distance})}}if(jQuery.each(elementsToReplace,function(){calculation=calculation.replace(this.oldValue,this.newValue)}),calculation=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"]').is("[data-isSubs]")&&itemData.isSinglePrice?calculation.replace(/\[total\]/g,form.priceSingle):calculation.replace(/\[total\]/g,form.price),-1<calculation.indexOf("[total_quantity]")&&(calculation=calculation.replace(/\[total_quantity\]/g,wpe_getTotalQuantities(formID,_stepID,targetID))),-1==calculation.indexOf("[price]")){for(i=0;-1!=(i=calculation.indexOf("{",i+1));){var charsToEnd=calculation.substr(i+1,calculation.indexOf("}",i+1)-(i+1));/\S/.test(charsToEnd)&&(calculation=calculation.substr(0,i+1)+" price ="+calculation.substr(i+1,calculation.length),i+=8)}if(calculation.indexOf("if")<0)calculation="price = "+calculation;else{var charsToStart=calculation.substr(0,calculation.indexOf("if"));/\S/.test(charsToStart)&&(calculation="price = "+calculation)}calculation=lfb_removeDoubleSpaces(calculation),calculation=calculation.replace(/price =\n if/g,"\nif"),calculation=calculation.replace(/price = if/g,"if"),calculation=calculation.replace(/price = \nif/g,"\nif"),calculation=calculation.replace(/price = \n if/g,"\n if")}else calculation=calculation.replace(/\[price\]/g,"price"),calculation=calculation.replace(/\[quantity\]/g,"price"),calculation=calculation.replace(/\[variable\]/g,"price"),calculation=lfb_removeDoubleSpaces(calculation);if("price ="!=calculation.trim())try{eval(calculation)}catch(e){console.log("wrong calculation : "+calculation)}return parseFloat(price)}function lfb_parseDate(e){var t=e;if("string"==typeof e){var a=e.match(/(\d+)/g);t=new Date(a[0],a[1]-1,a[2])}return t}function lfb_removeDoubleSpaces(e){return-1<(e=(e=e.replace(/\t/g,"")).replace(/  /g," ")).indexOf("  ")&&lfb_removeDoubleSpaces(e),e}function lfb_removeDistanceError(e,t){var a=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] #mainPanel .genSlide [data-itemid="'+e+'"]');if(0==a.closest(".genSlide").find('[data-itemid][data-usedistance="true"]:not([data-distance]):not([type="checkbox"]).checked,[data-itemid][data-usedistance="true"]:not([data-distance]):checked,[data-itemid][data-usedistance="true"]:not([data-distance])[data-type="slider"]').length&&0==a.closest(".genSlide").find('[data-itemid][data-usedistance="true"][data-distance="0"]:not([type="checkbox"]).checked,[data-itemid][data-usedistance="true"][data-distance="0"]:checked,[data-itemid][data-usedistance="true"][data-distance="0"][data-type="slider"]').length){a.closest(".genSlide").find(".btn-next").fadeIn(),a.closest(".genSlide").find(".lfb_btnNextContainer").fadeIn(),a.closest(".genSlide").find(".btn-next").removeClass("lfb_disabledBtn");var r=a.closest(".genSlide").find(".lfb_distanceError");r.fadeOut(),setTimeout(function(){r.remove()},300)}}function lfb_showDistanceError(e,t){var a=wpe_getForm(t),r=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] #mainPanel .genSlide [data-itemid="'+e+'"]');r.closest(".genSlide").find(".btn-next").addClass("lfb_disabledBtn"),r.closest(".genSlide").find(".btn-next").hide(),0==r.closest(".genSlide").find(".lfb_distanceError").length&&r.closest(".genSlide").find(".lfb_btnNextContainer").before('<div class="lfb_distanceError alert alert-danger"><p>'+a.txtDistanceError+"</p></div>");var i=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] [data-itemid="'+e+'"]').closest(".genSlide").attr("data-stepid");"final"!=a.step||a.backFomFinal||(a.backFomFinal=!0,wpe_changeStep(i,t)),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"]').trigger("lfb_distanceError")}function wpe_updateLabelItem(e,t){form=wpe_getForm(t),e.is(".dropzone")||e.closest(".itemBloc").find("label").each(function(){-1<jQuery(this).html().indexOf(":")&&0==jQuery(this).closest(".switch").length&&jQuery(this).html(e.attr("data-original-label"))})}function wpe_updatePrice(d,l){var u=!1;form=wpe_getForm(d),wpe_updatePlannedSteps(d),wpe_updateStep(d),lfb_updateShowItems(d),form.lastPrice=form.price,form.price=form.initialPrice,form.priceSingle=0;for(var e=lfb_lastSteps.slice(),m=0,f=0,t=0;t<form.variables.length;t++)form.variables[t].value=form.variables[t].defaultValue;"final"!=form.step&&-1==jQuery.inArray(parseInt(form.step),e)?e.push(parseInt(form.step)):"final"==form.step&&-1==jQuery.inArray("final",e)&&e.push("final");for(t=0;t<e.length;t++){var c=e[t];"final"!=c&&0==parseInt(c)||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] #mainPanel .genSlide[data-stepid="'+c+'"]').is(".lfb_disabled")||($panel=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] #mainPanel .genSlide[data-stepid="'+c+'"]'),$panel.find("[data-itemid]").each(function(){if((jQuery(this).is("div.selectable.checked")||jQuery(this).is('div[data-type="slider"]')||jQuery(this).is("a.lfb_button.checked")||jQuery(this).is("input[type=checkbox]:checked")||jQuery(this).is("select[data-itemid][data-price]")||jQuery(this).is('input[type=number][data-valueasqt="1"]'))&&!jQuery(this).is(".lfb_disabled")&&0==jQuery(this).closest(".itemBloc.lfb_disabled").length&&!jQuery(this).is(".lfb_disabled"))if(jQuery(this).is('[data-singleprice="true"]')&&(u=!0),jQuery(this).is("[data-usecalculation]")||jQuery(this).data("price",jQuery(this).attr("data-price")),jQuery(this).is("[data-usecalculationvar]")&&!jQuery(this).is('[data-usecalculationvar="0"]')&&lfb_updateVariable(form,jQuery(this).attr("data-usecalculationvar"),jQuery(this).attr("data-calculationvar"),jQuery(this).attr("data-itemid")),jQuery(this).is("[data-usecalculation]")&&(c!=form.step&&jQuery(this).is(".lfb_executed")?jQuery(this).attr("data-price",jQuery(this).data("price")):jQuery(this).data("price",lfb_executeCalculation(jQuery(this).attr("data-calculation"),d,jQuery(this).attr("data-itemid")))),0<jQuery(this).find(".icon_quantity").length||0<jQuery(this).find(".wpe_qtfield").length||jQuery(this).is('[data-type="slider"]')||jQuery(this).is('input[type=number][data-valueasqt="1"]')){var a="",e=0,t=99999999999999;if(0<jQuery(this).find(".icon_quantity").length?(a=jQuery(this).find(".icon_quantity").html(),e=parseFloat(jQuery(this).find(".quantityBtns").attr("data-min")),t=parseFloat(jQuery(this).find(".quantityBtns").attr("data-max"))):0<jQuery(this).find(".wpe_qtfield").length?(a=jQuery(this).find(".wpe_qtfield").val(),e=jQuery(this).find(".wpe_qtfield").attr("min"),t=jQuery(this).find(".wpe_qtfield").attr("max")):jQuery(this).is('[data-type="slider"]')?(a=parseFloat(jQuery(this).slider("value")),e=jQuery(this).attr("data-min"),t=jQuery(this).attr("data-max")):jQuery(this).is('input[type=number][data-valueasqt="1"]')&&(a=parseFloat(jQuery(this).val()),e=jQuery(this).attr("min"),t=jQuery(this).is("[max]")?jQuery(this).attr("max"):1e17),!jQuery(this).is("[data-usecalculationqt]")||jQuery(this).is(".lfb_changed")||void 0!==l&&jQuery(this).attr("data-itemid")==l||(a=lfb_executeCalculation(jQuery(this).attr("data-calculationqt"),d,jQuery(this).attr("data-itemid")),isNaN(a)&&(a=0),t<a&&(a=t),a<e&&(a=e),0<jQuery(this).find(".icon_quantity").length?(jQuery(this).find(".icon_quantity").html(a),0<jQuery(this).find(".wpe_sliderQt").length&&jQuery(this).find(".wpe_sliderQt").slider("value",parseFloat(a)),jQuery(this).find(".quantityBtns").addClass("lfb-hidden")):0<jQuery(this).find(".wpe_qtfield").length?jQuery(this).find(".wpe_qtfield").val(a):jQuery(this).is('[data-type="slider"]')?jQuery(this).slider("value",parseFloat(a)):jQuery(this).is('input[type="number"]')&&jQuery(this).val(a)),jQuery(this).is("[data-distanceqt]")&&(lfb_executeCalculation(jQuery(this).attr("data-distanceqt"),d,jQuery(this).attr("data-itemid")),jQuery(this).is("[data-distance]")&&(a=parseFloat(jQuery(this).attr("data-distance")).toFixed(2)),a<e?a=e:t<a&&(a=t),0<jQuery(this).find(".wpe_qtfield").length?jQuery(this).find(".wpe_qtfield").val(a):0<jQuery(this).find(".wpe_sliderQt").length?(jQuery(this).find(".wpe_sliderQt").slider("value",a),jQuery(this).find(".icon_quantity").html(a)):0<jQuery(this).find(".quantityBtns").length?jQuery(this).find(".icon_quantity").html(a):jQuery(this).is('[data-type="slider"]')&&jQuery(this).slider("value",a),jQuery(this).is("[data-usecalculation]")&&jQuery(this).data("price",lfb_executeCalculation(jQuery(this).attr("data-calculation"),d,jQuery(this).attr("data-itemid")))),jQuery(this).attr("data-resqt",a),jQuery(this).is("[data-price]"))if("-"==jQuery(this).data("operation"))jQuery(this).data("resprice",0-parseFloat(jQuery(this).data("price"))*parseFloat(a)),jQuery(this).is('[data-singleprice="true"]')?form.priceSingle-=parseFloat(jQuery(this).data("price"))*parseFloat(a):form.price-=parseFloat(jQuery(this).data("price"))*parseFloat(a);else if("x"==jQuery(this).data("operation"))for(var r=0;r<parseFloat(a);r++)0==r?(form.price=form.price,jQuery(this).data("resprice",form.price)):jQuery(this).is('[data-singleprice="true"]')?(jQuery(this).is('[data-addtototal!="no"]')&&(form.priceSingle+=f*parseFloat(jQuery(this).data("price"))/100),jQuery(this).data("resprice",f*parseFloat(jQuery(this).data("price"))/100)):(jQuery(this).is('[data-addtototal!="no"]')&&(form.price+=m*parseFloat(jQuery(this).data("price"))/100),jQuery(this).data("resprice",form.price*parseFloat(jQuery(this).data("price"))/100));else if("/"==jQuery(this).data("operation"))for(r=0;r<parseFloat(a);r++)jQuery(this).data("resprice",0-form.price*parseFloat(jQuery(this).data("price"))/100),jQuery(this).is('[data-singleprice="true"]')?jQuery(this).is('[data-addtototal!="no"]')&&(form.priceSingle=form.price-form.price*parseFloat(jQuery(this).data("price"))/100):jQuery(this).is('[data-addtototal!="no"]')&&(form.price=form.price-form.price*parseFloat(jQuery(this).data("price"))/100);else{var i=-2;if(jQuery(this).data("reduc")&&0<jQuery(this).data("reducqt").length){var o=jQuery(this).data("reducqt");o=o.split("*");var p=new Array,s=0;jQuery.each(o,function(e){var t=o[e].split("|");p.push(t[1]),parseFloat(t[0])<=parseFloat(a)&&(i=e),(parseFloat(t[0])<s||0==s)&&(s=parseFloat(t[0]))})}if(0<=i){var n=parseFloat(p[i])*parseFloat(a);"0"==jQuery(this).attr("data-price")&&(n=parseFloat(p[i])*(parseFloat(a)-s)),jQuery(this).data("resprice",n),jQuery(this).is('[data-singleprice="true"]')?jQuery(this).is('[data-addtototal!="no"]')&&(form.priceSingle+=parseFloat(n)):jQuery(this).is('[data-addtototal!="no"]')&&(form.price+=parseFloat(n)),"left"==form.currencyPosition?jQuery(this).is('[data-showprice="1"]')?("+"==jQuery(this).data("operation")?(jQuery(this).attr("title",jQuery(this).data("originaltitle")+" : "+form.currency+wpe_formatPrice(p[i],d)),jQuery(this).attr("data-original-label",jQuery(this).data("originallabel")+" : "+form.currency+wpe_formatPrice(p[i],d)),jQuery(this).attr("data-original-title",jQuery(this).data("originaltitle")+" : "+form.currency+wpe_formatPrice(p[i],d))):"-"==jQuery(this).data("operation")?(jQuery(this).attr("title",jQuery(this).data("originaltitle")+" : -"+form.currency+wpe_formatPrice(p[i],d)),0!=form.disableTipMobile&&wpe_is_touch_device()||jQuery(this).is('[data-type="slider"]')||jQuery(this).is(".lfb_button")||""!=form.imgTitlesStyle||jQuery(this).b_tooltip("fixTitle"),jQuery(this).attr("data-original-label",jQuery(this).data("originallabel")+" : -"+form.currency+wpe_formatPrice(p[i],d)),jQuery(this).attr("data-original-title",jQuery(this).data("originaltitle")+" : -"+form.currency+wpe_formatPrice(p[i],d))):"x"==jQuery(this).data("operation")?(jQuery(this).attr("title",jQuery(this).data("originaltitle")+" : +"+wpe_formatPrice(p[i],d)+"%"),0!=form.disableTipMobile&&wpe_is_touch_device()||jQuery(this).is('[data-type="slider"]')||jQuery(this).is(".lfb_button")||""!=form.imgTitlesStyle||jQuery(this).b_tooltip("fixTitle"),jQuery(this).attr("data-original-label",jQuery(this).data("originallabel")+" : +"+form.currency+wpe_formatPrice(p[i],d)),jQuery(this).attr("data-original-title",jQuery(this).data("originaltitle")+" : +"+wpe_formatPrice(p[i],d)+"%")):(jQuery(this).attr("title",jQuery(this).data("originaltitle")+" : -"+wpe_formatPrice(p[i],d)+"%"),0!=form.disableTipMobile&&wpe_is_touch_device()||jQuery(this).is('[data-type="slider"]')||jQuery(this).is(".lfb_button")||""!=form.imgTitlesStyle||jQuery(this).b_tooltip("fixTitle"),jQuery(this).attr("data-original-label",jQuery(this).data("originallabel")+" : -"+form.currency+wpe_formatPrice(p[i],d)),jQuery(this).attr("data-original-title",jQuery(this).data("originaltitle")+" : -"+wpe_formatPrice(p[i],d)+"%")),0!=form.disableTipMobile&&wpe_is_touch_device()||jQuery(this).is('[data-type="slider"]')||jQuery(this).is(".lfb_button")||""!=form.imgTitlesStyle||jQuery(this).b_tooltip("fixTitle"),wpe_updateLabelItem(jQuery(this),d)):(jQuery(this).attr("data-original-label",jQuery(this).data("originallabel")),jQuery(this).is("[data-tooltiptext]")?jQuery(this).attr("data-original-title",jQuery(this).attr("data-tooltiptext")):jQuery(this).attr("data-original-title",jQuery(this).data("originaltitle"))):jQuery(this).is('[data-showprice="1"]')?("+"==jQuery(this).attr("data-operation")?(jQuery(this).attr("title",jQuery(this).data("originaltitle")+" : "+wpe_formatPrice(p[i],d)+form.currency),jQuery(this).attr("data-original-label",jQuery(this).data("originallabel")+" : "+wpe_formatPrice(p[i],d)+form.currency),jQuery(this).attr("data-original-title",jQuery(this).data("originaltitle")+" : "+wpe_formatPrice(p[i],d)+form.currency)):"-"==jQuery(this).attr("data-operation")?(jQuery(this).attr("title",jQuery(this).data("originaltitle")+" : -"+ +wpe_formatPrice(p[i],d)),jQuery(this).attr("data-original-label",jQuery(this).data("originallabel")+" : -"+wpe_formatPrice(p[i],d)+form.currency),jQuery(this).attr("data-original-title",jQuery(this).data("originaltitle")+" : -"+wpe_formatPrice(p[i],d)+form.currency)):"x"==jQuery(this).attr("data-operation")?(jQuery(this).attr("data-original-label",jQuery(this).data("originallabel")+" : +"+wpe_formatPrice(p[i],d)+form.currency),jQuery(this).attr("title",jQuery(this).data("originaltitle")+" : +"+wpe_formatPrice(p[i],d)+"%"),0!=form.disableTipMobile&&wpe_is_touch_device()||jQuery(this).is('[data-type="slider"]')||jQuery(this).is(".lfb_button")||""!=form.imgTitlesStyle||jQuery(this).b_tooltip("fixTitle"),jQuery(this).attr("data-original-label",jQuery(this).data("originallabel")+" : +"+wpe_formatPrice(p[i],d)+form.currency),jQuery(this).attr("data-original-title",jQuery(this).data("originaltitle")+" : +"+wpe_formatPrice(p[i],d)+"%")):(jQuery(this).attr("data-original-label",jQuery(this).data("originallabel")+" : -"+wpe_formatPrice(p[i],d)+form.currency),jQuery(this).attr("title",jQuery(this).data("originaltitle")+" : -"+wpe_formatPrice(p[i],d)+"%"),0!=form.disableTipMobile&&wpe_is_touch_device()||jQuery(this).is('[data-type="slider"]')||jQuery(this).is(".lfb_button")||""!=form.imgTitlesStyle||jQuery(this).b_tooltip("fixTitle"),jQuery(this).attr("data-original-title",jQuery(this).data("originaltitle")+" : -"+wpe_formatPrice(p[i],d)+"%")),0!=form.disableTipMobile&&wpe_is_touch_device()||jQuery(this).is('[data-type="slider"]')||jQuery(this).is(".lfb_button")||""!=form.imgTitlesStyle||jQuery(this).b_tooltip("fixTitle"),wpe_updateLabelItem(jQuery(this),d)):(jQuery(this).attr("data-original-label",jQuery(this).data("originallabel")),jQuery(this).is("[data-tooltiptext]")?jQuery(this).attr("data-original-title",jQuery(this).attr("data-tooltiptext")):jQuery(this).attr("data-original-title",jQuery(this).data("originaltitle"))),jQuery(this).find(".quantityBtns").is(".open")&&""==form.imgTitlesStyle&&(0!=form.disableTipMobile&&wpe_is_touch_device()||jQuery(this).b_tooltip("show"))}else jQuery(this).data("resprice",parseFloat(jQuery(this).data("price"))*parseFloat(a)),form.price=parseFloat(form.price),form.priceSingle=parseFloat(form.priceSingle),jQuery(this).is('[data-singleprice="true"]')?jQuery(this).is('[data-addtototal!="no"]')&&(form.priceSingle+=parseFloat(jQuery(this).data("price"))*parseFloat(a)):jQuery(this).is('[data-addtototal!="no"]')&&(form.price+=parseFloat(jQuery(this).data("price"))*parseFloat(a)),wpe_updateItemTitleNoReduc(jQuery(this),form),jQuery(this).find(".quantityBtns").is(".open")&&""==form.imgTitlesStyle&&(0!=form.disableTipMobile&&wpe_is_touch_device()||jQuery(this).b_tooltip("show"))}else jQuery(this).data("resprice","0")}else jQuery(this).data("resqt","0"),jQuery(this).data("price")?("-"==jQuery(this).data("operation")?(jQuery(this).data("resprice",0-parseFloat(jQuery(this).data("price"))),jQuery(this).is('[data-singleprice="true"]')?jQuery(this).is('[data-addtototal!="no"]')&&(form.priceSingle-=parseFloat(jQuery(this).data("price"))):jQuery(this).is('[data-addtototal!="no"]')&&(form.price-=parseFloat(jQuery(this).data("price")))):"x"==jQuery(this).data("operation")?jQuery(this).is('[data-singleprice="true"]')?(jQuery(this).data("resprice",form.priceSingle*parseFloat(jQuery(this).data("price"))/100),jQuery(this).is('[data-addtototal!="no"]')&&(form.priceSingle=form.priceSingle+form.priceSingle*parseFloat(jQuery(this).data("price"))/100)):(jQuery(this).data("resprice",form.price*parseFloat(jQuery(this).data("price"))/100),jQuery(this).is('[data-addtototal!="no"]')&&(form.price=form.price+form.price*parseFloat(jQuery(this).data("price"))/100)):"/"==jQuery(this).attr("data-operation")?jQuery(this).is('[data-singleprice="true"]')?(jQuery(this).data("resprice",0-form.priceSingle*parseFloat(jQuery(this).data("price"))/100),jQuery(this).is('[data-addtototal!="no"]')&&(form.priceSingle=form.priceSingle-form.priceSingle*parseFloat(jQuery(this).data("price"))/100)):(jQuery(this).data("resprice",0-form.price*parseFloat(jQuery(this).data("price"))/100),jQuery(this).is('[data-addtototal!="no"]')&&(form.price=form.price-form.price*parseFloat(jQuery(this).data("price"))/100)):(jQuery(this).data("resprice",jQuery(this).data("price")),jQuery(this).is('[data-singleprice="true"]')?jQuery(this).is('[data-addtototal!="no"]')&&(form.priceSingle+=parseFloat(jQuery(this).data("price"))):jQuery(this).is('[data-addtototal!="no"]')&&(form.price=parseFloat(form.price)+parseFloat(jQuery(this).data("price")))),wpe_updateItemTitleNoReduc(jQuery(this),form)):jQuery(this).data("resprice","0");jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d+'"]').trigger("priceUpdated",[jQuery(this).attr("data-itemid")]),lfb_updateItemData(form,jQuery(this).attr("data-itemid"))})),m=form.price,f=form.priceSingle}0<form.reduction&&(form.reductionType&&"%"==form.reductionType?0<form.priceSingle?form.reductionResult=form.priceSingle*form.reduction/100:form.reductionResult=form.price*form.reduction/100:form.reductionResult=form.reduction,form.reductionResult=parseFloat(form.reductionResult),0==form.priceSingle?form.price-=form.reductionResult:form.priceSingle-=form.reductionResult),(!form.price||form.price<0)&&(form.price=0),u&&form.priceSingle&&!(form.priceSingle<0)||(form.priceSingle=0);var a=/^\d+(\.\d{2})?$/;a.test(form.price)||(form.price=parseFloat(form.price).toFixed(2));try{a.test(form.priceSingle)||(form.priceSingle=parseFloat(form.priceSingle).toFixed(2))}catch(e){}var r=form.currency+""+wpe_formatPrice(parseFloat(form.priceSingle),d),i=form.currency+""+wpe_formatPrice(parseFloat(form.price),d),o=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"]').attr("data-rangelabelbetween"),p=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"]').attr("data-rangelabeland");if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"]').is("[data-totalrange]")&&0<parseFloat(form.price)){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price').is(".lfb_notNull")||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price').addClass("lfb_notNull");var s=parseInt(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"]').attr("data-totalrange")),n=parseFloat(form.price)-s/2,_=parseFloat(form.price)+s/2;jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"]').is('[data-rangemode="percent"]')&&(n=parseFloat(form.price)-parseFloat(form.price)*s/100,_=parseFloat(form.price)+parseFloat(form.price)*s/100),n<0&&(n=0),i=o+"<br/><strong>"+form.currency+wpe_formatPrice(n,d)+"</strong><br/>"+p+"<br/><strong>"+form.currency+wpe_formatPrice(_,d)+"</strong>"}else jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price').removeClass("lfb_notNull");if("left"!=form.currencyPosition)if(i=wpe_formatPrice(form.price,d)+""+form.currency,r=wpe_formatPrice(form.priceSingle,d)+""+form.currency,jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"]').is("[data-totalrange]")&&0<parseFloat(form.price)){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price').is(".lfb_notNull")||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price').addClass("lfb_notNull");s=parseInt(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"]').attr("data-totalrange")),n=parseFloat(form.price)-s/2,_=parseFloat(form.price)+s/2;jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"]').is('[data-rangemode="percent"]')&&(n=parseFloat(form.price)-parseFloat(form.price)*s/100,_=parseFloat(form.price)+parseFloat(form.price)*s/100),n<0&&(n=0),i=o+"<br/><strong>"+wpe_formatPrice(n,d)+form.currency+"</strong><br/>"+p+"<br/><strong>"+wpe_formatPrice(_,d)+form.currency+"</strong>"}else jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price').removeClass("lfb_notNull");if(1==form.showTotalBottom&&(u&&0<form.priceSingle?form.price<0?(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .lfb_totalBottom').removeClass("lfb_priceSingle"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .lfb_totalBottom>span.lfb_subPrice').remove(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .lfb_totalBottom>br').remove()):(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .lfb_totalBottom').addClass("lfb_priceSingle"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .lfb_totalBottom').each(function(){0==jQuery(this).find(".lfb_subPrice").length&&jQuery(this).find(">span:eq(0)").after('<br/><span class="lfb_subPrice">+ '+i+"</span>")})):(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .lfb_totalBottom').removeClass("lfb_priceSingle"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .lfb_totalBottom>span.lfb_subPrice').remove(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .lfb_totalBottom>br').remove()),u&&0<form.priceSingle?form.price<=0?(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .lfb_totalBottom> span:first-child').html(r),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .lfb_totalBottom> span.lfb_subPrice').hide(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .lfb_totalBottom> span:eq(2)').hide(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .lfb_totalBottom .lfb_subTxtBottom').hide()):(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .lfb_totalBottom> span.lfb_subPrice').show(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .lfb_totalBottom> span:eq(2)').show(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .lfb_totalBottom> span:first-child').html(r),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .lfb_totalBottom> span.lfb_subPrice').html("+ "+i),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .lfb_totalBottom .lfb_subTxtBottom').show()):(form.price<=0?jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .lfb_totalBottom .lfb_subTxtBottom').hide():jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .lfb_totalBottom .lfb_subTxtBottom').show(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .lfb_totalBottom> span:first-child').html(i))),0==form.showSteps){u&&0<form.priceSingle?form.price<0?(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price').removeClass("lfb_priceSingle"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price>span.lfb_subPrice').remove()):(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price').addClass("lfb_priceSingle"),0==jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price> span.lfb_subPrice').length&&jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price>span:eq(0)').after('<span class="lfb_subPrice">+ '+i+"</span>")):(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price').removeClass("lfb_priceSingle"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price>span.lfb_subPrice').remove()),u&&0<form.priceSingle?form.price<=0?(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price> span:first-child').css("top","6px"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price> span:first-child').html(r),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price> span.lfb_subPrice').hide(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price> span:eq(2)').hide()):(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price> span:first-child').css("top","-5px"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price> span.lfb_subPrice').show(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price> span:eq(2)').show(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price> span:first-child').html(r),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price> span.lfb_subPrice').html("+ "+i)):(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"]').is('[data-isSubs="true"]')?jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price> span:first-child').css("position","relative").css("top","6px"):jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price> span:first-child').css("position","relative").css("top","0px"),0<form.price?(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price> span:first-child').css("position","relative").css("top","0px"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price> span:eq(1)').show()):jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price> span:eq(1)').hide(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price> span:first-child').html(i)),0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price> span:first-child').length&&(8<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price> span:first-child').html().length?16<=parseInt(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price').css("font-size"))&&jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price').css("font-size","16px"):jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price').css("font-size","18px"),9<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price > span:first-child').html().length&&14<=parseInt(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price').css("font-size"))&&jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price').css("font-size","14px"),10<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price > span:first-child').html().length&&11<=parseInt(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price').css("font-size"))&&jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price').css("font-size","11px"));var y=form.price;jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"]').is('[data-isSubs="true"]')&&"single"==form.progressBarPriceType&&(y=form.priceSingle);var b=100*y/form.priceMax;1==form.showInitialPrice&&(b=100*(y-parseFloat(form.initialPrice))/form.priceMax),100<b&&(b=100),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar').css("width",b+"%"),jQuery("body").is(".rtl")?jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price').animate({right:b+"%"},70):jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price').animate({left:b+"%"},70)}var h=form.currency+""+wpe_formatPrice(parseFloat(form.price).toFixed(2),d),j=form.currency+""+wpe_formatPrice(parseFloat(form.priceSingle).toFixed(2),d);if("left"!=form.currencyPosition&&(h=wpe_formatPrice(parseFloat(form.price).toFixed(2),d)+""+form.currency,j=wpe_formatPrice(parseFloat(form.priceSingle).toFixed(2),d)+""+form.currency),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d+'"] #lfb_summary table #lfb_summaryTotal>span:eq(0)').html(h),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"]').is("[data-totalrange]")&&0<parseFloat(form.price)){o=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"]').attr("data-rangelabelbetween"),p=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"]').attr("data-rangelabeland"),s=parseInt(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"]').attr("data-totalrange")),n=parseFloat(form.price)-s/2,_=parseFloat(form.price)+s/2;if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"]').is('[data-rangemode="percent"]')&&(n=parseFloat(form.price)-parseFloat(form.price)*s/100,_=parseFloat(form.price)+parseFloat(form.price)*s/100),n<0&&(n=0),i=o+"<br/><strong>"+form.currency+wpe_formatPrice(n,d)+"</strong><br/>"+p+"<br/><strong>"+form.currency+wpe_formatPrice(_,d)+"</strong>","left"!=form.currencyPosition){s=parseInt(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"]').attr("data-totalrange"));i=o+"<br/><strong>"+wpe_formatPrice(n,d)+form.currency+"</strong><br/>"+p+"<br/><strong>"+wpe_formatPrice(_,d)+form.currency+"</strong>"}jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d+'"] #lfb_summary table #lfb_summaryTotal>span:eq(0)').html(i.replace(/<br\/>/g," "))}wpe_updateSummary(d),u&&0<form.priceSingle?(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] #finalPrice span:eq(0)').html(r),form.price<=0?(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] #finalPrice span:eq(1)').css("display","none"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] #finalPrice span:eq(2)').css("display","none"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d+'"] #lfb_summary table #lfb_summaryTotal>span:eq(0)').html("<strong>"+j+"</strong>")):(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] #finalPrice span:eq(2)').css("display","inline-block"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] #finalPrice span:eq(1)').html("+"+i+form.subscriptionText),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] #finalPrice span:eq(1)').css("display","block"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d+'"] #lfb_summary table #lfb_summaryTotal>span:eq(0)').html("<strong>"+j+"</strong> <br/>+"+h))):0==form.priceSingle&&0==form.price?(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] #finalPrice span:eq(1)').css("display","none"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] #finalPrice span:eq(2)').css("display","none"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] #finalPrice span:eq(0)').html(i),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] #finalPrice span:eq(1)').html(form.subscriptionText)):0==form.priceSingle&&0<form.price?(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] #finalPrice span:eq(0)').html(i),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] #finalPrice span:eq(1)').html(form.subscriptionText),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] #finalPrice span:eq(2)').css("display","inline-block"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] #finalPrice span:eq(1)').css("display","inline-block")):(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] #finalPrice span:eq(2)').css("display","inline-block"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] #finalPrice span:eq(1)').css("display","inline-block"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] #finalPrice span:eq(0)').html(i)),lfb_updateShowSteps(d),lfb_updateShowItems(d),lfb_updateLayerImages(d),wpe_updateStep(d),lfb_updateRichTextValues(d)}function wpe_updateItemTitleNoReduc(e,t){var a=t.formID;"left"==t.currencyPosition?e.is('[data-showprice="1"]')?("+"==e.data("operation")?(e.attr("title",e.data("originaltitle")+" : "+t.currency+wpe_formatPrice(e.data("price"),a)),e.attr("data-original-label",e.data("originallabel")+" : "+t.currency+wpe_formatPrice(e.data("price"),a)),e.attr("data-original-title",e.data("originaltitle")+" : "+t.currency+wpe_formatPrice(e.data("price"),a))):"-"==e.data("operation")?(e.attr("data-original-label",e.data("originallabel")+" : -"+t.currency+wpe_formatPrice(e.data("price"),a)),e.attr("title",e.data("originaltitle")+" : -"+t.currency+wpe_formatPrice(e.data("price"),a)),0!=t.disableTipMobile&&wpe_is_touch_device()||e.is('[data-type="slider"]')||e.is(".lfb_button")||""!=t.imgTitlesStyle||e.b_tooltip("fixTitle"),e.attr("data-original-label",e.data("originallabel")+" : -"+t.currency+wpe_formatPrice(e.data("price"),a)),e.attr("data-original-title",e.data("originaltitle")+" : -"+t.currency+wpe_formatPrice(e.data("price"),a))):"x"==e.data("operation")?(e.attr("title",e.data("originaltitle")+" : +"+wpe_formatPrice(e.data("price"),a)+"%"),0!=t.disableTipMobile&&wpe_is_touch_device()||e.is('[data-type="slider"]')||e.is(".lfb_button")||""!=t.imgTitlesStyle||e.b_tooltip("fixTitle"),e.attr("data-original-label",e.data("originallabel")+" : +"+wpe_formatPrice(e.data("price"),a)+"%"),e.attr("data-original-title",e.data("originaltitle")+" : +"+wpe_formatPrice(e.data("price"),a)+"%")):(e.attr("title",e.data("originaltitle")+" : -"+wpe_formatPrice(e.data("price"),a)+"%"),0!=t.disableTipMobile&&wpe_is_touch_device()||e.is('[data-type="slider"]')||e.is(".lfb_button")||""!=t.imgTitlesStyle||e.b_tooltip("fixTitle"),e.attr("data-original-label",e.data("originallabel")+" : -"+wpe_formatPrice(e.data("price"),a)+"%"),e.attr("data-original-title",e.data("originaltitle")+" : -"+wpe_formatPrice(e.data("price"),a)+"%")),0!=t.disableTipMobile&&wpe_is_touch_device()||e.is('[data-type="slider"]')||e.is(".lfb_button")||""!=t.imgTitlesStyle||e.b_tooltip("fixTitle"),wpe_updateLabelItem(e,a)):e.is("[data-tooltiptext]")?e.attr("data-original-title",jQuery(this).attr("data-tooltiptext")):e.attr("data-original-title",e.data("originaltitle")):e.is('[data-showprice="1"]')?("+"==e.attr("data-operation")?(e.attr("title",e.data("originaltitle")+" : "+wpe_formatPrice(e.data("price"),a)+t.currency),e.attr("data-original-title",e.data("originaltitle")+" : "+wpe_formatPrice(e.data("price"),a)+t.currency)):"-"==e.attr("data-operation")?(e.attr("title",e.data("originaltitle")+" : -"+ +wpe_formatPrice(e.data("price"),a)),0!=t.disableTipMobile&&wpe_is_touch_device()||e.is('[data-type="slider"]')||e.is(".lfb_button")||""!=t.imgTitlesStyle||e.b_tooltip("fixTitle"),e.attr("data-original-title",e.data("originaltitle")+" : -"+wpe_formatPrice(e.data("price"),a)+t.currency)):"x"==e.attr("data-operation")?(e.attr("title",e.data("originaltitle")+" : +"+wpe_formatPrice(e.data("price"),a)+"%"),0!=t.disableTipMobile&&wpe_is_touch_device()||e.is('[data-type="slider"]')||e.is(".lfb_button")||""!=t.imgTitlesStyle||e.b_tooltip("fixTitle"),e.attr("data-original-title",e.data("originaltitle")+" : +"+wpe_formatPrice(e.data("price"),a)+"%")):(e.attr("title",e.data("originaltitle")+" : -"+wpe_formatPrice(e.data("price"),a)+"%"),0!=t.disableTipMobile&&wpe_is_touch_device()||e.is('[data-type="slider"]')||e.is(".lfb_button")||""!=t.imgTitlesStyle||e.b_tooltip("fixTitle"),e.attr("data-original-title",e.data("originaltitle")+" : -"+wpe_formatPrice(e.data("price"),a)+"%")),0!=t.disableTipMobile&&wpe_is_touch_device()||e.is('[data-type="slider"]')||e.is(".lfb_button")||""!=t.imgTitlesStyle||e.b_tooltip("fixTitle"),wpe_updateLabelItem(e,a)):e.is("[data-tooltiptext]")?e.attr("data-original-title",jQuery(this).attr("data-tooltiptext")):e.attr("data-original-title",e.data("originaltitle")),0<e.parent().children(".lfb_imgTitle").length&&e.is("[data-original-title]")&&e.parent().children(".lfb_imgTitle").html(e.attr("data-original-title"))}function wpe_isDecimal(e){if(""==e)return!1;var t;for(t in e)if(-1=="0123456789".indexOf(e[t]))return!1;return!0}function wpe_changeContentSlide(e,t){var a=jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+t+'"] #mainPanel .genSlide[data-stepid="'+form.step+'"]').find(".genContent").find(".genContentSlide.active").index();"left"==e?0<a?a--:a=jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+t+'"] #mainPanel .genSlide[data-stepid="'+form.step+'"]').find(".genContent").find(".genContentSlide").length:a<jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+t+'"] #mainPanel .genSlide[data-stepid="'+form.step+'"]').find(".genContent").find(".genContentSlide").length-1?a++:a=0,jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+t+'"] #mainPanel .genSlide[data-stepid="'+form.step+'"]').find(".genContent").find(".genContentSlide.active").fadeOut(500,function(){jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+t+'"] #mainPanel .genSlide[data-stepid="'+form.step+'"]').find(".genContent").find(".genContentSlide.active").removeClass("active"),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+t+'"] #mainPanel .genSlide[data-stepid="'+form.step+'"]').find(".genContent").find(".genContentSlide").eq(a).delay(200).fadeIn(500,function(){jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+t+'"] #mainPanel .genSlide[data-stepid="'+form.step+'"]').find(".genContent").find(".genContentSlide").eq(a).delay(250).addClass("active")})})}function wpe_toggleField(e,a){var r=wpe_getForm(a);jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #field_'+e+"_cb").is(":checked")?(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #field_'+e).addClass("opened"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #field_'+e).slideDown(250)):(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #field_'+e).removeClass("opened"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #field_'+e).slideUp(250)),setTimeout(function(){var e=jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+r.step+'"] .stepTitle').height(),t=jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid='+r.step+"] .genContent").outerHeight()+parseInt(jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel').css("padding-bottom"))+102+e;"final"==r.step&&(t-=80),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel').animate({minHeight:t})},300)}function wpe_finalStep(t){var a=wpe_getForm(t);if(a.step++,1==a.enablePdfDownload){var e=window.open(a.homeUrl+"/index.php?EPFormsBuilder=downloadMyOrder","_blank");"null"!=typeof e&&null!=e&&(e.focus(),setTimeout(function(){e.close()},300))}jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"]').trigger("formSent"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+t+'"] #lfb_loader').delay(800).fadeOut(2*a.animationsSpeed),0==a.redirectionDelay&&(a.redirectionDelay=1),setTimeout(function(){var e=lfb_getRedirectionURL(t);""!=e&&"#"!=e&&" "!=e&&(""!=a.urlVariables&&-1<e.indexOf("?")&&a.urlVariables.replace("?","&"),document.location.href=e+a.urlVariables)},1e3*a.redirectionDelay)}function wpe_updateStep(i){var a=wpe_getForm(i);if(1==a.showSteps){var o=new Array,e=!1;jQuery.each(lfb_plannedSteps,function(){e||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide[data-stepid="'+this+'"]').is(".lfb_disabled")||!(0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide[data-stepid="'+this+'"] .lfb_item:not(.lfb-hidden)').length||0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide[data-stepid="'+this+'"] .lfb_distanceError').length)||o.push(this)});var r=0;jQuery.each(o,function(e,t){parseInt(t)==parseInt(a.step)&&(r=e)}),0==++r&&(r=1),"final"==a.step&&(r=o.length+1);var t=o.length+1;t<r&&(r=t);var p=100*r/t;jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] .genPrice .progress .progress-bar-price> span:first-child').html(r+"/"+t),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] .genPrice .progress .progress-bar').css("width",p+"%")}else if(3==a.showSteps){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #lfb_stepper *:not(#lfb_stepperBar)').remove();e=!1,o=new Array;jQuery.each(lfb_plannedSteps,function(){e||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide[data-stepid="'+this+'"]').is(".lfb_disabled")||!(0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide[data-stepid="'+this+'"] .lfb_item:not(.lfb-hidden)').length||0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide[data-stepid="'+this+'"] .lfb_distanceError').length)||o.push(this)});var s=!1,n=parseInt(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] .genSlide.lfb_activeStep').attr("data-stepid"));jQuery.each(o,function(e){var t=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #mainPanel .genSlide[data-stepid="'+this+'"] .stepTitle').html(),a=jQuery('<a href="javascript:"  class="lfb_stepperPoint" data-stepid="'+this+'" title="'+t+'"></a>');jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #lfb_stepper').append(a),a.b_tooltip({html:!0,container:'#estimation_popup[data-form="'+i+'"]',placement:"bottom"}),s?a.addClass("lfb_disabledPoint"):parseInt(this)==n?(a.addClass("lfb_currentPoint"),s=!0):a.on("click",function(){lfb_returnToStep(parseInt(jQuery(this).attr("data-stepid")),i)});var r=100/o.length*e;100!=r&&0!=r||1!=o.length?r+=100/o.length/2:r=50,a.css({left:r+"%"}),parseInt(this)==n&&jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #lfb_stepper #lfb_stepperBar').css({width:r+"%"})}),"final"==a.step&&jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] #lfb_stepper #lfb_stepperBar').css({width:"100%"})}}function wpe_initPanelResize(e){var t=wpe_getForm(e);jQuery(window).resize(function(){lfb_resize(t)})}function lfb_resize(e){var t=jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+e.formID+'"] #mainPanel .genSlide[data-stepid="'+e.step+'"] .stepTitle').height(),a=jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+e.formID+'"] #mainPanel .genSlide[data-stepid="'+e.step+'"] .genContent').outerHeight()+parseInt(jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+e.formID+'"] #mainPanel').css("padding-bottom"))+102+t;"final"==e.step&&(a-=80),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e.formID+'"] #mainPanel').animate({minHeight:a}),1==e.useSignature&&jQuery('#estimation_popup[data-form="'+e.formID+'"] #lfb_signature canvas').attr("width",jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e.formID+'"] #lfb_signature').width())}function lfb_rgb2hex(t){if(!(-1<t.indexOf("rgb")))return t;try{function e(e){return("0"+parseInt(e).toString(16)).slice(-2)}return"#"+e((t=t.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+))?\)$/))[1])+e(t[2])+e(t[3])}catch(e){return t}}function lfb_formatPriceWithCurrency(e,t){var a=wpe_getForm(t);return e=wpe_formatPrice(e,t),"left"==a.currencyPosition?e=a.currency+e:e+=a.currency,e}function wpe_formatPrice(e,t){var a=(e=e||0).toString();-1<a.indexOf(".")&&(a=parseFloat(e).toFixed(2).toString());var r=wpe_getForm(t);"1"==r.summary_noDecimals&&(a=Math.round(a).toString());r.decimalsSeparator;var i=r.thousandsSeparator,o=a,p=r.millionSeparator,s=r.billionsSeparator,n="";return-1<a.indexOf(".")?(o=a.substr(0,a.indexOf(".")),n=a.substr(a.indexOf(".")+1,2),a=a.replace(".",r.decimalsSeparator),1==n.toString().length&&(n=n.toString()+"0"),9<o.length?a=o.substr(0,o.length-9)+s+o.substr(o.length-9,3)+p+o.substr(o.length-6,3)+i+o.substr(o.length-3,o.length)+r.decimalsSeparator+n:6<o.length?a=o.substr(0,o.length-6)+p+o.substr(o.length-6,3)+i+o.substr(o.length-3,o.length)+r.decimalsSeparator+n:3<o.length&&(a=o.substr(0,o.length-3)+i+o.substr(o.length-3,o.length)+r.decimalsSeparator+n)):9<o.length?a=o.substr(0,o.length-9)+s+o.substr(o.length-9,3)+p+o.substr(o.length-6,3)+i+o.substr(o.length-3,o.length):6<o.length?a=o.substr(0,o.length-6)+p+o.substr(o.length-6,3)+i+o.substr(o.length-3,o.length):3<o.length&&(a=o.substr(0,o.length-3)+i+o.substr(o.length-3,o.length)),a}function lfb_applyCouponCode(a){var r=wpe_getForm(a),i=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #lfb_couponField').val();jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #lfb_couponField').closest(".form-group").removeClass("has-error"),i.length<3?jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #lfb_couponField').closest(".form-group").addClass("has-error"):jQuery.ajax({url:r.ajaxurl,type:"post",data:{action:"lfb_applyCouponCode",formID:a,code:i},success:function(e){if("0"==e||""==e)jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #lfb_couponField').closest(".form-group").addClass("has-error");else{jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #lfb_couponContainer').slideUp();var t=e;0<e.indexOf("%")&&(t=e.substr(0,e.length-1),r.reductionType="%"),r.discountCode=i,r.reduction=t,jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #finalSlide .genContent').animate({opacity:0},r.animationsSpeed),setTimeout(function(){wpe_updatePrice(a),wpe_changeStep("final",a)},r.animationsSpeed+100)}}})}function lfb_getRedirectionURL(a){var e=wpe_getForm(a),r=e.close_url;return 1==e.useRedirectionConditions&&jQuery.each(e.redirections,function(){var e=this.conditions.replace(/'/g,'"');e=e.replace(/\\"/g,'"');var t=lfb_checkConditions(e=JSON.parse(e),a,"final");error=t.error,errorOR=t.errorOR,("OR"==this.conditionsOperator&&!errorOR||"OR"!=this.conditionsOperator&&!error)&&(r=this.url)}),r}function lfb_formatQuantity(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}function lfb_startFormIntro(e){tld_selectionMode||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"]  #startInfos > p').slideDown()}function lfb_initRichTextValues(e){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] .lfb_richtext[data-itemid]:not(.lfb_shortcode)').each(function(){var e=0,t=new Array;parseInt(jQuery(this).closest(".genSlide").attr("data-stepid"));if(void 0!==form.richtextsContent[jQuery(this).attr("data-itemid").toString()]){for(var a=form.richtextsContent[jQuery(this).attr("data-itemid").toString()];-1!=(e=a.indexOf("[variable-",e+1));){var r='<span class="lfb_richVariable" data-varvariableid="'+a.substr(e+10,a.indexOf("]",e)-(e+10))+'"></span>';t.push({oldValue:a.substr(e,a.indexOf("]",e)+1-e),newValue:r})}for(e=0;-1!=(e=a.indexOf("item-",e+1));){r='<span class="lfb_richVariable" data-varitemid="'+a.substr(e+5,a.indexOf("_",e)-(e+5))+'" data-action="'+a.substr(a.indexOf("_",e)+1,a.indexOf("]",e)-1-a.indexOf("_",e))+'"></span>';t.push({oldValue:a.substr(e-1,a.indexOf("]",e)+1-(e-1)),newValue:r})}if(-1<a.indexOf("dateDifference-"))for(;-1!=(e=a.indexOf("dateDifference-",e+1));){var i=a.indexOf("_",e+15)+1;r='<span class="lfb_richVariable" data-varitemid="'+a.substr(e+15,a.indexOf("_",e)-(e+15))+'" data-action="'+"dateDifference"+'" data-enddateid="'+a.substr(i,a.indexOf("]",i)-i)+'"></span>';t.push({oldValue:a.substr(e-1,a.indexOf("]",e)+1-(e-1)),newValue:r})}if(-1<a.indexOf("distance_"))for($target.attr("data-usedistance","true");-1!=(e=a.indexOf("distance_",e+1));){var o=a.indexOf("-",e+9)+1,p=a.substr(e+9,a.indexOf("-",e)-(e+9)),s=a.indexOf("-",o)+1,n=a.substr(o,a.indexOf("-",o)-o),d=a.indexOf("-",s)+1,l=a.substr(s,a.indexOf("-",s)-s),u=a.indexOf("_",d)+1,m=a.substr(d,a.indexOf("_",d)-d),f=a.indexOf("-",u)+1,c=a.substr(u,a.indexOf("-",u)-u),_=a.indexOf("-",f)+1,y=a.substr(f,a.indexOf("-",f)-f),b=a.indexOf("-",_)+1,h=a.substr(_,a.indexOf("-",_)-_),j=a.indexOf("_",b)+1,Q=a.substr(b,a.indexOf("_",b)-b);r='<span class="lfb_richVariable" data-action="'+"distance"+'" data-distancetype="'+a.substr(j,a.indexOf("]",j)-j)+'" data-departadress="'+p+'" data-departcity="'+n+'" data-departzip="'+l+'" data-departcountry="'+m+'" data-arrivaladress="'+c+'" data-arrivalcity="'+y+'" data-arrivalzip="'+h+'" data-arrivalcountry="'+Q+'" ></span>';t.push({oldValue:a.substr(e-1,a.indexOf("]",e)+1-(e-1)),newValue:r})}var g=new Date,w=g.getMonth()+1;w<10&&(w="0"+w);g.getFullYear().toString(),w.toString(),g.getDate().toString();var v=wpe_forms[0].dateFormat.toUpperCase();v=(v=(v=v.replace(/\\\//g,"/")).replace(/d /g,"DD ")).replace(/yyyy/g,"YYYY"),a=(a=(a=a.replace(/\[currentDate\]/g,moment(g).format(v))).replace(/\[total\]/g,'<span class="lfb_richVariable" data-action="total"></span>')).replace(/\[total_quantity\]/g,'<span class="lfb_richVariable" data-action="total_quantity"></span>'),jQuery.each(t,function(){a=a.replace(this.oldValue,this.newValue)}),jQuery(this).html(a)}})}function lfb_updateRichTextValues(v){var I=wpe_getForm(v),D=new Date,e=D.getMonth()+1;e<10&&(e="0"+e);var S=D.getFullYear().toString()+e.toString()+D.getDate().toString();jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] .genSlide[data-stepid="'+I.step+'"] .lfb_richtext[data-itemid]:not(.lfb_shortcode) .lfb_richVariable[data-varvariableid]').each(function(){var e=jQuery(this).attr("data-varvariableid"),t=lfb_getVariableByID(I,e),a=0;t&&(a=t.value),jQuery(this).html(a)}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] .genSlide[data-stepid="'+I.step+'"] .lfb_richtext[data-itemid]:not(.lfb_shortcode) .lfb_richVariable:not([data-varvariableid])').each(function(){var e=parseInt(jQuery(this).closest(".genSlide").attr("data-stepid")),t=jQuery(this).closest(".lfb_richtext").attr("data-itemid"),a=jQuery(this).attr("data-varitemid"),r=jQuery(this).attr("data-action"),i=0,o=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+a+'"]');if("price"==r&&(i=0,"total"==a?i=I.price:(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+a+'"]').is(".checked")||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+a+'"]').is(":checked")||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+a+'"]').is("select")||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+a+'"]').is('[data-type="slider"]'))&&(i=parseFloat(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+a+'"]').data("resprice")),isNaN(i)&&(i=0)),i=wpe_formatPrice(parseFloat(i),v),"left"==I.currencyPosition?i=I.currency+i:i+=I.currency),"title"!=r&&"label"!=r||(i=o.is(".lfb_disabled")?"":jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+a+'"]').is(".checked")||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+a+'"]').is(":checked")||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+a+'"]').is("select")||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+a+'"]').is('[type="text"]')||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+a+'"]').is('[type="number"]')||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+a+'"]').is("textarea")||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+a+'"]').is(".lfb_colorPreview")||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+a+'"]').is("lfb_layeredImage")||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+a+'"]').is('[data-type="slider"]')||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+a+'"]').is(".lfb_dropzone")||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+a+'"]').is('[data-type="slider"]')?o.attr("data-originallabel"):""),"quantity"==r&&(o.is("input")||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+a+'"]').is(".checked")||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+a+'"]').is(":checked")?(i=o.is("input")?o.val():0<o.find(".icon_quantity").length?parseFloat(o.find(".icon_quantity").html()):o.find(".wpe_qtfield").val(),isNaN(i)&&(i=0)):jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+a+'"]').is('[data-type="slider"]')&&(i=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+a+'"]').slider("value")),i=wpe_formatPrice(parseFloat(i),v)),"value"==r&&(i=o.is(".lfb_disabled")?"":(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+a+'"]').is("select"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+a+'"]').val())),"date"==r&&(i=o.is(".lfb_datepicker")&&null!=o.datetimepicker("getDate")?moment.utc(o.datetimepicker("getDate")).format("YYYY-MM-DD"):"null"),"dateDifference"==r){var p=a,s=jQuery(this).attr("data-enddateid");if("currentDate"==p)p=D;else if(0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+p+'"]').length&&0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+p+'"]').val().length){p=(o=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+p+'"]')).datetimepicker("getDate")}else p=D;if("currentDate"==s)s=S;else if(0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+s+'"]').length&&0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+s+'"]').val().length){s=(o=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+s+'"]')).datetimepicker("getDate")}else s=D;var n=Math.abs(s.getTime()-p.getTime()),d=Math.ceil(n/864e5);d<0&&(d=0),i=d}if("distance"==r){var l=jQuery(this).attr("data-departadress"),u=jQuery(this).attr("data-departcity"),m=jQuery(this).attr("data-departzip"),f=jQuery(this).attr("data-departcountry"),c=jQuery(this).attr("data-arrivaladress"),_=jQuery(this).attr("data-arrivalcity"),y=jQuery(this).attr("data-arrivalzip"),b=jQuery(this).attr("data-arrivalcountry"),h=jQuery(this).attr("data-distancetype");if(""!=l)if(0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+l+'"]').length)l=(o=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+l+'"]')).val();else l=0;if(""!=u)if(0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+u+'"]').length)u=(o=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+u+'"]')).val();else u=0;if(""!=m)if(0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+m+'"]').length)m=(o=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+m+'"]')).val();else m=0;if(""!=f)if(0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+f+'"]').length)f=(o=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+f+'"]')).val();else f=0;if(""!=c)if(0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+c+'"]').length)c=(o=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+c+'"]')).val();else c=0;if(""!=_)if(0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+_+'"]').length)_=(o=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+_+'"]')).val();else _=0;if(""!=y)if(0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+y+'"]').length)y=(o=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+y+'"]')).val();else y=0;if(""!=b)if(0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+b+'"]').length)b=(o=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"] #mainPanel .genSlide [data-itemid="'+b+'"]')).val();else b=0;0<$target.closest(".genSlide").find(".lfb_distanceError").length&&lfb_removeDistanceError(t,v);var j=content.substr(-1,content.indexOf("]",0)+1- -1),Q=0;if(""!=$target.attr("data-distance")&&(Q=parseFloat($target.attr("data-distance"))),""==l&&""==u&&""==f&&""==c&&""==_&&""==b&&""==m&&""==y)lfb_showDistanceError(t,v);else if(""==I.gmap_key)lfb_showDistanceError(t,v),console.log("invalid gmap api key");else{var g=l+" "+m+" "+u+" "+f,w=c+" "+y+" "+_+" "+b;$target.attr("data-departure")==g&&w==$target.attr("data-arrival")||($target.attr("data-departure",g),$target.attr("data-arrival",w),lfb_getDistanceCalc(j,v,t,g,w,h))}i=Q}"total"==r?i=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+v+'"]  #finalPrice').html():"total_quantity"==r&&(i=wpe_getTotalQuantities(v,e,t)),jQuery(this).html(i)})}function lfb_saveForLater(e){var t=wpe_getForm(e);if("0"!=t.step)if(null!==localStorage.getItem("lfb_savedFormID")&&parseInt(localStorage.getItem("lfb_savedFormID"))==e&&null!==localStorage.getItem("lfb_savedForm"))localStorage.removeItem("lfb_savedFormID"),localStorage.removeItem("lfb_formsession"),localStorage.removeItem("lfb_savedForm"),localStorage.removeItem("lfb_savedFormPastSteps"),localStorage.removeItem("lfb_savedFormStep"),localStorage.removeItem("lfb_savedFormTime"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] .lfb_btnSaveForm').children(".fa,.fas,.fab").attr("class","fas "+jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] .lfb_btnSaveForm').attr("data-originalicon")),""!=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] .lfb_btnSaveForm').attr("data-defaulttext")&&jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] .lfb_btnSaveForm span:not(.fa):not(.fas):not(.fab)').html(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] .lfb_btnSaveForm').attr("data-defaulttext"));else{var a=wpe_getFormContent(e,!0)[2];localStorage.setItem("lfb_savedFormID",e),localStorage.setItem("lfb_formsession",jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"]').attr("data-formsession")),localStorage.setItem("lfb_savedForm",JSON.stringify(a)),localStorage.setItem("lfb_savedFormPastSteps",JSON.stringify(lfb_lastSteps)),localStorage.setItem("lfb_savedFormStep",t.step),localStorage.setItem("lfb_savedFormTime",Date.now());0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] .lfb_btnSaveForm').children(".fa,.fab,.fas").length&&(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] .lfb_btnSaveForm').children(".fa,.fas,.fab").attr("class"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] .lfb_btnSaveForm').children(".fa,.fas,.fab").attr("class","fas fa-check")),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] .lfb_btnSaveForm').removeClass("btn-default").addClass("btn-primary"),""!=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] .lfb_btnSaveForm').attr("data-defaulttext")&&jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] .lfb_btnSaveForm span:not(.fa):not(.fas):not(.fab)').html(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] .lfb_btnSaveForm').attr("data-deltext")),setTimeout(function(){0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] .lfb_btnSaveForm').children(".fas,.fa,.fab").length&&jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] .lfb_btnSaveForm').children(".fas,.fa,.fab").attr("class","fas fa-redo"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] .lfb_btnSaveForm').removeClass("btn-primary").addClass("btn-default")},1500)}}function lfb_getStoredSelectionItemID(e,t){var a=!1;return jQuery.each(e,function(){this.itemid==t&&(a=this)}),a}function lfb_loadStoredForm(i){var o=wpe_getForm(i),e=new Date(parseInt(o.lastS));if(0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] .lfb_btnSaveForm').length)if(null!==localStorage.getItem("lfb_savedFormID")&&parseInt(localStorage.getItem("lfb_savedFormID"))==i&&null!==localStorage.getItem("lfb_savedForm"))if(e<new Date(parseInt(localStorage.getItem("lfb_savedFormTime")))){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] .lfb_btnSaveForm').children(".fas,.fa,.fab").attr("class","fas fa-redo"),""!=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] .lfb_btnSaveForm').attr("data-defaulttext")&&jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] .lfb_btnSaveForm span:not(.fas):not(.fa):not(.fab)').html(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] .lfb_btnSaveForm').attr("data-deltext")),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').attr("data-formsession",localStorage.getItem("lfb_formsession"));var p=JSON.parse(localStorage.getItem("lfb_savedForm")),t=JSON.parse(localStorage.getItem("lfb_savedFormPastSteps")),a=localStorage.getItem("lfb_savedFormStep");-1==jQuery.inArray(a,t)&&t.push(a),0<t.length&&(o.autoStart=!0,jQuery.each(t,function(){var e=this.toString();jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] [data-stepid="'+e+'"] [data-itemid]').each(function(){$item=jQuery(this);var e=lfb_getStoredSelectionItemID(p,parseInt($item.attr("data-itemid")));if($item.is(".selectable"))0!=e?(0<$item.find(".icon_quantity").length?($item.find(".icon_quantity").html(e.quantity),0<$item.find(".wpe_sliderQt").length&&$item.find(".wpe_sliderQt").slider("value",parseInt(e.quantity))):0<$item.find(".wpe_qtfield").length?$item.find(".wpe_qtfield").val(parseInt(e.quantity)):$item.is('[data-type="slider"]')&&$item.slider("value",parseInt(e.quantity)),$item.is(".checked")||wpe_itemClick(jQuery(this),!1,i)):$item.is(".checked")&&wpe_itemClick(jQuery(this),!1,i);else if($item.is(".lfb_button"))0!=e?$item.is(".checked")||wpe_itemClick(jQuery(this),!1,i):$item.is(".checked")&&wpe_itemClick(jQuery(this),!1,i);else if($item.is('[data-toggle="switch"]'))0!=e?$item.is(":checked")||$item.trigger("click"):$item.is(".checked")&&wpe_itemClick(jQuery(this),!1,i);else if($item.is(".lfb_colorPreview"))0!=e&&$item.closest(".itemBloc").find(".lfb_colorpicker").val(e.value);else if($item.is(".lfb_datepicker"))0!=e&&$item.val(e.value);else if($item.is(".lfb_dropzone")){if(0!=e){var t=Dropzone.forElement("#"+$item.attr("id")),a=e.value,r={name:a=(a=(a=(a=a.replace('- <span class="lfb_file">',"")).replace(" ","")).replace("</span>","")).replace("<br/>",""),size:12345,accepted:!0,kind:"image"};t.emit("addedfile",r),t.files.push(r),t.createThumbnailFromUrl(r,o.imgPreview,function(){t.emit("complete",r)},"anonymous")}}else $item.is('[data-type="numberfield"]')?0!=e&&($item.is('[data-valueasqt="1"]')?$item.val(e.quantity):$item.val(e.value)):$item.is("select")?0!=e&&$item.val(e.value):$item.is('[data-type="slider"]')?0!=e&&$item.slider("value",parseInt(e.quantity)):$item.is("textarea")?0!=e&&$item.val(e.value):$item.is('input[type="text"]')&&0!=e&&$item.val(e.value)}),e!=a?lfb_lastSteps.push(parseInt(e)):(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] [data-stepid="'+e+'"] .errorMsg').hide(),"1"==o.intro_enabled?(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"]  #startInfos > p').slideDown(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] .lfb_btnFloatingSummary').css({display:"inline-block"}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] .lfb_btnSaveForm').css({display:"inline-block"}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"] #btnStart').parent().fadeOut(o.animationsSpeed,function(){"2"!=o.showSteps&&jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"]').find(".genPrice,#lfb_stepper").fadeIn(o.animationsSpeed),jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"] #mainPanel').fadeIn(o.animationsSpeed+o.animationsSpeed/2,function(){wpe_changeStep(a,i)})})):wpe_changeStep(a,i))})),setTimeout(function(){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"] .genSlide.lfb_activeStep').css("opacity",1)},2e3)}else localStorage.removeItem("lfb_formsession"),localStorage.removeItem("lfb_savedFormID"),localStorage.removeItem("lfb_savedForm"),localStorage.removeItem("lfb_savedFormPastSteps"),localStorage.removeItem("lfb_savedFormStep"),localStorage.removeItem("lfb_savedFormTime"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] .lfb_btnSaveForm').children(".fa").attr("class","fa "+jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] .lfb_btnSaveForm').attr("data-originalicon")),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] .lfb_btnSaveForm').children(".fab").attr("class","fab "+jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] .lfb_btnSaveForm').attr("data-originalicon")),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] .lfb_btnSaveForm').children(".fas").attr("class","fas "+jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] .lfb_btnSaveForm').attr("data-originalicon")),""!=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] .lfb_btnSaveForm').attr("data-defaulttext")&&jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] .lfb_btnSaveForm span:not(.fas):not(.fab):not(.fa)').html(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] .lfb_btnSaveForm').attr("data-defaulttext"));else jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] .lfb_btnSaveForm').children(".fa").attr("class","fa "+jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] .lfb_btnSaveForm').attr("data-originalicon")),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] .lfb_btnSaveForm').children(".fab").attr("class","fab "+jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] .lfb_btnSaveForm').attr("data-originalicon")),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] .lfb_btnSaveForm').children(".fas").attr("class","fas "+jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] .lfb_btnSaveForm').attr("data-originalicon")),""!=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] .lfb_btnSaveForm').attr("data-defaulttext")&&jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] .lfb_btnSaveForm span:not(.fas):not(.fab):not(.fa)').html(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+i+'"] .lfb_btnSaveForm').attr("data-defaulttext"))}function lfb_getCalendarByID(e){var t=!1;return jQuery.each(lfb_calendars,function(){this.id==e&&(t=this)}),t}function lfb_getDisabledHours(e,r,a,i){var o=new Array,t=lfb_getCalendarByID(e);if(0!=t){var p=new Date(r);if(jQuery('#estimation_popup .lfb_datepicker[data-calendarid="'+t.id+'"]').attr("data-daysweek")==p.getDay()||-1<jQuery('#estimation_popup .lfb_datepicker[data-calendarid="'+t.id+'"]').attr("data-daysweek").split(",").indexOf(p.getDay()))for(var s=0;s<24;s++)o.push(parseInt(s));else{if(""!=jQuery('#estimation_popup .lfb_datepicker[data-calendarid="'+t.id+'"][data-hoursdisabled]').attr("data-hoursdisabled")){var n=jQuery('#estimation_popup .lfb_datepicker[data-calendarid="'+t.id+'"]').attr("data-hoursdisabled");-1<n.indexOf(",")?jQuery.each(n.split(","),function(){var e=parseInt(this);if(o.push(e),"hours"==i)for(var t=0;t<parseInt(a);t++)-1==jQuery.inArray(e-t,o)&&o.push(e-t);else if("mins"==i)for(t=0;t<=Math.floor(a/60);t++)-1==jQuery.inArray(e-t,o)&&o.push(e-t)}):o.push(parseInt(n))}jQuery.each(t.events,function(){var e=moment.utc(this.startDate);if(e.format("YYYY-MM-DD")==r)if(moment.utc(this.endDate).format("YYYY-MM-DD")==e.format("YYYY-MM-DD"))if(1<moment.utc(this.endDate).diff(e,"hours")){var t=e.clone();t.add(1,"hours");for(var a=t.format("HH");a<moment.utc(this.endDate).format("HH");a++)-1==jQuery.inArray(a,o)&&o.push(parseInt(a));for(a=e.format("HH")+1;a<moment.utc(this.endDate).format("HH");a++)-1==jQuery.inArray(parseInt(a),o)&&o.push(parseInt(a));"00"==e.format("mm")&&-1==jQuery.inArray(e.format("HH"),o)&&o.push(e.format("HH"))}else 1==moment.utc(this.endDate).diff(e,"hours")&&"00"==e.format("mm")&&-1==jQuery.inArray(e.format("HH"),o)&&o.push(parseInt(e.format("HH")));else for(a=e.format("HH");a<24;a++)-1==jQuery.inArray(a,o)&&o.push(parseInt(a))})}}return o}function lfb_getDisabledMinutes(e,r,i,o,t){var p=new Array,a=lfb_getCalendarByID(e);if(0!=a){var s=lfb_getDisabledHours(e,r,o,t),n=t;"mins"==t&&(n="minutes");var d=jQuery('#estimation_popup .lfb_datepicker[data-calendarid="'+a.id+'"]').attr("data-hoursdisabled");if(-1<d.indexOf(",")&&jQuery.each(d.split(","),function(){for(var e=parseInt(this),t=moment(new Date(r+" "+e+":00")).subtract(parseInt(o),n).add(1,"minute").format("YYYY-MM-DD HH:mm"),a=0;a<=11;a++)moment(new Date(r+" "+i+":"+5*a)).isAfter(moment(new Date(t)))&&moment(new Date(r+" "+i+":"+5*a)).isBefore(moment(new Date(moment(new Date(r+" "+e+":00")))))&&-1==jQuery.inArray(5*a,p)&&p.push(parseInt(5*a))}),-1<jQuery.inArray(parseInt(i),s))for(var l=0;l<=11;l++)-1==jQuery.inArray(5*l,p)&&p.push(parseInt(5*l));jQuery.each(a.events,function(){var e=moment.utc(this.startDate);if((e=e.subtract(parseInt(o),n)).format("YYYY-MM-DD")==r&&e.format("HH")==i)for(var t=0;t<=11;t++)e.format("hh")==moment.utc(this.endDate).format("hh")?5*t>=e.format("mm")&&5*t<moment.utc(this.endDate).format("mm")&&-1==jQuery.inArray(5*t,p)&&p.push(parseInt(5*t)):5*t>=e.format("mm")&&5*t&&-1==jQuery.inArray(5*t,p)&&p.push(parseInt(5*t));if(moment.utc(this.endDate).format("YYYY-MM-DD")==r&&moment.utc(this.endDate).format("HH")==i&&e.format("hh")!=moment.utc(this.endDate).format("hh"))for(t=0;t<=11;t++)5*t<moment.utc(this.endDate).format("mm")&&-1==jQuery.inArray(5*t,p)&&p.push(parseInt(5*t))})}return p}function lfb_getCalendarEventsAtDate(e,a){var r=0;return jQuery.each(e.events,function(){var e=moment.utc(this.startDate),t=moment.utc(this.endDate);a.isSameOrAfter(e)&&a.isSameOrBefore(t)&&r++}),r}function lfb_getBusyDates(e,t){var a=wpe_getForm(e);jQuery.ajax({url:a.ajaxurl,type:"post",data:{action:"lfb_getBusyDates",formID:e,calendarsIDs:t},success:function(e){e=e.trim(),e=JSON.parse(e,!0),lfb_calendars=e.calendars,jQuery.each(e.calendars,function(){var s=this;jQuery('#estimation_popup .lfb_datepicker[data-calendarid="'+this.id+'"]').each(function(){_datepicker=jQuery(this);var p=new Array;jQuery.each(s.events,function(){if(1==this.fullDay){var e=moment.utc(this.startDate),t=moment.utc(this.endDate),a=e.format("YYYY-MM-DD");lfb_getCalendarEventsAtDate(s,e)>=_datepicker.attr("data-maxevents")&&p.push(a);for(var r=1;r<=t.diff(e,"days");r++){var i=e.add(r,"days");lfb_getCalendarEventsAtDate(s,i)>=_datepicker.attr("data-maxevents")&&p.push(i.format("YYYY-MM-DD"))}}else{e=moment.utc(this.startDate),_datepicker.attr("data-eventdurationtype");"mins"==_datepicker.attr("data-eventdurationtype")&&0,this.startDate=e.format("YYYY-MM-DD HH:mm");t=moment.utc(this.endDate),a=e.format("YYYY-MM-DD");if(1<t.diff(e,"days")){var o=1;0==e.format("m")&&(o=0);for(r=o;r<=t.diff(e,"days");r++){i=e.clone().add(r,"days");p.push(i.format("YYYY-MM-DD"))}}}}),_datepicker.datetimepicker("setDatesDisabled",p)})})}})}function lfb_showWinStripePayment(o){var e=lfb_checkStepItemsValid("final",o.formID);1==o.legalNoticeEnable&&(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"] #lfb_legalCheckbox').is(":checked")||(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"] #lfb_legalCheckbox').closest(".form-group").addClass("has-error"),e=!1)),e&&lfb_checkCaptcha(o,function(){var t=!0;if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"] [data-activatePaypal="true"]:not(:checked):not(.checked)').each(function(){var e=jQuery(this).closest(".genSlide").attr("data-stepid");"final"!=e&&(e=parseInt(e)),-1==jQuery.inArray(e,lfb_lastSteps)||(t=!1)}),0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find('[data-dontactivatepaypal="true"].checked,[data-dontactivatepaypal="true"]:checked').length&&(t=!1),!t||0==o.price&&0==o.priceSingle)wpe_order(o.formID);else{if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find('#lfb_stripeModal [data-info="amount"]').html(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"] #finalPrice').html()),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find("#lfb_stripeModal [data-panel]").hide(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find('#lfb_stripeModal [data-panel="loading"]').show(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find("#lfb_stripeModal .modal-footer").hide(),lfb_stripe=Stripe(o.stripePubKey),""==o.stripeToken){var a=parseFloat(o.price),r=0;if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').is('[data-isSubs="true"]')&&(a=parseFloat(o.priceSingle),r=parseFloat(o.price)),"percent"==o.payMode){var e="<span>"+lfb_formatPriceWithCurrency(a=parseFloat(a)*(parseFloat(o.percentToPay)/100),o.formID)+"</span>";jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find('#lfb_stripeModal [data-info="amount"]').html(e)}else if("fixed"==o.payMode){e="<span>"+lfb_formatPriceWithCurrency(a=parseFloat(o.fixedToPay),o.formID)+"</span>";jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find('#lfb_stripeModal [data-info="amount"]').html(e)}jQuery.ajax({url:o.ajaxurl,type:"post",data:{action:"lfb_getStripePaymentIntent",singleTotal:a,subTotal:r,formID:o.formID,customerInfos:wpe_getContactInformations(o.formID,!0)},success:function(e){e=JSON.parse(e),o.stripeToken=e.token,o.stripeCustomerID=e.customerID;var t=lfb_stripe.elements();cardElement=t.create("card"),cardElement.mount("#lfb_stripe_card-element"),cardElement.addEventListener("change",function(e){e.error?jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"] #lfb_stripe_card-error').html(e.error.message):jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"] #lfb_stripe_card-error').html("")}),o.cardElement=cardElement,jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find("#lfb_stripeModal [data-panel]").hide(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find('#lfb_stripeModal [data-panel="form"]').show(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find("#lfb_stripeModal .modal-footer").slideDown()}})}else{var i=lfb_stripe.elements();cardElement=i.create("card"),cardElement.mount("#lfb_stripe_card-element"),cardElement.addEventListener("change",function(e){e.error?jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"] #lfb_stripe_card-error').html(e.error.message):jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"] #lfb_stripe_card-error').html("")}),o.cardElement=cardElement;a=parseFloat(o.price),r=0;if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').is('[data-isSubs="true"]')&&(a=parseFloat(o.priceSingle),r=parseFloat(o.price)),"percent"==o.payMode){e="<span>"+lfb_formatPriceWithCurrency(a=parseFloat(a)*(parseFloat(o.percentToPay)/100),o.formID)+"</span>";jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find('#lfb_stripeModal [data-info="amount"]').html(e)}else if("fixed"==o.payMode){e="<span>"+lfb_formatPriceWithCurrency(a=parseFloat(o.fixedToPay),o.formID)+"</span>";jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find('#lfb_stripeModal [data-info="amount"]').html(e)}jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find("#lfb_stripeModal [data-panel]").hide(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find('#lfb_stripeModal [data-panel="form"]').show(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find("#lfb_stripeModal .modal-footer").slideDown()}jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"] #lfb_stripeModal a[data-action="pay"]').unbind("click"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"] #lfb_stripeModal a[data-action="pay"]').click(function(){var e=!1;jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"] #lfb_stripeModal .has-error').removeClass("has-error"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"] #lfb_stripeModal [name="ownerName"]').val().length<3&&(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"] #lfb_stripeModal [name="ownerName"]').closest(".form-group").addClass("has-error"),e=!0),e||(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find("#lfb_stripeModal [data-panel]").hide(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find('#lfb_stripeModal [data-panel="loading"]').show(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find("#lfb_stripeModal .modal-footer").hide(),lfb_stripe.createSource(o.cardElement).then(function(e){e.error?(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"] [data-info="error"]').html(e.error.message),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find("#lfb_stripeModal [data-panel]").hide(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find('#lfb_stripeModal [data-panel="fail"]').show()):(o.stripeSrc=e.source.id,0<r?jQuery.ajax({url:o.ajaxurl,type:"post",data:{action:"lfb_processStripeSubscription",formID:o.formID,stripeSrc:o.stripeSrc,customerID:o.stripeCustomerID,singleTotal:a,subTotal:r},success:function(e){1==(e=e.trim())?0<a?lfb_stripe.handleCardPayment(o.stripeToken,o.cardElement,{payment_method_data:{billing_details:{name:jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"] #lfb_stripeModal [name="ownerName"]').val()}}}).then(function(e){e.error?(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"] [data-info="error"]').html(e.error),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find("#lfb_stripeModal [data-panel]").hide(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find('#lfb_stripeModal [data-panel="fail"]').show()):(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find("#lfb_stripeModal").modal("hide"),o.stripePaid=!0,wpe_order(o.formID))}):(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find("#lfb_stripeModal").modal("hide"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find("#lfb_stripeModal").modal("hide"),o.stripePaid=!0,wpe_order(o.formID)):-1<e.indexOf("pi_")&&lfb_stripe.handleCardPayment(e,o.cardElement,{payment_method_data:{billing_details:{name:jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"] #lfb_stripeModal [name="ownerName"]').val()}}}).then(function(e){e.error?(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"] [data-info="error"]').html(e.error),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find("#lfb_stripeModal [data-panel]").hide(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find('#lfb_stripeModal [data-panel="fail"]').show()):0<a?lfb_stripe.handleCardPayment(o.stripeToken,o.cardElement,{payment_method_data:{billing_details:{name:jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"] #lfb_stripeModal [name="ownerName"]').val()}}}).then(function(e){e.error?(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"] [data-info="error"]').html(e.error),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find("#lfb_stripeModal [data-panel]").hide(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find('#lfb_stripeModal [data-panel="fail"]').show()):(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find("#lfb_stripeModal").modal("hide"),o.stripePaid=!0,wpe_order(o.formID))}):(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find("#lfb_stripeModal").modal("hide"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find("#lfb_stripeModal").modal("hide"),o.stripePaid=!0,wpe_order(o.formID))})}}):lfb_stripe.handleCardPayment(o.stripeToken,o.cardElement,{payment_method_data:{billing_details:{name:jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"] #lfb_stripeModal [name="ownerName"]').val()}}}).then(function(e){e.error?(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"] [data-info="error"]').html(e.error),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find("#lfb_stripeModal [data-panel]").hide(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find('#lfb_stripeModal [data-panel="fail"]').show()):(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find("#lfb_stripeModal").modal("hide"),o.stripePaid=!0,wpe_order(o.formID))}))}))}),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]').find("#lfb_stripeModal").modal("show")}})}function lfb_checkCaptcha(t,a){1==t.useCaptcha&&""!=t.recaptcha3Key?grecaptcha.ready(function(){grecaptcha.execute(t.recaptcha3Key,{action:"sending_form"}).then(function(e){t.captcha=e,a(t)})}):a(t)}function lfb_updateVariable(e,t,a,r){for(var i=0;i<e.variables.length;i++)if(e.variables[i].id==t){var o=e.variables[i];o.value=lfb_executeCalculation(a,e.formID,r),"integer"==o.type?o.value=Math.round(o.value):o.value=o.value.toFixed(2);break}}function lfb_getVariableByID(e,t){for(var a=!1,r=0;r<e.variables.length;r++)if(e.variables[r].id==t){a=e.variables[r];break}return a}function lfb_checkUserEmail(a){var e=!0,r=a.formID;if(1==a.enableCustomerAccount&&void 0===a.stripePaid&&(void 0===a.verifiedEmail||!a.verifiedEmail)&&0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"] #mainPanel .genSlide[data-stepid="'+a.step+'"] [data-fieldtype="email"][data-required="true"]').length){e=!1;var i=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"] #mainPanel .genSlide[data-stepid="'+a.step+'"] [data-fieldtype="email"][data-required="true"]').last();if(void 0===a.emailProposed||a.emailProposed!=i.val())a.emailProposed=i.val(),jQuery.ajax({url:a.ajaxurl,type:"post",data:{action:"lfb_checkEmailCustomer",formID:a.formID,email:a.emailProposed},success:function(e){if(1==e.trim())if(0==jQuery("#lfb_customerPasswordField").length){var t=jQuery('<div id="lfb_forgotPassCt" class="form-group has-error" style="display:none;" ></div>');t.append('<div  class="input-group" ><span class="input-group-addon"><span class="fa fa-lock" ></span></span><input type="password" id="lfb_forgotPassField" class="form-control" /></div>'),t.append('<div class="lfb_forgotPassLinkCt"><a href="javascript:" id="lfb_forgotPassLink">'+a.txtCustomersDataForgotPassLink+"</a></div>"),i.closest(".form-group").after(t),jQuery("#lfb_forgotPassLink").on("click",function(){wpe_checkEmail(i.val())&&(i.attr("disabled","disabled"),jQuery.ajax({url:a.ajaxurl,type:"post",data:{action:"lfb_forgotPassManD",email:a.emailProposed},success:function(e){jQuery("#lfb_passModal").modal("show")}}))}),jQuery('#estimation_popup[data-form="'+r+'"] #mainPanel .genSlide[data-stepid="'+a.step+'"] #lfb_forgotPassCt').slideDown(),setTimeout(function(){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"]').is(".wpe_fullscreen")?jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"]').animate({scrollTop:jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"] .genSlide[data-stepid="'+a.step+'"] #lfb_forgotPassCt').offset().top-(120+parseInt(a.scrollTopMargin))},2*a.animationsSpeed):jQuery("body,html").animate({scrollTop:jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"] .genSlide[data-stepid="'+a.step+'"] #lfb_forgotPassCt').offset().top-(120+parseInt(a.scrollTopMargin))},2*a.animationsSpeed)},350)}else jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r+'"] #mainPanel .genSlide[data-stepid="'+a.step+'"] #lfb_forgotPassField').val(""),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r+'"] #mainPanel .genSlide[data-stepid="'+a.step+'"] #lfb_forgotPassField').closest(".form-group").addClass("has-error"),setTimeout(function(){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"]').is(".wpe_fullscreen")?jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"]').animate({scrollTop:jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"] .genSlide[data-stepid="'+a.step+'"] #lfb_forgotPassCt').offset().top-(120+parseInt(a.scrollTopMargin))},2*a.animationsSpeed):jQuery("body,html").animate({scrollTop:jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"] .genSlide[data-stepid="'+a.step+'"] #lfb_forgotPassCt').offset().top-(120+parseInt(a.scrollTopMargin))},2*a.animationsSpeed)},350);else a.verifiedEmail=a.emailProposed,jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r+'"] #mainPanel .genSlide[data-stepid="'+a.step+'"] #lfb_forgotPassCt').removeClass("lfb_open").slideUp(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r+'"] #mainPanel .genSlide[data-stepid="'+a.step+'"] [data-fieldtype="email"][data-required="true"]').last().attr("disabled","disabled"),"final"==a.step?0==jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r+'"] #lfb_paymentMethodBtns').length&&("none"!=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r+'"] .genSlide[data-stepid="'+a.step+'"] .lfb_btnNextContainer').css("display")?jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r+'"] #wpe_btnOrder').trigger("click"):jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r+'"] #btnOrderPaypal, #estimation_popup.wpe_bootstraped[data-form="'+r+'"] #lfb_btnPayStripe,#estimation_popup.wpe_bootstraped[data-form="'+r+'"] #btnOrderRazorpay').trigger("click")):jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r+'"] #mainPanel .genSlide[data-stepid="'+a.step+'"] .btn-next').trigger("click")}});else if(0<jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r+'"] #mainPanel .genSlide[data-stepid="'+a.step+'"] #lfb_forgotPassField').length){var t=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r+'"] #mainPanel .genSlide[data-stepid="'+a.step+'"] #lfb_forgotPassField').val();3<t.length?jQuery.ajax({url:a.ajaxurl,type:"post",data:{action:"lfb_verificationPass",formID:r,pass:t},success:function(e){1==e.trim()?(a.verifiedEmail=a.emailProposed,jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r+'"] #mainPanel .genSlide[data-stepid="'+a.step+'"] #lfb_forgotPassCt').removeClass("lfb_open").slideUp(),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r+'"] #mainPanel .genSlide[data-stepid="'+a.step+'"] [data-fieldtype="email"][data-required="true"]').last().attr("disabled","disabled"),"final"==a.step?0==jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r+'"] #lfb_paymentMethodBtns').length&&("none"!=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r+'"] .genSlide[data-stepid="'+a.step+'"] .lfb_btnNextContainer').css("display")?jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r+'"] #wpe_btnOrder').trigger("click"):jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r+'"] #btnOrderPaypal, #estimation_popup.wpe_bootstraped[data-form="'+r+'"] #lfb_btnPayStripe,#estimation_popup.wpe_bootstraped[data-form="'+r+'"] #btnOrderRazorpay').trigger("click")):jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r+'"] #mainPanel .genSlide[data-stepid="'+a.step+'"] .btn-next').trigger("click")):(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r+'"] #mainPanel .genSlide[data-stepid="'+a.step+'"] #lfb_forgotPassField').closest(".form-group").addClass("has-error"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"]').is(".wpe_fullscreen")?jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"]').animate({scrollTop:jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r+'"] #mainPanel .genSlide[data-stepid="'+a.step+'"] #lfb_forgotPassCt').offset().top-(120+parseInt(a.scrollTopMargin))},2*a.animationsSpeed):jQuery("body,html").animate({scrollTop:jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r+'"] #mainPanel .genSlide[data-stepid="'+a.step+'"] #lfb_forgotPassCt').offset().top-(120+parseInt(a.scrollTopMargin))},2*a.animationsSpeed))}}):(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+r+'"] #mainPanel .genSlide[data-stepid="'+a.step+'"] #lfb_forgotPassCt').addClass("has-error"),setTimeout(function(){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"]').is(".wpe_fullscreen")?jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"]').animate({scrollTop:jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"] .genSlide[data-stepid="'+a.step+'"] #lfb_forgotPassCt').offset().top-(120+parseInt(a.scrollTopMargin))},2*a.animationsSpeed):jQuery("body,html").animate({scrollTop:jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"] .genSlide[data-stepid="'+a.step+'"] #lfb_forgotPassCt').offset().top-(120+parseInt(a.scrollTopMargin))},2*a.animationsSpeed)},350))}}return e}function lfb_decodeCalculation(e){var t=new Array;t[0]=9,t[1]=3,t[2]=5,t[3]=8,t[4]=2,t[5]=6,t[6]=4,t[7]=1,t[8]=0,t[9]=7;for(var a="",r=0;r<e.length;r++)-1<t.indexOf(parseInt(e[r]))?a+=t[parseInt(e[r])]:a+=e[r];return a}function lfb_downloadAsPDF(e){var a=wpe_getForm(e),t=wpe_cloneSummary(!1,e),r=t.html();t.remove();var i=wpe_getFormContent(e),o=i[0];o=o.replace(/<br\/>/g,"[n]");var p=i[1],s=i[2],n=wpe_getContactInformations(e);email=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] .emailField').val(),wpe_checkEmail(n.email)&&(email=n.email);var d="";jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"] #finalSlide').find('.lfb_item input:not([type="checkbox"])[data-itemid],.lfb_item textarea[data-itemid],.lfb_item select[data-itemid]').each(function(){if(0==jQuery(this).closest("#wtmt_paypalForm").length&&!jQuery(this).is(".lfb_disabled")&&!jQuery(this).is("#lfb_couponField")&&!jQuery(this).is("#lfb_captchaField")){var e=":";jQuery(this).closest(".lfb_item").find("label").html().lastIndexOf(":")==jQuery(this).closest(".lfb_item").find("label").html().length-1&&(e=""),jQuery("body").is(".rtl")?d+='<p><b><span class="lfb_value">'+jQuery(this).val()+"</span></b>"+e+" "+jQuery(this).closest(".lfb_item").find("label").html()+"</p>":d+="<p>"+jQuery(this).closest(".lfb_item").find("label").html()+" "+e+' <b><span class="lfb_value">'+jQuery(this).val()+"</span></b></p>"}}),jQuery.ajax({url:a.ajaxurl,type:"post",data:{action:"lfb_downloadOrderPDF",formID:a.formID,informations:d,email:email,customerInfos:wpe_getContactInformations(a.formID,!0),summary:r,totalTxt:p,formSession:jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"] #lfb_formSession').val(),items:s,useRtl:jQuery("body").is(".rtl"),variables:JSON.stringify(a.variables)},success:function(e){var t=window.open(a.homeUrl+"/index.php?EPFormsBuilder=downloadMyOrder","_blank");"null"!=typeof t&&null!=t&&(t.focus(),setTimeout(function(){t.close()},300))}})}jQuery(document).ready(function(){0<jQuery("#estimation_popup").length&&(-1<document.location.href.indexOf("lfb_action=preview")&&jQuery("#estimation_popup:not(.wpe_fullscreen)").remove(),initFlatUI(),window.Dropzone.autoDiscover=!1,wpe_initForms(),jQuery.each(wpe_forms,function(){wpe_checkItems(this.formID),wpe_initListeners(this.formID)}))}),jQuery(window).on("load",function(){0<jQuery("#estimation_popup").length&&(lfb_onResize(),jQuery(window).resize(lfb_onResize),jQuery(window).on("popstate",function(e){null!==e.originalEvent.state&&(e.preventDefault(),wpe_previousStep(wpe_forms[0].formID))})),jQuery("#ajax-loading-screen").fadeOut(),jQuery("#ajax-content-wrap >.container-wrap").css({opacity:1,display:"block"}),jQuery("#estimation_popup canvas.img").each(function(){jQuery(this).parent().children("img").css("opacity",0),jQuery(this).parent().children("img").show(),jQuery(this).css({width:jQuery(this).parent().children("img").get(0).width,height:jQuery(this).parent().children("img").get(0).height}),jQuery(this).parent().children("img").hide()}),jQuery.each(wpe_forms,function(){var o=this;if(1==o.useCaptcha&&""!=o.recaptcha3Key&&0<jQuery(".grecaptcha-badge").length&&0==jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"] #finalSlide .grecaptcha-badge').length){var e=jQuery(".grecaptcha-badge").clone();jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"] #finalSlide .genContentSlide').append(e)}var p=new Array;jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]  #mainPanel .genSlide .lfb_timepicker').each(function(){jQuery(this).timepicker({showMeridian:parseInt(o.timeModeAM),appendWidgetTo:'#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]'}),jQuery(this).click(function(){jQuery(this).timepicker("showWidget")}),jQuery(this).timepicker().on("changeTime.timepicker",function(e){var t=jQuery(this).attr("data-mintime"),a=jQuery(this).attr("data-maxtime");if(""!=t&&0<t.indexOf(":")){var r=parseInt(t.substr(0,t.indexOf(":"))),i=parseInt(t.substr(t.indexOf(":")+1,2));0<t.indexOf("PM")&&12!=r&&(r+=12);var o=e.time.hours;"PM"==e.time.meridian&&(o+=12),(o<r||o==r&&e.time.minutes<i)&&jQuery(this).val("")}if(""!=a&&0<a.indexOf(":")){var p=parseInt(a.substr(0,a.indexOf(":"))),s=parseInt(a.substr(a.indexOf(":")+1,2));0<a.indexOf("PM")&&12!=p&&(p+=12);o=e.time.hours;"PM"==e.time.meridian&&(o+=12),(p<o||o==p&&e.time.minutes>s)&&jQuery(this).val("")}})});var n=wpe_forms[0].dateFormat;n=n.replace(/\\\//g,"/"),jQuery('#estimation_popup.wpe_bootstraped[data-form="'+o.formID+'"]  #mainPanel .genSlide .lfb_datepicker:not(.lfb_datepickerReady)').each(function(){var e=new Date;if(jQuery(this).addClass("lfb_datepickerReady"),jQuery(this).is('[data-allowpast="1"]')||jQuery(this).is('[data-datetype="time"]'))e=null;else if(jQuery(this).is('[data-allowpast="0"]')&&0<parseInt(jQuery(this).attr("data-startdays"))){var t=parseInt(jQuery(this).attr("data-startdays"));e.setDate(e.getDate()+t)}var a=new Array;jQuery(this).is("[data-daysweek]")&&""!=jQuery(this).attr("data-daysweek")&&jQuery.each(jQuery(this).attr("data-daysweek").split(","),function(){a.push(parseInt(this))});var r={daysOfWeekDisabled:a,language:o.datePickerLanguage,timeZone:"",startDate:e,showMeridian:parseInt(o.timeModeAM),container:".lfb_itemContainer_"+jQuery(this).attr("data-itemid")},i=jQuery(this).attr("data-datetype");"date"==i?(r.format=n,r.minView=2,e&&(e.setHours(0),e.setMinutes(0)),jQuery(this).attr("data-disableminutes","0")):"time"==i?(1==parseInt(o.timeModeAM)?r.format="H:ii P":r.format="hh:ii",r.startView=1,jQuery(this).is('[data-disableminutes="1"]')&&(r.minView=1,e&&e.setMinutes(0))):(1==parseInt(o.timeModeAM)?r.format=n+" H:ii P":r.format=n+" hh:ii",jQuery(this).is('[data-disableminutes="1"]')&&(r.minView=1)),jQuery(this).datetimepicker(r).on("show",function(e){jQuery(this).data("lastdate",jQuery(this).val()),jQuery(this).val("")}).on("hide",function(e){""==jQuery(this).val()&&""!=jQuery(this).data("lastdate")&&jQuery(this).val(jQuery(this).data("lastdate"))}).on("changeDay",function(e){jQuery(this).val("");var t=moment.utc(e.date).format("YYYY-MM-DD"),a=jQuery(this).attr("data-eventduration"),r=jQuery(this).attr("data-eventdurationtype"),i=lfb_getDisabledHours(jQuery(this).attr("data-calendarid"),t,a,r);jQuery(this).data("date",t),jQuery(this).datetimepicker("setHoursDisabled",i)}).on("changeHour",function(e){if(jQuery(this).is('[data-datetype="time"]')&&jQuery(this).is('[data-disableminutes="1"]')){var t=moment(e.date).utc();t.subtract(moment(e.date).minutes(),"minutes");var a=this;setTimeout(function(){jQuery(a).datetimepicker("setDate",new Date(t.format("YYYY-MM-DD HH:mm")))},1)}else{var r=moment.utc(e.date).format("YYYY-MM-DD"),i=moment.utc(e.date).format("HH"),o=jQuery(this).attr("data-eventduration"),p=jQuery(this).attr("data-eventdurationtype"),s=lfb_getDisabledMinutes(jQuery(this).attr("data-calendarid"),r,i,o,p);jQuery(this).data("date",moment.utc(e.date).format("YYYY-MM-DD HH:mm")),jQuery(this).datetimepicker("setMinutesDisabled",s)}});var s=this;jQuery(this).closest(".form-group").next(".datetimepicker").find(".datetimepicker-hours thead tr:first-child th").click(function(){var p=this;setTimeout(function(){var e=jQuery(p).closest(".datetimepicker").prev(".form-group").find(".lfb_datepicker"),t=jQuery(s).datetimepicker("getViewDate");e.val("");var a=moment(t).format("YYYY-MM-DD"),r=e.attr("data-eventduration"),i=e.attr("data-eventdurationtype"),o=lfb_getDisabledHours(e.attr("data-calendarid"),a,r,i);e.data("date",a),e.datetimepicker("setHoursDisabled",o)},10)}),"date"==i?jQuery(this).on("show",function(){jQuery(".datetimepicker .table-condensed .prev").show(),jQuery(".datetimepicker .table-condensed .switch").show(),jQuery(".datetimepicker .table-condensed .next").show()}):"time"==i?jQuery(this).on("show",function(){jQuery(".datetimepicker .table-condensed .prev").hide(),jQuery(".datetimepicker .table-condensed .switch").hide(),jQuery(".datetimepicker .table-condensed .next").hide()}):jQuery(this).on("show",function(){jQuery(".datetimepicker .table-condensed .prev").show(),jQuery(".datetimepicker .table-condensed .switch").show(),jQuery(".datetimepicker .table-condensed .next").show()}),0!=jQuery(this).attr("data-calendarid")&&0<parseInt(jQuery(this).attr("data-calendarid"))&&-1==jQuery.inArray(jQuery(this).attr("data-calendarid"),p)&&p.push(jQuery(this).attr("data-calendarid")),0==jQuery(this).attr("placeholder").length&&0==jQuery(this).val().length&&(jQuery(this).is('[data-disableminutes="1"]')||"0"!=jQuery(this).attr("data-calendarid")||jQuery(this).datetimepicker("setDate",new Date)),jQuery(this).keypress(function(e){e.preventDefault()})}),0<p.length&&lfb_getBusyDates(o.formID,p)})});